!function(){if(!window.CustomEvent&&document.createEventObject)return void (window.CustomEvent=function(e,t){if(!arguments.length)throw new Error("Not enough arguments");var n={type:e,bubbles:!1,cancelable:!1,detail:null},r=document.createEventObject();for(var i in n)r[i]=n[i];for(var i in t)r[i]=t[i];return r});try{new CustomEvent("test")}catch(e){var t=function(e,t){if(!arguments.length)throw new Error("Not enough arguments");var n={bubbles:!1,cancelable:!1,detail:null};for(var r in t)n[r]=t[r];var i=document.createEvent("CustomEvent");return i.initCustomEvent(e,n.bubbles,n.cancelable,n.detail),i};t.prototype=(window.CustomEvent||window.Event).prototype,window.CustomEvent=t}}(),function(){if(!document.addEventListener&&window.Element&&window.Event){var e="__events",t="__immediateStopped";Event.prototype.NONE=Event.NONE=0,Event.prototype.CAPTURING_PHASE=Event.CAPTURING_PHASE=1,Event.prototype.AT_TARGET=Event.AT_TARGET=2,Event.prototype.BUBBLING_PHASE=Event.BUBBLING_PHASE=3,Event.prototype.preventDefault=function(){this.cancelable!==!1&&(this.returnValue=!1)},Event.prototype.stopPropagation=function(){this.cancelBubble=!0},Event.prototype.stopImmediatePropagation=function(){this[t]=this.cancelBubble=!0};for(var n=function(e,t){return e.timeStamp=+(new Date),e.target||(e.target=e.srcElement||t),e.pageX=e.clientX+document.documentElement.scrollLeft,e.pageY=e.clientY+document.documentElement.scrollTop,e.relatedTarget="mouseover"==e.type?e.fromElement:"mouseout"==e.type?e.toElement:null,e},r=function(e,t,n){for(var r=0;r<e.length;r++){var i=e[r];if(i.useCapture==n&&i.listener==t)return r}return-1},i=function(e,t,n){e.currentTarget=n,"function"==typeof t?t.call(n,e):t.handleEvent(e)},s=function(e){for(var t=[];e.parentNode;)t.unshift(e.parentNode),e=e.parentNode;return t},o=function(n,r,s){n.eventPhase=s;for(var o=0;o<r.length;o++){for(var u=r[o],a=[],f=(u[e]||{})[n.type]||[],l=0;l<f.length;l++){var c=f[l];c.useCapture&&s==Event.BUBBLING_PHASE||(c.useCapture||s!=Event.CAPTURING_PHASE)&&a.push(c.listener)}for(l=0;l<a.length;)try{for(;l<a.length;){var h=a[l++];if(i(n,h,u),n[t])return!0}}catch(p){setTimeout(function(){throw p},0)}if(n.cancelBubble)return!0}return!1},u=function(e){n(e,this);var t=s(e.target);return t.length&&o(e,t,Event.CAPTURING_PHASE)?e.returnValue:o(e,[e.target],Event.AT_TARGET)?e.returnValue:t.length&&e.bubbles!==!1&&(t.reverse(),o(e,t,Event.BUBBLING_PHASE))?e.returnValue:(e.stopPropagation(),e.returnValue)},a={addEventListener:function(t,n,i){var s=this,o=(this[e]||{})[t]||[],a=o.length;if(!(r(o,n,i)>-1)){if(e in this)var f=this[e];else{var f={_handler:function(){u.apply(s,arguments)}};this[e]=f}t in f||(f[t]=[]),f[t].push({listener:n,useCapture:i}),a||this.attachEvent("on"+t,f._handler)}},removeEventListener:function(t,n,i){var s=(this[e]||{})[t]||[],o=r(s,n,i);-1!=o&&(s.splice(o,1),s.length||this.detachEvent("on"+t,this[e]._handler))},dispatchEvent:function(e){return e.returnValue=!0,u.call(this,e)}},f=[Element,window.constructor,document.constructor];f.length;){var l=f.pop();for(var c in a)l.prototype[c]=a[c]}}}(),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){var n,r;if(null==this)throw new TypeError(" this is null or not defined");var i=Object(this),s=i.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(n=t),r=0;s>r;){var o;r in i&&(o=i[r],e.call(n,o,r,i)),r++}}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var n;if(null==this)throw new TypeError('"this" is null or not defined');var r=Object(this),i=r.length>>>0;if(0===i)return-1;var s=+t||0;if(Math.abs(s)===1/0&&(s=0),s>=i)return-1;for(n=Math.max(s>=0?s:i-Math.abs(s),0);i>n;){if(n in r&&r[n]===e)return n;n++}return-1}),function(e){var t;if("object"==typeof exports){try{t=require("jquery")}catch(n){}module.exports=e(window,document,t)}else window.Dropkick=e(window,document,window.jQuery)}(function(e,t,n,r){var i,s=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),o=e.parent!==e.self&&location.host===parent.location.host,u=-1!==navigator.appVersion.indexOf("MSIE"),a=function(n,r){var i,s;if(this===e)return new a(n,r);for("string"==typeof n&&"#"===n[0]&&(n=t.getElementById(n.substr(1))),i=0;i<a.uid;i++)if(s=a.cache[i],s instanceof a&&s.data.select===n)return c.extend(s.data.settings,r),s;return n?"SELECT"===n.nodeName?this.init(n,r):void 0:(console.error("You must pass a select to DropKick"),!1)},f=function(){},l={initialize:f,change:f,open:f,close:f,search:"strict",bubble:!0},c={hasClass:function(e,t){var n=new RegExp("(^|\\s+)"+t+"(\\s+|$)");return e&&n.test(e.className)},addClass:function(e,t){e&&!c.hasClass(e,t)&&(e.className+=" "+t)},removeClass:function(e,t){var n=new RegExp("(^|\\s+)"+t+"(\\s+|$)");e&&(e.className=e.className.replace(n," "))},toggleClass:function(e,t){var n=c.hasClass(e,t)?"remove":"add";c[n+"Class"](e,t)},extend:function(e){return Array.prototype.slice.call(arguments,1).forEach(function(t){if(t)for(var n in t)e[n]=t[n]}),e},offset:function(n){var r=n.getBoundingClientRect()||{top:0,left:0},i=t.documentElement,s=u?i.scrollTop:e.pageYOffset,o=u?i.scrollLeft:e.pageXOffset;return{top:r.top+s-i.clientTop,left:r.left+o-i.clientLeft}},position:function(e,t){for(var n={top:0,left:0};e&&e!==t;)n.top+=e.offsetTop,n.left+=e.offsetLeft,e=e.parentNode;return n},closest:function(e,t){for(;e;){if(e===t)return e;e=e.parentNode}return!1},create:function(e,n){var r,i=t.createElement(e);n||(n={});for(r in n)n.hasOwnProperty(r)&&("innerHTML"===r?i.innerHTML=n[r]:i.setAttribute(r,n[r]));return i},deferred:function(t){return function(){var n=arguments,r=this;e.setTimeout(function(){t.apply(r,n)},1)}}};return a.cache={},a.uid=0,a.prototype={add:function(e,n){var r,i,s;"string"==typeof e&&(r=e,e=t.createElement("option"),e.text=r),"OPTION"===e.nodeName&&(i=c.create("li",{"class":"dk-option","data-value":e.value,innerHTML:e.text,role:"option","aria-selected":"false",id:"dk"+this.data.cacheID+"-"+(e.id||e.value.replace(" ","-"))}),c.addClass(i,e.className),this.length+=1,e.disabled&&(c.addClass(i,"dk-option-disabled"),i.setAttribute("aria-disabled","true")),this.data.select.add(e,n),"number"==typeof n&&(n=this.item(n)),this.options.indexOf(n)>-1?n.parentNode.insertBefore(i,n):this.data.elem.lastChild.appendChild(i),i.addEventListener("mouseover",this),s=this.options.indexOf(n),this.options.splice(s,0,i),e.selected&&this.select(s))},item:function(e){return e=0>e?this.options.length+e:e,this.options[e]||null},remove:function(e){var t=this.item(e);t.parentNode.removeChild(t),this.options.splice(e,1),this.data.select.remove(e),this.select(this.data.select.selectedIndex),this.length-=1},init:function(e,n){var r,u=a.build(e,"dk"+a.uid);if(this.data={},this.data.select=e,this.data.elem=u.elem,this.data.settings=c.extend({},l,n),this.disabled=e.disabled,this.form=e.form,this.length=e.length,this.multiple=e.multiple,this.options=u.options.slice(0),this.selectedIndex=e.selectedIndex,this.selectedOptions=u.selected.slice(0),this.value=e.value,this.data.cacheID=a.uid,a.cache[this.data.cacheID]=this,this.data.settings.initialize.call(this),a.uid+=1,this._changeListener||(e.addEventListener("change",this),this._changeListener=!0),!s||this.data.settings.mobile){if(e.parentNode.insertBefore(this.data.elem,e),e.setAttribute("data-dkCacheId",this.data.cacheID),this.data.elem.addEventListener("click",this),this.data.elem.addEventListener("keydown",this),this.data.elem.addEventListener("keypress",this),this.form&&this.form.addEventListener("reset",this),!this.multiple)for(r=0;r<this.options.length;r++)this.options[r].addEventListener("mouseover",this);i||(t.addEventListener("click",a.onDocClick),o&&parent.document.addEventListener("click",a.onDocClick),i=!0)}return this},close:function(){var e,t=this.data.elem;if(!this.isOpen||this.multiple)return!1;for(e=0;e<this.options.length;e++)c.removeClass(this.options[e],"dk-option-highlight");t.lastChild.setAttribute("aria-expanded","false"),c.removeClass(t.lastChild,"dk-select-options-highlight"),c.removeClass(t,"dk-select-open-(up|down)"),this.isOpen=!1,this.data.settings.close.call(this)},open:c.deferred(function(){var n,r,i,s,o,a,f=this.data.elem,l=f.lastChild;return o=u?c.offset(f).top-t.documentElement.scrollTop:c.offset(f).top-e.scrollY,a=e.innerHeight-(o+f.offsetHeight),this.isOpen||this.multiple?!1:(l.style.display="block",n=l.offsetHeight,l.style.display="",r=o>n,i=a>n,s=r&&!i&&0?"-up":"-down",this.isOpen=!0,c.addClass(f,"dk-select-open"+s),l.setAttribute("aria-expanded","true"),this._scrollTo(this.options.length-1),this._scrollTo(this.selectedIndex),void this.data.settings.open.call(this))}),disable:function(e,t){var n="dk-option-disabled";(0===arguments.length||"boolean"==typeof e)&&(t=e===r?!0:!1,e=this.data.elem,n="dk-select-disabled",this.disabled=t),t===r&&(t=!0),"number"==typeof e&&(e=this.item(e)),c[t?"addClass":"removeClass"](e,n)},select:function(e,t){var n,r,i,s,o=this.data.select;if("number"==typeof e&&(e=this.item(e)),"string"==typeof e)for(n=0;n<this.length;n++)this.options[n].getAttribute("data-value")===e&&(e=this.options[n]);return!e||"string"==typeof e||!t&&c.hasClass(e,"dk-option-disabled")?!1:c.hasClass(e,"dk-option")?(r=this.options.indexOf(e),i=o.options[r],this.multiple?(c.toggleClass(e,"dk-option-selected"),i.selected=!i.selected,c.hasClass(e,"dk-option-selected")?(e.setAttribute("aria-selected","true"),this.selectedOptions.push(e)):(e.setAttribute("aria-selected","false"),r=this.selectedOptions.indexOf(e),this.selectedOptions.splice(r,1))):(s=this.data.elem.firstChild,this.selectedOptions.length&&(c.removeClass(this.selectedOptions[0],"dk-option-selected"),this.selectedOptions[0].setAttribute("aria-selected","false")),c.addClass(e,"dk-option-selected"),e.setAttribute("aria-selected","true"),s.setAttribute("aria-activedescendant",e.id),s.className="dk-selected "+i.className,s.innerHTML=i.text,this.selectedOptions[0]=e,i.selected=!0),this.selectedIndex=o.selectedIndex,this.value=o.value,t||this.data.select.dispatchEvent(new CustomEvent("change",{bubbles:this.data.settings.bubble})),e):void 0},selectOne:function(e,t){return this.reset(!0),this._scrollTo(e),this.select(e,t)},search:function(e,t){var n,r,i,s,o,u,a,f,l=this.data.select.options,c=[];if(!e)return this.options;for(t=t?t.toLowerCase():"strict",t="fuzzy"===t?2:"partial"===t?1:0,f=new RegExp((t?"":"^")+e,"i"),n=0;n<l.length;n++)if(i=l[n].text.toLowerCase(),2==t){for(r=e.toLowerCase().split(""),s=o=u=a=0;o<i.length;)i[o]===r[s]?(u+=1+u,s++):u=0,a+=u,o++;s===r.length&&c.push({e:this.options[n],s:a,i:n})}else f.test(i)&&c.push(this.options[n]);return 2===t&&(c=c.sort(function(e,t){return t.s-e.s||e.i-t.i}).reduce(function(e,t){return e[e.length]=t.e,e},[])),c},focus:function(){this.disabled||(this.multiple?this.data.elem:this.data.elem.children[0]).focus()},reset:function(e){var t,n=this.data.select;for(this.selectedOptions.length=0,t=0;t<n.options.length;t++)n.options[t].selected=!1,c.removeClass(this.options[t],"dk-option-selected"),this.options[t].setAttribute("aria-selected","false"),!e&&n.options[t].defaultSelected&&this.select(t,!0);this.selectedOptions.length||this.multiple||this.select(0,!0)},refresh:function(){this.dispose().init(this.data.select,this.data.settings)},dispose:function(){return delete a.cache[this.data.cacheID],this.data.elem.parentNode.removeChild(this.data.elem),this.data.select.removeAttribute("data-dkCacheId"),this},handleEvent:function(e){if(!this.disabled)switch(e.type){case"click":this._delegate(e);break;case"keydown":this._keyHandler(e);break;case"keypress":this._searchOptions(e);break;case"mouseover":this._highlight(e);break;case"reset":this.reset();break;case"change":this.data.settings.change.call(this)}},_delegate:function(t){var n,r,i,s,o=t.target;if(c.hasClass(o,"dk-option-disabled"))return!1;if(this.multiple){if(c.hasClass(o,"dk-option"))if(n=e.getSelection(),"Range"===n.type&&n.collapseToStart(),t.shiftKey)if(i=this.options.indexOf(this.selectedOptions[0]),s=this.options.indexOf(this.selectedOptions[this.selectedOptions.length-1]),r=this.options.indexOf(o),r>i&&s>r&&(r=i),r>s&&s>i&&(s=i),this.reset(!0),s>r)for(;s+1>r;)this.select(r++);else for(;r>s-1;)this.select(r--);else t.ctrlKey||t.metaKey?this.select(o):(this.reset(!0),this.select(o))}else this[this.isOpen?"close":"open"](),c.hasClass(o,"dk-option")&&this.select(o)},_highlight:function(e){var t,n=e.target;if(!this.multiple){for(t=0;t<this.options.length;t++)c.removeClass(this.options[t],"dk-option-highlight");c.addClass(this.data.elem.lastChild,"dk-select-options-highlight"),c.addClass(n,"dk-option-highlight")}},_keyHandler:function(e){var t,n,r=this.selectedOptions,i=this.options,s=1,o={tab:9,enter:13,esc:27,space:32,up:38,down:40};switch(e.keyCode){case o.up:s=-1;case o.down:if(e.preventDefault(),t=r[r.length-1],c.hasClass(this.data.elem.lastChild,"dk-select-options-highlight"))for(c.removeClass(this.data.elem.lastChild,"dk-select-options-highlight"),n=0;n<i.length;n++)c.hasClass(i[n],"dk-option-highlight")&&(c.removeClass(i[n],"dk-option-highlight"),t=i[n]);s=i.indexOf(t)+s,s>i.length-1?s=i.length-1:0>s&&(s=0),this.data.select.options[s].disabled||(this.reset(!0),this.select(s),this._scrollTo(s));break;case o.space:if(!this.isOpen){e.preventDefault(),this.open();break};case o.tab:case o.enter:for(s=0;s<i.length;s++)c.hasClass(i[s],"dk-option-highlight")&&this.select(s);case o.esc:this.isOpen&&(e.preventDefault(),this.close())}},_searchOptions:function(e){var t,n=this,i=String.fromCharCode(e.keyCode||e.which),s=function(){n.data.searchTimeout&&clearTimeout(n.data.searchTimeout),n.data.searchTimeout=setTimeout(function(){n.data.searchString=""},1e3)};this.data.searchString===r&&(this.data.searchString=""),s(),this.data.searchString+=i,t=this.search(this.data.searchString,this.data.settings.search),t.length&&(c.hasClass(t[0],"dk-option-disabled")||this.selectOne(t[0]))},_scrollTo:function(e){var t,n,r,i=this.data.elem.lastChild;return-1===e||"number"!=typeof e&&!e||!this.isOpen&&!this.multiple?!1:("number"==typeof e&&(e=this.item(e)),t=c.position(e,i).top,n=t-i.scrollTop,r=n+e.offsetHeight,void (r>i.offsetHeight?(t+=e.offsetHeight,i.scrollTop=t-i.offsetHeight):0>n&&(i.scrollTop=t)))}},a.build=function(e,t){var n,r,i,s=[],o={elem:null,options:[],selected:[]},u=function(e){var n,r,i,s,a=[];switch(e.nodeName){case"OPTION":n=c.create("li",{"class":"dk-option ","data-value":e.value,innerHTML:e.text,role:"option","aria-selected":"false",id:t+"-"+(e.id||e.value.replace(" ","-"))}),c.addClass(n,e.className),e.disabled&&(c.addClass(n,"dk-option-disabled"),n.setAttribute("aria-disabled","true")),e.selected&&(c.addClass(n,"dk-option-selected"),n.setAttribute("aria-selected","true"),o.selected.push(n)),o.options.push(this.appendChild(n));break;case"OPTGROUP":for(r=c.create("li",{"class":"dk-optgroup"}),e.label&&r.appendChild(c.create("div",{"class":"dk-optgroup-label",innerHTML:e.label})),i=c.create("ul",{"class":"dk-optgroup-options"}),s=e.children.length;s--;a.unshift(e.children[s]));a.forEach(u,i),this.appendChild(r).appendChild(i)}};for(o.elem=c.create("div",{"class":"dk-select"+(e.multiple?"-multi":"")}),r=c.create("ul",{"class":"dk-select-options",id:t+"-listbox",role:"listbox"}),e.disabled&&c.addClass(o.elem,"dk-select-disabled"),o.elem.id=t+(e.id?"-"+e.id:""),c.addClass(o.elem,e.className),e.multiple?(o.elem.setAttribute("tabindex",e.getAttribute("tabindex")||"0"),r.setAttribute("aria-multiselectable","true")):(n=e.options[e.selectedIndex],o.elem.appendChild(c.create("div",{"class":"dk-selected "+n.className,tabindex:e.tabindex||0,innerHTML:n?n.text:"&nbsp;",id:t+"-combobox","aria-live":"assertive","aria-owns":r.id,role:"combobox"})),r.setAttribute("aria-expanded","false")),i=e.children.length;i--;s.unshift(e.children[i]));return s.forEach(u,o.elem.appendChild(r)),o},a.onDocClick=function(e){var t,n;if(1!==e.target.nodeType)return!1;null!==(t=e.target.getAttribute("data-dkcacheid"))&&a.cache[t].focus();for(n in a.cache)c.closest(e.target,a.cache[n].data.elem)||n===t||a.cache[n].disabled||a.cache[n].close()},n!==r&&(n.fn.dropkick=function(){var e=Array.prototype.slice.call(arguments);return n(this).each(function(){e[0]&&"object"!=typeof e[0]?"string"==typeof e[0]&&a.prototype[e[0]].apply(new a(this),e.slice(1)):new a(this,e[0]||{})})}),a});