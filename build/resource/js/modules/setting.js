(function(e){var t=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global;if(typeof define=="function"&&define.amd)define("backbone",["underscore","jquery","exports"],function(n,r,i){t.Backbone=e(t,i,n,r)});else if(typeof exports!="undefined"){var n=require("underscore"),r;try{r=require("jquery")}catch(i){}e(t,exports,n,r)}else t.Backbone=e(t,{},t._,t.jQuery||t.Zepto||t.ender||t.$)})(function(e,t,n,r){var i=e.Backbone,s=Array.prototype.slice;t.VERSION="1.3.2",t.$=r,t.noConflict=function(){return e.Backbone=i,this},t.emulateHTTP=!1,t.emulateJSON=!1;var o=function(e,t,r){switch(e){case 1:return function(){return n[t](this[r])};case 2:return function(e){return n[t](this[r],e)};case 3:return function(e,i){return n[t](this[r],a(e,this),i)};case 4:return function(e,i,s){return n[t](this[r],a(e,this),i,s)};default:return function(){var e=s.call(arguments);return e.unshift(this[r]),n[t].apply(n,e)}}},u=function(e,t,r){n.each(t,function(t,i){n[i]&&(e.prototype[i]=o(t,i,r))})},a=function(e,t){return n.isFunction(e)?e:n.isObject(e)&&!t._isModel(e)?f(e):n.isString(e)?function(t){return t.get(e)}:e},f=function(e){var t=n.matches(e);return function(e){return t(e.attributes)}},l=t.Events={},c=/\s+/,h=function(e,t,r,i,s){var o=0,u;if(r&&typeof r=="object"){i!==void 0&&"context"in s&&s.context===void 0&&(s.context=i);for(u=n.keys(r);o<u.length;o++)t=h(e,t,u[o],r[u[o]],s)}else if(r&&c.test(r))for(u=r.split(c);o<u.length;o++)t=e(t,u[o],i,s);else t=e(t,r,i,s);return t};l.on=function(e,t,n){return p(this,e,t,n)};var p=function(e,t,n,r,i){e._events=h(d,e._events||{},t,n,{context:r,ctx:e,listening:i});if(i){var s=e._listeners||(e._listeners={});s[i.id]=i}return e};l.listenTo=function(e,t,r){if(!e)return this;var i=e._listenId||(e._listenId=n.uniqueId("l")),s=this._listeningTo||(this._listeningTo={}),o=s[i];if(!o){var u=this._listenId||(this._listenId=n.uniqueId("l"));o=s[i]={obj:e,objId:i,id:u,listeningTo:s,count:0}}return p(e,t,r,this,o),this};var d=function(e,t,n,r){if(n){var i=e[t]||(e[t]=[]),s=r.context,o=r.ctx,u=r.listening;u&&u.count++,i.push({callback:n,context:s,ctx:s||o,listening:u})}return e};l.off=function(e,t,n){return this._events?(this._events=h(v,this._events,e,t,{context:n,listeners:this._listeners}),this):this},l.stopListening=function(e,t,r){var i=this._listeningTo;if(!i)return this;var s=e?[e._listenId]:n.keys(i);for(var o=0;o<s.length;o++){var u=i[s[o]];if(!u)break;u.obj.off(t,r,this)}return this};var v=function(e,t,r,i){if(!e)return;var s=0,o,u=i.context,a=i.listeners;if(!t&&!r&&!u){var f=n.keys(a);for(;s<f.length;s++)o=a[f[s]],delete a[o.id],delete o.listeningTo[o.objId];return}var l=t?[t]:n.keys(e);for(;s<l.length;s++){t=l[s];var c=e[t];if(!c)break;var h=[];for(var p=0;p<c.length;p++){var d=c[p];r&&r!==d.callback&&r!==d.callback._callback||u&&u!==d.context?h.push(d):(o=d.listening,o&&--o.count===0&&(delete a[o.id],delete o.listeningTo[o.objId]))}h.length?e[t]=h:delete e[t]}return e};l.once=function(e,t,r){var i=h(m,{},e,t,n.bind(this.off,this));return this.on(i,t,r)},l.listenToOnce=function(e,t,r){var i=h(m,{},t,r,n.bind(this.stopListening,this,e));return this.listenTo(e,i)};var m=function(e,t,r,i){if(r){var s=e[t]=n.once(function(){i(t,s),r.apply(this,arguments)});s._callback=r}return e};l.trigger=function(e){if(!this._events)return this;var t=Math.max(0,arguments.length-1),n=Array(t);for(var r=0;r<t;r++)n[r]=arguments[r+1];return h(g,this._events,e,void 0,n),this};var g=function(e,t,n,r){if(e){var i=e[t],s=e.all;i&&s&&(s=s.slice()),i&&y(i,r),s&&y(s,[t].concat(r))}return e},y=function(e,t){var n,r=-1,i=e.length,s=t[0],o=t[1],u=t[2];switch(t.length){case 0:while(++r<i)(n=e[r]).callback.call(n.ctx);return;case 1:while(++r<i)(n=e[r]).callback.call(n.ctx,s);return;case 2:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o);return;case 3:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o,u);return;default:while(++r<i)(n=e[r]).callback.apply(n.ctx,t);return}};l.bind=l.on,l.unbind=l.off,n.extend(t,l);var b=t.Model=function(e,t){var r=e||{};t||(t={}),this.cid=n.uniqueId(this.cidPrefix),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(r=this.parse(r,t)||{});var i=n.result(this,"defaults");r=n.defaults(n.extend({},i,r),i),this.set(r,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(b.prototype,l,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(e){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return this.get(e)!=null},matches:function(e){return!!n.iteratee(e,this)(this.attributes)},set:function(e,t,r){if(e==null)return this;var i;typeof e=="object"?(i=e,r=t):(i={})[e]=t,r||(r={});if(!this._validate(i,r))return!1;var s=r.unset,o=r.silent,u=[],a=this._changing;this._changing=!0,a||(this._previousAttributes=n.clone(this.attributes),this.changed={});var f=this.attributes,l=this.changed,c=this._previousAttributes;for(var h in i)t=i[h],n.isEqual(f[h],t)||u.push(h),n.isEqual(c[h],t)?delete l[h]:l[h]=t,s?delete f[h]:f[h]=t;this.idAttribute in i&&(this.id=this.get(this.idAttribute));if(!o){u.length&&(this._pending=r);for(var p=0;p<u.length;p++)this.trigger("change:"+u[p],this,f[u[p]],r)}if(a)return this;if(!o)while(this._pending)r=this._pending,this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var r in this.attributes)t[r]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return e==null?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?n.clone(this.changed):!1;var t=this._changing?this._previousAttributes:this.attributes,r={};for(var i in e){var s=e[i];if(n.isEqual(t[i],s))continue;r[i]=s}return n.size(r)?r:!1},previous:function(e){return e==null||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){e=n.extend({parse:!0},e);var t=this,r=e.success;return e.success=function(n){var i=e.parse?t.parse(n,e):n;if(!t.set(i,e))return!1;r&&r.call(e.context,t,n,e),t.trigger("sync",t,n,e)},R(this,e),this.sync("read",this,e)},save:function(e,t,r){var i;e==null||typeof e=="object"?(i=e,r=t):(i={})[e]=t,r=n.extend({validate:!0,parse:!0},r);var s=r.wait;if(i&&!s){if(!this.set(i,r))return!1}else if(!this._validate(i,r))return!1;var o=this,u=r.success,a=this.attributes;r.success=function(e){o.attributes=a;var t=r.parse?o.parse(e,r):e;s&&(t=n.extend({},i,t));if(t&&!o.set(t,r))return!1;u&&u.call(r.context,o,e,r),o.trigger("sync",o,e,r)},R(this,r),i&&s&&(this.attributes=n.extend({},a,i));var f=this.isNew()?"create":r.patch?"patch":"update";f==="patch"&&!r.attrs&&(r.attrs=i);var l=this.sync(f,this,r);return this.attributes=a,l},destroy:function(e){e=e?n.clone(e):{};var t=this,r=e.success,i=e.wait,s=function(){t.stopListening(),t.trigger("destroy",t,t.collection,e)};e.success=function(n){i&&s(),r&&r.call(e.context,t,n,e),t.isNew()||t.trigger("sync",t,n,e)};var o=!1;return this.isNew()?n.defer(e.success):(R(this,e),o=this.sync("delete",this,e)),i||s(),o},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||q();if(this.isNew())return e;var t=this.get(this.idAttribute);return e.replace(/[^\/]$/,"$&/")+encodeURIComponent(t)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},n.extend({},e,{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var r=this.validationError=this.validate(e,t)||null;return r?(this.trigger("invalid",this,r,n.extend(t,{validationError:r})),!1):!0}});var w={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};u(b,w,"attributes");var E=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),t.comparator!==void 0&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},S={add:!0,remove:!0,merge:!0},x={add:!0,remove:!1},T=function(e,t,n){n=Math.min(Math.max(n,0),e.length);var r=Array(e.length-n),i=t.length,s;for(s=0;s<r.length;s++)r[s]=e[s+n];for(s=0;s<i;s++)e[s+n]=t[s];for(s=0;s<r.length;s++)e[s+i+n]=r[s]};n.extend(E.prototype,l,{model:b,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,x))},remove:function(e,t){t=n.extend({},t);var r=!n.isArray(e);e=r?[e]:e.slice();var i=this._removeModels(e,t);return!t.silent&&i.length&&(t.changes={added:[],merged:[],removed:i},this.trigger("update",this,t)),r?i[0]:i},set:function(e,t){if(e==null)return;t=n.extend({},S,t),t.parse&&!this._isModel(e)&&(e=this.parse(e,t)||[]);var r=!n.isArray(e);e=r?[e]:e.slice();var i=t.at;i!=null&&(i=+i),i>this.length&&(i=this.length),i<0&&(i+=this.length+1);var s=[],o=[],u=[],a=[],f={},l=t.add,c=t.merge,h=t.remove,p=!1,d=this.comparator&&i==null&&t.sort!==!1,v=n.isString(this.comparator)?this.comparator:null,m,g;for(g=0;g<e.length;g++){m=e[g];var y=this.get(m);if(y){if(c&&m!==y){var b=this._isModel(m)?m.attributes:m;t.parse&&(b=y.parse(b,t)),y.set(b,t),u.push(y),d&&!p&&(p=y.hasChanged(v))}f[y.cid]||(f[y.cid]=!0,s.push(y)),e[g]=y}else l&&(m=e[g]=this._prepareModel(m,t),m&&(o.push(m),this._addReference(m,t),f[m.cid]=!0,s.push(m)))}if(h){for(g=0;g<this.length;g++)m=this.models[g],f[m.cid]||a.push(m);a.length&&this._removeModels(a,t)}var w=!1,E=!d&&l&&h;s.length&&E?(w=this.length!==s.length||n.some(this.models,function(e,t){return e!==s[t]}),this.models.length=0,T(this.models,s,0),this.length=this.models.length):o.length&&(d&&(p=!0),T(this.models,o,i==null?this.length:i),this.length=this.models.length),p&&this.sort({silent:!0});if(!t.silent){for(g=0;g<o.length;g++)i!=null&&(t.index=i+g),m=o[g],m.trigger("add",m,this,t);(p||w)&&this.trigger("sort",this,t);if(o.length||a.length||u.length)t.changes={added:o,removed:a,merged:u},this.trigger("update",this,t)}return r?e[0]:e},reset:function(e,t){t=t?n.clone(t):{};for(var r=0;r<this.models.length;r++)this._removeReference(this.models[r],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e)},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e)},slice:function(){return s.apply(this.models,arguments)},get:function(e){return e==null?void 0:this._byId[e]||this._byId[this.modelId(e.attributes||e)]||e.cid&&this._byId[e.cid]},has:function(e){return this.get(e)!=null},at:function(e){return e<0&&(e+=this.length),this.models[e]},where:function(e,t){return this[t?"find":"filter"](e)},findWhere:function(e){return this.where(e,!0)},sort:function(e){var t=this.comparator;if(!t)throw new Error("Cannot sort a set without a comparator");e||(e={});var r=t.length;return n.isFunction(t)&&(t=n.bind(t,this)),r===1||n.isString(t)?this.models=this.sortBy(t):this.models.sort(t),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return this.map(e+"")},fetch:function(e){e=n.extend({parse:!0},e);var t=e.success,r=this;return e.success=function(n){var i=e.reset?"reset":"set";r[i](n,e),t&&t.call(e.context,r,n,e),r.trigger("sync",r,n,e)},R(this,e),this.sync("read",this,e)},create:function(e,t){t=t?n.clone(t):{};var r=t.wait;e=this._prepareModel(e,t);if(!e)return!1;r||this.add(e,t);var i=this,s=t.success;return t.success=function(e,t,n){r&&i.add(e,n),s&&s.call(n.context,e,t,n)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(e){return e[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(this._isModel(e))return e.collection||(e.collection=this),e;t=t?n.clone(t):{},t.collection=this;var r=new this.model(e,t);return r.validationError?(this.trigger("invalid",this,r.validationError,t),!1):r},_removeModels:function(e,t){var n=[];for(var r=0;r<e.length;r++){var i=this.get(e[r]);if(!i)continue;var s=this.indexOf(i);this.models.splice(s,1),this.length--,delete this._byId[i.cid];var o=this.modelId(i.attributes);o!=null&&delete this._byId[o],t.silent||(t.index=s,i.trigger("remove",i,this,t)),n.push(i),this._removeReference(i,t)}return n},_isModel:function(e){return e instanceof b},_addReference:function(e,t){this._byId[e.cid]=e;var n=this.modelId(e.attributes);n!=null&&(this._byId[n]=e),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){delete this._byId[e.cid];var n=this.modelId(e.attributes);n!=null&&delete this._byId[n],this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if(t){if((e==="add"||e==="remove")&&n!==this)return;e==="destroy"&&this.remove(t,r);if(e==="change"){var i=this.modelId(t.previousAttributes()),s=this.modelId(t.attributes);i!==s&&(i!=null&&delete this._byId[i],s!=null&&(this._byId[s]=t))}}this.trigger.apply(this,arguments)}});var N={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3};u(E,N,"models");var C=t.View=function(e){this.cid=n.uniqueId("view"),n.extend(this,n.pick(e,L)),this._ensureElement(),this.initialize.apply(this,arguments)},k=/^(\S+)\s*(.*)$/,L=["model","collection","el","id","attributes","className","tagName","events"];n.extend(C.prototype,l,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(e){return this.undelegateEvents(),this._setElement(e),this.delegateEvents(),this},_setElement:function(e){this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0]},delegateEvents:function(e){e||(e=n.result(this,"events"));if(!e)return this;this.undelegateEvents();for(var t in e){var r=e[t];n.isFunction(r)||(r=this[r]);if(!r)continue;var i=t.match(k);this.delegate(i[1],i[2],n.bind(r,this))}return this},delegate:function(e,t,n){return this.$el.on(e+".delegateEvents"+this.cid,t,n),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(e,t,n){return this.$el.off(e+".delegateEvents"+this.cid,t,n),this},_createElement:function(e){return document.createElement(e)},_ensureElement:function(){if(!this.el){var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e["class"]=n.result(this,"className")),this.setElement(this._createElement(n.result(this,"tagName"))),this._setAttributes(e)}else this.setElement(n.result(this,"el"))},_setAttributes:function(e){this.$el.attr(e)}}),t.sync=function(e,r,i){var s=A[e];n.defaults(i||(i={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var o={type:s,dataType:"json"};i.url||(o.url=n.result(r,"url")||q()),i.data==null&&r&&(e==="create"||e==="update"||e==="patch")&&(o.contentType="application/json",o.data=JSON.stringify(i.attrs||r.toJSON(i))),i.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{});if(i.emulateHTTP&&(s==="PUT"||s==="DELETE"||s==="PATCH")){o.type="POST",i.emulateJSON&&(o.data._method=s);var u=i.beforeSend;i.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",s);if(u)return u.apply(this,arguments)}}o.type!=="GET"&&!i.emulateJSON&&(o.processData=!1);var a=i.error;i.error=function(e,t,n){i.textStatus=t,i.errorThrown=n,a&&a.call(i.context,e,t,n)};var f=i.xhr=t.ajax(n.extend(o,i));return r.trigger("request",r,f,i),f};var A={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var O=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},M=/\((.*?)\)/g,_=/(\(\?)?:\w+/g,D=/\*\w+/g,P=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(O.prototype,l,{initialize:function(){},route:function(e,r,i){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(r)&&(i=r,r=""),i||(i=this[r]);var s=this;return t.history.route(e,function(n){var o=s._extractParameters(e,n);s.execute(i,o,r)!==!1&&(s.trigger.apply(s,["route:"+r].concat(o)),s.trigger("route",r,o),t.history.trigger("route",s,r,o))}),this},execute:function(e,t,n){e&&e.apply(this,t)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(!this.routes)return;this.routes=n.result(this,"routes");var e,t=n.keys(this.routes);while((e=t.pop())!=null)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(P,"\\$&").replace(M,"(?:$1)?").replace(_,function(e,t){return t?e:"([^/?]+)"}).replace(D,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var r=e.exec(t).slice(1);return n.map(r,function(e,t){return t===r.length-1?e||null:e?decodeURIComponent(e):null})}});var H=t.History=function(){this.handlers=[],this.checkUrl=n.bind(this.checkUrl,this),typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},B=/^[#\/]|\s+$/g,j=/^\/+|\/+$/g,F=/#.*$/;H.started=!1,n.extend(H.prototype,l,{interval:50,atRoot:function(){var e=this.location.pathname.replace(/[^\/]$/,"$&/");return e===this.root&&!this.getSearch()},matchRoot:function(){var e=this.decodeFragment(this.location.pathname),t=e.slice(0,this.root.length-1)+"/";return t===this.root},decodeFragment:function(e){return decodeURI(e.replace(/%25/g,"%2525"))},getSearch:function(){var e=this.location.href.replace(/#.*/,"").match(/\?.+/);return e?e[0]:""},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getPath:function(){var e=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return e.charAt(0)==="/"?e.slice(1):e},getFragment:function(e){return e==null&&(this._usePushState||!this._wantsHashChange?e=this.getPath():e=this.getHash()),e.replace(B,"")},start:function(e){if(H.started)throw new Error("Backbone.history has already been started");H.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(document.documentMode===void 0||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!this.history&&!!this.history.pushState,this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(j,"/");if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var t=this.root.slice(0,-1)||"/";return this.location.replace(t+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var r=document.body,i=r.insertBefore(this.iframe,r.firstChild).contentWindow;i.document.open(),i.document.close(),i.location.hash="#"+this.fragment}var s=window.addEventListener||function(e,t){return attachEvent("on"+e,t)};this._usePushState?s("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?s("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval));if(!this.options.silent)return this.loadUrl()},stop:function(){var e=window.removeEventListener||function(e,t){return detachEvent("on"+e,t)};this._usePushState?e("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&e("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),H.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t===this.fragment&&this.iframe&&(t=this.getHash(this.iframe.contentWindow));if(t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()},loadUrl:function(e){return this.matchRoot()?(e=this.fragment=this.getFragment(e),n.some(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0})):!1},navigate:function(e,t){if(!H.started)return!1;if(!t||t===!0)t={trigger:!!t};e=this.getFragment(e||"");var n=this.root;if(e===""||e.charAt(0)==="?")n=n.slice(0,-1)||"/";var r=n+e;e=this.decodeFragment(e.replace(F,""));if(this.fragment===e)return;this.fragment=e;if(this._usePushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,r);else{if(!this._wantsHashChange)return this.location.assign(r);this._updateHash(this.location,e,t.replace);if(this.iframe&&e!==this.getHash(this.iframe.contentWindow)){var i=this.iframe.contentWindow;t.replace||(i.document.open(),i.document.close()),this._updateHash(i.location,e,t.replace)}}if(t.trigger)return this.loadUrl(e)},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),t.history=new H;var I=function(e,t){var r=this,i;return e&&n.has(e,"constructor")?i=e.constructor:i=function(){return r.apply(this,arguments)},n.extend(i,r,t),i.prototype=n.create(r.prototype,e),i.prototype.constructor=i,i.__super__=r.prototype,i};b.extend=E.extend=O.extend=C.extend=H.extend=I;var q=function(){throw new Error('A "url" property or function must be specified')},R=function(e,t){var n=t.error;t.error=function(r){n&&n.call(t.context,e,r,t),e.trigger("error",e,r,t)}};return t}),!function(e){"function"==typeof define&&define.amd?define("validate",["jquery"],e):"object"==typeof module&&module.exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){e.extend(e.fn,{validate:function(t){if(!this.length)return void (t&&t.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."));var n=e.data(this[0],"validator");return n?n:(this.attr("novalidate","novalidate"),n=new e.validator(t,this[0]),e.data(this[0],"validator",n),n.settings.onsubmit&&(this.on("click.validate",":submit",function(t){n.settings.submitHandler&&(n.submitButton=t.target),e(this).hasClass("cancel")&&(n.cancelSubmit=!0),void 0!==e(this).attr("formnovalidate")&&(n.cancelSubmit=!0)}),this.on("submit.validate",function(t){function r(){var r,i;return n.settings.submitHandler?(n.submitButton&&(r=e("<input type='hidden'/>").attr("name",n.submitButton.name).val(e(n.submitButton).val()).appendTo(n.currentForm)),i=n.settings.submitHandler.call(n,n.currentForm,t),n.submitButton&&r.remove(),void 0!==i?i:!1):!0}return n.settings.debug&&t.preventDefault(),n.cancelSubmit?(n.cancelSubmit=!1,r()):n.form()?n.pendingRequest?(n.formSubmitted=!0,!1):r():(n.focusInvalid(),!1)})),n)},valid:function(){var t,n,r;return e(this[0]).is("form")?t=this.validate().form():(r=[],t=!0,n=e(this[0].form).validate(),this.each(function(){t=n.element(this)&&t,t||(r=r.concat(n.errorList))}),n.errorList=r),t},rules:function(t,n){if(this.length){var r,i,s,o,u,f,l=this[0];if(t)switch(r=e.data(l.form,"validator").settings,i=r.rules,s=e.validator.staticRules(l),t){case"add":e.extend(s,e.validator.normalizeRule(n)),delete s.messages,i[l.name]=s,n.messages&&(r.messages[l.name]=e.extend(r.messages[l.name],n.messages));break;case"remove":return n?(f={},e.each(n.split(/\s/),function(t,n){f[n]=s[n],delete s[n],"required"===n&&e(l).removeAttr("aria-required")}),f):(delete i[l.name],s)}return o=e.validator.normalizeRules(e.extend({},e.validator.classRules(l),e.validator.attributeRules(l),e.validator.dataRules(l),e.validator.staticRules(l)),l),o.required&&(u=o.required,delete o.required,o=e.extend({required:u},o),e(l).attr("aria-required","true")),o.remote&&(u=o.remote,delete o.remote,o=e.extend(o,{remote:u})),o}}}),e.extend(e.expr[":"],{blank:function(t){return!e.trim(""+e(t).val())},filled:function(t){var n=e(t).val();return null!==n&&!!e.trim(""+n)},unchecked:function(t){return!e(t).prop("checked")}}),e.validator=function(t,n){this.settings=e.extend(!0,{},e.validator.defaults,t),this.currentForm=n,this.init()},e.validator.format=function(t,n){return 1===arguments.length?function(){var n=e.makeArray(arguments);return n.unshift(t),e.validator.format.apply(this,n)}:void 0===n?t:(arguments.length>2&&n.constructor!==Array&&(n=e.makeArray(arguments).slice(1)),n.constructor!==Array&&(n=[n]),e.each(n,function(e,n){t=t.replace(new RegExp("\\{"+e+"\\}","g"),function(){return n})}),t)},e.extend(e.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",pendingClass:"pending",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:e([]),errorLabelContainer:e([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(e){this.lastActive=e,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(e)))},onfocusout:function(e){this.checkable(e)||!(e.name in this.submitted)&&this.optional(e)||this.element(e)},onkeyup:function(t,n){var r=[16,17,18,20,35,36,37,38,39,40,45,144,225];9===n.which&&""===this.elementValue(t)||-1!==e.inArray(n.keyCode,r)||(t.name in this.submitted||t.name in this.invalid)&&this.element(t)},onclick:function(e){e.name in this.submitted?this.element(e):e.parentNode.name in this.submitted&&this.element(e.parentNode)},highlight:function(t,n,r){"radio"===t.type?this.findByName(t.name).addClass(n).removeClass(r):e(t).addClass(n).removeClass(r)},unhighlight:function(t,n,r){"radio"===t.type?this.findByName(t.name).removeClass(n).addClass(r):e(t).removeClass(n).addClass(r)}},setDefaults:function(t){e.extend(e.validator.defaults,t)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date ( ISO ).",number:"Please enter a valid number.",digits:"Please enter only digits.",equalTo:"Please enter the same value again.",maxlength:e.validator.format("Please enter no more than {0} characters."),minlength:e.validator.format("Please enter at least {0} characters."),rangelength:e.validator.format("Please enter a value between {0} and {1} characters long."),range:e.validator.format("Please enter a value between {0} and {1}."),max:e.validator.format("Please enter a value less than or equal to {0}."),min:e.validator.format("Please enter a value greater than or equal to {0}."),step:e.validator.format("Please enter a multiple of {0}.")},autoCreateRanges:!1,prototype:{init:function(){function t(t){var n=e.data(this.form,"validator"),r="on"+t.type.replace(/^validate/,""),i=n.settings;i[r]&&!e(this).is(i.ignore)&&i[r].call(n,this,t)}this.labelContainer=e(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||e(this.currentForm),this.containers=e(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var n,r=this.groups={};e.each(this.settings.groups,function(t,n){"string"==typeof n&&(n=n.split(/\s/)),e.each(n,function(e,n){r[n]=t})}),n=this.settings.rules,e.each(n,function(t,r){n[t]=e.validator.normalizeRule(r)}),e(this.currentForm).on("focusin.validate focusout.validate keyup.validate",":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], [type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox'], [contenteditable]",t).on("click.validate","select, option, [type='radio'], [type='checkbox']",t),this.settings.invalidHandler&&e(this.currentForm).on("invalid-form.validate",this.settings.invalidHandler),e(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required","true")},form:function(){return this.checkForm(),e.extend(this.submitted,this.errorMap),this.invalid=e.extend({},this.errorMap),this.valid()||e(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var e=0,t=this.currentElements=this.elements();t[e];e++)this.check(t[e]);return this.valid()},element:function(t){var n,r,i=this.clean(t),s=this.validationTargetFor(i),o=this,u=!0;return void 0===s?delete this.invalid[i.name]:(this.prepareElement(s),this.currentElements=e(s),r=this.groups[s.name],r&&e.each(this.groups,function(e,t){t===r&&e!==s.name&&(i=o.validationTargetFor(o.clean(o.findByName(e))),i&&i.name in o.invalid&&(o.currentElements.push(i),u=u&&o.check(i)))}),n=this.check(s)!==!1,u=u&&n,n?this.invalid[s.name]=!1:this.invalid[s.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),e(t).attr("aria-invalid",!n)),u},showErrors:function(t){if(t){var n=this;e.extend(this.errorMap,t),this.errorList=e.map(this.errorMap,function(e,t){return{message:e,element:n.findByName(t)[0]}}),this.successList=e.grep(this.successList,function(e){return!(e.name in t)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){e.fn.resetForm&&e(this.currentForm).resetForm(),this.invalid={},this.submitted={},this.prepareForm(),this.hideErrors();var t=this.elements().removeData("previousValue").removeAttr("aria-invalid");this.resetElements(t)},resetElements:function(e){var t;if(this.settings.unhighlight)for(t=0;e[t];t++)this.settings.unhighlight.call(this,e[t],this.settings.errorClass,""),this.findByName(e[t].name).removeClass(this.settings.validClass);else e.removeClass(this.settings.errorClass).removeClass(this.settings.validClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var t,n=0;for(t in e)e[t]&&n++;return n},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(e){e.not(this.containers).text(""),this.addWrapper(e).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{e(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(t){}},findLastActive:function(){var t=this.lastActive;return t&&1===e.grep(this.errorList,function(e){return e.element.name===t.name}).length&&t},elements:function(){var t=this,n={};return e(this.currentForm).find("input, select, textarea, [contenteditable]").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter(function(){var r=this.name||e(this).attr("name");return!r&&t.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.hasAttribute("contenteditable")&&(this.form=e(this).closest("form")[0]),r in n||!t.objectLength(e(this).rules())?!1:(n[r]=!0,!0)})},clean:function(t){return e(t)[0]},errors:function(){var t=this.settings.errorClass.split(" ").join(".");return e(this.settings.errorElement+"."+t,this.errorContext)},resetInternals:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=e([]),this.toHide=e([])},reset:function(){this.resetInternals(),this.currentElements=e([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(e){this.reset(),this.toHide=this.errorsFor(e)},elementValue:function(t){var n,r,i=e(t),s=t.type;return"radio"===s||"checkbox"===s?this.findByName(t.name).filter(":checked").val():"number"===s&&"undefined"!=typeof t.validity?t.validity.badInput?"NaN":i.val():(n=t.hasAttribute("contenteditable")?i.text():i.val(),"file"===s?"C:\\fakepath\\"===n.substr(0,12)?n.substr(12):(r=n.lastIndexOf("/"),r>=0?n.substr(r+1):(r=n.lastIndexOf("\\"),r>=0?n.substr(r+1):n)):"string"==typeof n?n.replace(/\r/g,""):n)},check:function(t){t=this.validationTargetFor(this.clean(t));var n,r,i,s=e(t).rules(),o=e.map(s,function(e,t){return t}).length,u=!1,f=this.elementValue(t);if("function"==typeof s.normalizer){if(f=s.normalizer.call(t,f),"string"!=typeof f)throw new TypeError("The normalizer should return a string value.");delete s.normalizer}for(r in s){i={method:r,parameters:s[r]};try{if(n=e.validator.methods[r].call(this,f,t,i.parameters),"dependency-mismatch"===n&&1===o){u=!0;continue}if(u=!1,"pending"===n)return void (this.toHide=this.toHide.not(this.errorsFor(t)));if(!n)return this.formatAndAdd(t,i),!1}catch(l){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+t.id+", check the '"+i.method+"' method.",l),l instanceof TypeError&&(l.message+=".  Exception occurred when checking element "+t.id+", check the '"+i.method+"' method."),l}}if(!u)return this.objectLength(s)&&this.successList.push(t),!0},customDataMessage:function(t,n){return e(t).data("msg"+n.charAt(0).toUpperCase()+n.substring(1).toLowerCase())||e(t).data("msg")},customMessage:function(e,t){var n=this.settings.messages[e];return n&&(n.constructor===String?n:n[t])},findDefined:function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e]},defaultMessage:function(t,n){var r=this.findDefined(this.customMessage(t.name,n.method),this.customDataMessage(t,n.method),!this.settings.ignoreTitle&&t.title||void 0,e.validator.messages[n.method],"<strong>Warning: No message defined for "+t.name+"</strong>"),i=/\$?\{(\d+)\}/g;return"function"==typeof r?r=r.call(this,n.parameters,t):i.test(r)&&(r=e.validator.format(r.replace(i,"{$1}"),n.parameters)),r},formatAndAdd:function(e,t){var n=this.defaultMessage(e,t);this.errorList.push({message:n,element:e,method:t.method}),this.errorMap[e.name]=n,this.submitted[e.name]=n},addWrapper:function(e){return this.settings.wrapper&&(e=e.add(e.parent(this.settings.wrapper))),e},defaultShowErrors:function(){var e,t,n;for(e=0;this.errorList[e];e++)n=this.errorList[e],this.settings.highlight&&this.settings.highlight.call(this,n.element,this.settings.errorClass,this.settings.validClass),this.showLabel(n.element,n.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(e=0;this.successList[e];e++)this.showLabel(this.successList[e]);if(this.settings.unhighlight)for(e=0,t=this.validElements();t[e];e++)this.settings.unhighlight.call(this,t[e],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return e(this.errorList).map(function(){return this.element})},showLabel:function(t,n){var r,i,s,o,u=this.errorsFor(t),f=this.idOrName(t),l=e(t).attr("aria-describedby");u.length?(u.removeClass(this.settings.validClass).addClass(this.settings.errorClass),u.html(n)):(u=e("<"+this.settings.errorElement+">").attr("id",f+"-error").addClass(this.settings.errorClass).html(n||""),r=u,this.settings.wrapper&&(r=u.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(r):this.settings.errorPlacement?this.settings.errorPlacement(r,e(t)):r.insertAfter(t),u.is("label")?u.attr("for",f):0===u.parents("label[for='"+this.escapeCssMeta(f)+"']").length&&(s=u.attr("id"),l?l.match(new RegExp("\\b"+this.escapeCssMeta(s)+"\\b"))||(l+=" "+s):l=s,e(t).attr("aria-describedby",l),i=this.groups[t.name],i&&(o=this,e.each(o.groups,function(t,n){n===i&&e("[name='"+o.escapeCssMeta(t)+"']",o.currentForm).attr("aria-describedby",u.attr("id"))})))),!n&&this.settings.success&&(u.text(""),"string"==typeof this.settings.success?u.addClass(this.settings.success):this.settings.success(u,t)),this.toShow=this.toShow.add(u)},errorsFor:function(t){var n=this.escapeCssMeta(this.idOrName(t)),r=e(t).attr("aria-describedby"),i="label[for='"+n+"'], label[for='"+n+"'] *";return r&&(i=i+", #"+this.escapeCssMeta(r).replace(/\s+/g,", #")),this.errors().filter(i)},escapeCssMeta:function(e){return e.replace(/([\\!"#$%&'()*+,./:;<=>?@\[\]^`{|}~])/g,"\\$1")},idOrName:function(e){return this.groups[e.name]||(this.checkable(e)?e.name:e.id||e.name)},validationTargetFor:function(t){return this.checkable(t)&&(t=this.findByName(t.name)),e(t).not(this.settings.ignore)[0]},checkable:function(e){return/radio|checkbox/i.test(e.type)},findByName:function(t){return e(this.currentForm).find("[name='"+this.escapeCssMeta(t)+"']")},getLength:function(t,n){switch(n.nodeName.toLowerCase()){case"select":return e("option:selected",n).length;case"input":if(this.checkable(n))return this.findByName(n.name).filter(":checked").length}return t.length},depend:function(e,t){return this.dependTypes[typeof e]?this.dependTypes[typeof e](e,t):!0},dependTypes:{"boolean":function(e){return e},string:function(t,n){return!!e(t,n.form).length},"function":function(e,t){return e(t)}},optional:function(t){var n=this.elementValue(t);return!e.validator.methods.required.call(this,n,t)&&"dependency-mismatch"},startRequest:function(t){this.pending[t.name]||(this.pendingRequest++,e(t).addClass(this.settings.pendingClass),this.pending[t.name]=!0)},stopRequest:function(t,n){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[t.name],e(t).removeClass(this.settings.pendingClass),n&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(e(this.currentForm).submit(),this.formSubmitted=!1):!n&&0===this.pendingRequest&&this.formSubmitted&&(e(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(t,n){return e.data(t,"previousValue")||e.data(t,"previousValue",{old:null,valid:!0,message:this.defaultMessage(t,{method:n})})},destroy:function(){this.resetForm(),e(this.currentForm).off(".validate").removeData("validator").find(".validate-equalTo-blur").off(".validate-equalTo").removeClass("validate-equalTo-blur")}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(t,n){t.constructor===String?this.classRuleSettings[t]=n:e.extend(this.classRuleSettings,t)},classRules:function(t){var n={},r=e(t).attr("class");return r&&e.each(r.split(" "),function(){this in e.validator.classRuleSettings&&e.extend(n,e.validator.classRuleSettings[this])}),n},normalizeAttributeRule:function(e,t,n,r){/min|max|step/.test(n)&&(null===t||/number|range|text/.test(t))&&(r=Number(r),isNaN(r)&&(r=void 0)),r||0===r?e[n]=r:t===n&&"range"!==t&&(e[n]=!0)},attributeRules:function(t){var n,r,i={},s=e(t),o=t.getAttribute("type");for(n in e.validator.methods)"required"===n?(r=t.getAttribute(n),""===r&&(r=!0),r=!!r):r=s.attr(n),this.normalizeAttributeRule(i,o,n,r);return i.maxlength&&/-1|2147483647|524288/.test(i.maxlength)&&delete i.maxlength,i},dataRules:function(t){var n,r,i={},s=e(t),o=t.getAttribute("type");for(n in e.validator.methods)r=s.data("rule"+n.charAt(0).toUpperCase()+n.substring(1).toLowerCase()),this.normalizeAttributeRule(i,o,n,r);return i},staticRules:function(t){var n={},r=e.data(t.form,"validator");return r.settings.rules&&(n=e.validator.normalizeRule(r.settings.rules[t.name])||{}),n},normalizeRules:function(t,n){return e.each(t,function(r,i){if(i===!1)return void delete t[r];if(i.param||i.depends){var s=!0;switch(typeof i.depends){case"string":s=!!e(i.depends,n.form).length;break;case"function":s=i.depends.call(n,n)}s?t[r]=void 0!==i.param?i.param:!0:(e.data(n.form,"validator").resetElements(e(n)),delete t[r])}}),e.each(t,function(r,i){t[r]=e.isFunction(i)&&"normalizer"!==r?i(n):i}),e.each(["minlength","maxlength"],function(){t[this]&&(t[this]=Number(t[this]))}),e.each(["rangelength","range"],function(){var n;t[this]&&(e.isArray(t[this])?t[this]=[Number(t[this][0]),Number(t[this][1])]:"string"==typeof t[this]&&(n=t[this].replace(/[\[\]]/g,"").split(/[\s,]+/),t[this]=[Number(n[0]),Number(n[1])]))}),e.validator.autoCreateRanges&&(null!=t.min&&null!=t.max&&(t.range=[t.min,t.max],delete t.min,delete t.max),null!=t.minlength&&null!=t.maxlength&&(t.rangelength=[t.minlength,t.maxlength],delete t.minlength,delete t.maxlength)),t},normalizeRule:function(t){if("string"==typeof t){var n={};e.each(t.split(/\s/),function(){n[this]=!0}),t=n}return t},addMethod:function(t,n,r){e.validator.methods[t]=n,e.validator.messages[t]=void 0!==r?r:e.validator.messages[t],n.length<3&&e.validator.addClassRules(t,e.validator.normalizeRule(t))},methods:{required:function(t,n,r){if(!this.depend(r,n))return"dependency-mismatch";if("select"===n.nodeName.toLowerCase()){var i=e(n).val();return i&&i.length>0}return this.checkable(n)?this.getLength(t,n)>0:t.length>0},email:function(e,t){return this.optional(t)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e)},url:function(e,t){return this.optional(t)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(e)},date:function(e,t){return this.optional(t)||!/Invalid|NaN/.test((new Date(e)).toString())},dateISO:function(e,t){return this.optional(t)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(e)},number:function(e,t){return this.optional(t)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},digits:function(e,t){return this.optional(t)||/^\d+$/.test(e)},minlength:function(t,n,r){var i=e.isArray(t)?t.length:this.getLength(t,n);return this.optional(n)||i>=r},maxlength:function(t,n,r){var i=e.isArray(t)?t.length:this.getLength(t,n);return this.optional(n)||r>=i},rangelength:function(t,n,r){var i=e.isArray(t)?t.length:this.getLength(t,n);return this.optional(n)||i>=r[0]&&i<=r[1]},min:function(e,t,n){return this.optional(t)||e>=n},max:function(e,t,n){return this.optional(t)||n>=e},range:function(e,t,n){return this.optional(t)||e>=n[0]&&e<=n[1]},step:function(t,n,r){var i=e(n).attr("type"),s="Step attribute on input type "+i+" is not supported.",o=["text","number","range"],u=new RegExp("\\b"+i+"\\b"),f=i&&!u.test(o.join());if(f)throw new Error(s);return this.optional(n)||t%r===0},equalTo:function(t,n,r){var i=e(r);return this.settings.onfocusout&&i.not(".validate-equalTo-blur").length&&i.addClass("validate-equalTo-blur").on("blur.validate-equalTo",function(){e(n).valid()}),t===i.val()},remote:function(t,n,r,i){if(this.optional(n))return"dependency-mismatch";i="string"==typeof i&&i||"remote";var s,o,u,f=this.previousValue(n,i);return this.settings.messages[n.name]||(this.settings.messages[n.name]={}),f.originalMessage=f.originalMessage||this.settings.messages[n.name][i],this.settings.messages[n.name][i]=f.message,r="string"==typeof r&&{url:r}||r,u=e.param(e.extend({data:t},r.data)),f.old===u?f.valid:(f.old=u,s=this,this.startRequest(n),o={},o[n.name]=t,e.ajax(e.extend(!0,{mode:"abort",port:"validate"+n.name,dataType:"json",data:o,context:s.currentForm,success:function(e){var r,o,u,a=e===!0||"true"===e;s.settings.messages[n.name][i]=f.originalMessage,a?(u=s.formSubmitted,s.resetInternals(),s.toHide=s.errorsFor(n),s.formSubmitted=u,s.successList.push(n),s.invalid[n.name]=!1,s.showErrors()):(r={},o=e||s.defaultMessage(n,{method:i,parameters:t}),r[n.name]=f.message=o,s.invalid[n.name]=!0,s.showErrors(r)),f.valid=a,s.stopRequest(n,a)}},r)),"pending")}}});var t,n={};e.ajaxPrefilter?e.ajaxPrefilter(function(e,t,r){var i=e.port;"abort"===e.mode&&(n[i]&&n[i].abort(),n[i]=r)}):(t=e.ajax,e.ajax=function(r){var i=("mode"in r?r:e.ajaxSettings).mode,s=("port"in r?r:e.ajaxSettings).port;return"abort"===i?(n[s]&&n[s].abort(),n[s]=t.apply(this,arguments),n[s]):t.apply(this,arguments)});var r=function(e){var t=e.match(/[^\x00-\xff]/ig);return e.length+(t==null?0:t.length)};$.validator.addMethod("domain",function(e,t){var n=/^(?=^.{3,255}$)[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+$/;return n.test(e)},"请输入正确的域名"),$.validator.addMethod("companyName",function(e,t){var n=r(e),i=/^[\u4e00-\u9fff0-9a-z\.\s,_]*$/i,s=/^\s+$/;return n>0&&n<=50&&!s.test(e)&&i.test(e)?!0:!1},"请输入正确的企业名称"),$.validator.addMethod("deptName",function(e,t){var n=r(e),i=/^[\u4e00-\u9fff0-9a-z\s]*$/i,s=/^\s+$/;return n>0&&n<=50&&!s.test(e)&&i.test(e)?!0:!1},"请输入正确的部门名称"),$.validator.addMethod("account",function(e,t){var n=/^[a-z0-9]([0-9a-z\.\-_]{1,19})$/i;return n.test(e)},"请输入正确的用户名"),$.validator.addMethod("fullName",function(e,t){var n=r(e),i=/^[a-zA-Z0-9 \u4e00-\u9fa5]+$/;return e?n<=40&&i.test(e)?!0:!1:!0},"请输入正确的姓名"),$.validator.addMethod("mobilePhone",function(e,t){if(!e)return!0;var n=/^1[3|4|5|7|8][0-9]{9}$/;return n.test(e)},"请输入正确的手机号码"),$.validator.addMethod("companyPswd",function(e,t){var n=/^(?![A-Z]+$)(?![a-z]+$)(?!\d+$)(?![\W_]+$)\S+$/;return n.test(e)},"请输入正确密码"),$.validator.addMethod("remark",function(e,t){if(!e)return!0;var n=r(e);return n<=100?!0:!1},"请输入100字符以内的备注"),$.validator.addMethod("reDeptName",function(e,t){var n=$(t).data("type"),r=$(t).val(),i=$(t).data("deptname"),s,o;return n=="add"?UserManage.deptModel&&!_.isEmpty(UserManage.deptModel)?s=UserManage.deptModel.deptId:s=0:s=UserManage.deptModel.parentId||0,o=_.find(UserManage.deptObj[s],function(e){return n=="edit"?e.name==r&&i!=r:e.name==r}),!o},"部门名称重复")}),define("controls/DataAPI",[],function(){return{url:"admin.do",fnName:{addCorp:"corp:addCorp",updateCorp:"corp:updateCorp",delCorp:"corp:delCorp",getCorpDetail:"corp:getCorpDetail",listCorp:"corp:listCorp",updateCorpStatus:"corp:updateCorpStatus",updateAccountRule:"account:updateAccountRule",getAccountRule:"account:getAccountRule",getCorpService:"corp:getCorpService",updateCorpService:"corp:updateCorpService",searchUser:"user:searchUser",addUser:"user:addUser",updateUser:"user:updateUser",delUser:"user:delUser",batchDelUser:"user:batchDelUser",getUser:"user:getUser",getDeptUsers:"user:getDeptUsers",removeUserDept:"user:removeUserDept",addDeptUser:"user:addDeptUser",manageDeptMember:"user:manageDeptMember",addDept:"dept:addDept",updateDept:"dept:updateDept",getDeptDetail:"dept:getDeptDetail",delDept:"dept:delDept",uploadTemplate:"upload:uploadTemplate",getBatchImpDetail:"user:getBatchImpDetail",getDeptUnUsed:"dept:getDeptUnUsed",getCorpMsgSet:"corp:getCorpMsgSet",updateCorpMsgSet:"corp:updateCorpMsgSet",searchLog:"log:searchLog",getFileCount:"count:getFileCount",getFileOperate:"count:getFileOperate",getUseStorage:"count:getUseStorage",getUseStorageDetail:"count:getUseStorageDetail",getPersonStorage:"user:getPersonStorage",getTeamStorage:"count:getTeamStorage",getGroupStorage:"count:getGroupStorage",uploadLogo:"upload:uploadLogo",getCorpLogo:"corp:getCorpLogo",getLicenseInfo:"corp:getLicenseInfo",getSyncSvr:"corp:getSyncSvr",addSyncSvr:"corp:addSyncSvr",updateSyncSvr:"corp:updateSyncSvr",getSyncLog:"corp:getSyncLog",getEmailSvr:"corp:getEmailSvr",addEmailSvr:"corp:addEmailSvr",updateEmailSvr:"corp:updateEmailSvr"}}}),global.language=global.language||"zh_CN",define("controls/Common",["jquery","underscore","controls/DataAPI","i18n/"+global.language],function(e,t,n,r){return{getUrlByName:function(e){if(e&&n.fnName[e])return[n.url,"?func=",n.fnName[e],"&tid=",(new Date).getTime()].join("");console.log(r.common.invalidFn)},formatFloat:function(e,t){var n=e.toFixed(t);return parseInt(n,10)==n?parseInt(n,10):n},formatStorageUnit:function(e,t,n){var r=1024,i=1048576,s=1073741824,o=1099511627776,u,a,f=Math.abs(e);if(n){switch(n){case"B":u=this.formatFloat(f,1);break;case"K":case"KB":u=this.formatFloat(f/r,1);break;case"M":case"MB":u=this.formatFloat(f/i,1);break;case"G":case"GB":u=this.formatFloat(f/s,1);break;case"T":case"TB":u=this.formatFloat(f/o,1);break;default:}a=n}else f>=o?(u=this.formatFloat(f/o,1),a="TB"):f>=s?(u=this.formatFloat(f/s,1),a="GB"):f>=i?(u=this.formatFloat(f/i,1),a="MB"):f>=r?(u=this.formatFloat(f/r,1),a="KB"):(u=this.formatFloat(f,1),a="B");return e!==f&&(u=-u),t?{num:u,unit:a}:u==0?0:u+a},stringFormat:function(){if(arguments.length==0)return null;var e=arguments[0];for(var t=1;t<arguments.length;t++){var n=new RegExp("\\{"+(t-1)+"\\}","gm");e=e.replace(n,arguments[t])}return e},convertToB:function(e,t){var n;switch(t){case"K":case"KB":n=1024;break;case"M":case"MB":n=1048576;break;case"G":case"GB":n=1073741824;break;case"T":case"TB":n=1099511627776;break;default:n=1}return e*n},formatOutDate:function(e){var t,n;return e>=12?(t=parseInt(e/12,10),n=e%12,[t,r.setting.year,n?n+r.setting.month:""].join("")):e+r.setting.month},getOutDate:function(e){return e==-1?r.setting.forever:this.formatOutDate(e)},getStatus:function(e){var t="";switch(e){case 0:t=r.setting.normal;break;case 1:t=r.setting.locked;break;case 2:t=r.setting.canceled;break;default:t=r.setting.normal}return t},getTemplate:function(t,n){return e("<div/>").html(t).find(n).html()},tpl2Html:function(e,n){var i=t.template(e);return i(t.extend({},{Lang:r},n||{}))},parseURL:function(e){var t=document.createElement("a");return t.href=e,{source:e,protocol:t.protocol.replace(":",""),host:t.hostname,port:t.port,query:t.search,params:function(){var e={},n=t.search.replace(/^\?/,"").split("&"),r=n.length,i=0,s;for(;i<r;i++){if(!n[i])continue;s=n[i].split("="),e[s[0]]=s[1]}return e}(),file:(t.pathname.match(/\/([^\/?#]+)$/i)||[,""])[1],hash:t.hash.replace("#",""),path:t.pathname.replace(/^([^\/])/,"/$1"),relative:(t.href.match(/tps?:\/\/[^\/]+(.+)/)||[,""])[1],segments:t.pathname.replace(/^\//,"").split("/")}},getRootUrl:function(){var e=this.parseURL(window.location.href);return[e.protocol,"://",e.host+"/"].join("")},getFileExt:function(e){if(e!=""){var t="."+e.replace(/.+\./,"");return t}},getLv:function(e){var t=1,n=r.common.weak,i=/[a-zA-z]/,s=/[0-9]/,o=/(?=[\x21-\x7e]+)[^A-Za-z0-9]/;if(i.test(e)&&s.test(e)&&o.test(e))t=3,n=r.common.strong;else if(i.test(e)&&s.test(e)||i.test(e)&&o.test(e)||s.test(e)&&o.test(e))t=2,n=r.common.normal;return{pswdLv:t,pswdLvText:n}},checkPswdLv:function(t,n){var r=this;e(t).off("keyup.lv").on("keyup.lv",function(){var t=e(this),i=t.val(),s=e(n);if(i==""){s.hide();return}s.show();var o=r.getLv(i);s.find("span").attr("class","passwrodLevel Plevel_"+o.pswdLv),s.find("em").text(o.pswdLvText)})},addStyle:function(t,n){var r="temp-style-"+t,i=e("#"+r);i.length&&i.remove();var s=['<style id="',r,'" type="text/css" rel="stylesheet">',n,"</style>"].join("");e(s).appendTo("head")},formatMobile:function(e,t){if(!e)return"";e+="";var n="+86";if(t){if(e.indexOf("86")<=-1||e.indexOf("86")>1)e=n+e}else{var r=e.indexOf("+86");r==0&&(e=e.substr(3))}return e},mergeErrMsg:function(e,t){var n,r=t.summary||t.code||"",i=/[，。,\.!！]/;return i.test(e)?n=e+" "+r:n=e+(r?"："+r:"")+" ！",n},getCorpId:function(){var e=~~this.parseURL(location.href).params.corpId;return global.user.corpId||e||global.corpList[0].corpId},getCorpData:function(){var e=this.getCorpId();return t.find(window.global.corpList,function(t){return t.corpId==e})},placeholder:function(){typeof document.createElement("input").placeholder=="undefined"&&e("[placeholder]").off("focus.placeholder").on("focus.placeholder",function(){var t=e(this);t.val()===t.attr("placeholder")&&(t.val(""),t.removeClass("placeholder"))}).off("blur.placeholder").on("blur.placeholder",function(){var t=e(this);if(t.val()===""||t.val()===t.attr("placeholder"))t.addClass("placeholder"),t.val(t.attr("placeholder"))}).blur().parents("form").submit(function(){e(this).find("[placeholder]").each(function(){var t=e(this);t.val()===t.attr("placeholder")&&t.val("")})})}}}),define("controls/List",["jquery","underscore"],function(e,t){var n=function(e){this.option=e,this.data=this.option.data,this.option.operate&&(this.operateList=this.option.operate.list),this.Fn={};var n=this;return this.operateList&&this.operateList.length&&t.each(this.operateList,function(e){n.Fn[e.action]=e.onClick}),t.each(this.option.columns,function(e){e.action&&(n.Fn[e.action]=e.onClick)}),this.init(),this.html=[],this};return n.prototype={init:function(){this.render(),this.initEvents(),this.option.hasCheckBtn&&this.initCheck()},getTitleHtml:function(){var e=this,n=["<tr>"];return this.option.hasCheckBtn&&n.push(['<th width="25" style="padding-left:20px;"><input class="checkAll" type="checkbox"></th>'].join("")),t.each(this.option.columns,function(e){n.push(['<th scope="col"',e.titleStyle?' style="'+e.titleStyle+'"':"",e.titleAttr,">",e.columnName,"</th>"].join(""))}),e.option.operate&&e.option.operate.list&&e.option.operate.list.length&&n.push(['<th scope="col"',e.option.operate.titleStyle?' style="'+e.option.operate.titleStyle+'"':"",e.option.operate.titleAttr,">",e.option.operate.columnName,"</th>"].join("")),n.push("</tr>"),n.join("")},getListHtml:function(){var e=this,n=[];if(!e.data.length){var r=e.option.columns.length+(e.option.hasCheckBtn?1:0)+(e.option.operate?1:0);return'<tr class="no-data"><td colspan="'+r+'" align="center"><div class="tipsNoDate"><h5><i class="i-noDate"></i></h5><h4>暂无数据</h4></div></td></tr>'}return t.each(e.data,function(r){var i;e.option.rowClass&&typeof e.option.rowClass=="function"&&(i=e.option.rowClass(r));var s=["<tr",i?' class="'+i+'"':"",' data-key="',r[e.option.key],'">'];e.option.hasCheckBtn&&s.push(['<td style="padding-left:20px;"><input type="checkbox" class="list-checkbox" value="',r[e.option.key],'"></td>'].join("")),t.each(e.option.columns,function(e){var t=r[e.columnId],n=e.callback(t,r)||t||"";s.push(['<td data-columnId="',e.columnId,'">',n,"</td>"].join(""))}),e.option.operate&&e.option.operate.list&&e.option.operate.list.length&&(s.push("<td>"),t.each(e.option.operate.list,function(e){s.push(['<a href="javascript:;" class="',e.className,'" data-action="',e.action,'">',e.name,"</a>"].join(""))}),s.push("</td>")),s.push("</tr>"),n.push(s.join(""))}),n.join("")},render:function(){var t=this.getTitleHtml(),n=this.getListHtml(),r=['<div class="tableBox"><table width="100%" class="tableList"><tbody>',t,n,"</tbody></table></div>"];e(this.option.container).html(r.join(""))},initEvents:function(){var n=this;if(n.binded)return;e(this.option.container).off("click.list").on("click.list",function(r){var i=e(r.target),s=i.parents("td").length?i.parents("td"):i,o=i.parents("tr"),u=o.data("key"),a=i.data("action");if(a){var f=t.find(n.data,function(e){return e[n.option.key]==u});n.Fn[a]&&typeof n.Fn[a]=="function"&&n.Fn[a](f,s,o)}}),this.binded=!0},getSelected:function(){var n=this,r=[];return e(this.option.container).find(".list-checkbox:checked").each(function(){var i=e(this).val(),s=t.find(n.data,function(e){return e[n.option.key]==i});r.push(s)}),r},initCheck:function(){var t=this;this.$container=e(this.option.container),this.$listCheckbox=this.$container.find(".list-checkbox"),this.$checkAll=e(this.option.container).find(".checkAll"),this.$checkAll.off("change.list").on("change.list",function(){var n=e(this).prop("checked");if(t.$container.find(".no-data").length)return;n?t.$container.find("tr:gt(0)").addClass("on"):t.$container.find("tr:gt(0)").removeClass("on"),t.$listCheckbox.prop("checked",n)}),this.$listCheckbox.off("change.list").on("change.list",function(){var n=t.$container.find(".list-checkbox:checked").length,r=e(this).parents("tr");t.$checkAll.prop("indeterminate",n!=0&&n!=t.data.length),t.$checkAll.prop("checked",n==t.data.length),e(this).is(":checked")?r.addClass("on"):r.removeClass("on")})},destroyEvents:function(){this.$checkAll&&this.$checkAll.off("change.list"),this.$listCheckbox&&this.$listCheckbox.off("change.list")},setData:function(e){this.destroyEvents(),this.data=e||[],this.init()}},n}),function(e,t){e.sobox={maskIndex:0,showMask:function(n){var r=this;if(n){var i=e(".so-openmask");i.length?r.maskIndex++:(i=e('<div class="so-openmask"></div>'),e("body").append(i),r.maskIndex=1);var s=typeof t.body.style.maxHeight=="undefined"?t:window,o=e(s).height()-18;i.height(n?o+20:0),e(window).resize(function(){var t=e(s).height()-18;i.height(n?t+20:0)}),i.css("z-index",1e3+r.maskIndex*10)}else i=null;return i},show:function(t,n,r){var i=this,s=e(t.obj),o=i.showMask(n);return i.setPos(t),t.onlyOne&&e("body").data("soonlyone",!0),s.css("z-index",1002+i.maskIndex*10).fadeIn(),s.find(".s-close").bind("click",function(){i.hide(s)}),r&&r(),o},hide:function(t,n,r){var i=this,s=e(".so-openmask");e(t).fadeOut("fast",function(){r&&r()}),n&&(i.maskIndex--,s.css("z-index",1e3+i.maskIndex*10),i.maskIndex==0&&s.remove()),e(t).find(".s-close").unbind("click")},drag:function(n,r){function o(e){e==null&&(e=window.event),i.css({left:e.clientX-posX+"px",top:e.clientY-posY+"px"})}var i=e(n),s=e(r);s.mousedown(function(n){n||(n=window.event),posX=n.clientX-parseInt(i.css("left")),posY=n.clientY-parseInt(i.css("top")),e(t).bind("mousemove.drag",function(e){o(e)})}),e(t).mouseup(function(n){n.target==s.get(0)&&e(t).unbind("mousemove.drag")})},setPos:function(n){var r=this,n=e.extend({mode:"center",obj:null,pos:[0,0],offset:[0,0]},n),i=e(n.obj),s=Math.floor(i.height()/2),o=Math.floor(i.width()/2),u=e(window).scrollTop(),a=e(window).height(),f=n.pos[0],l=n.pos[1],c=n.offset[0],h=n.offset[1];i.css({position:"fixed"});if(typeof t.body.style.maxHeight=="undefined"){var p=i.find("select");e("select").not(p).hide()}switch(n.mode){case"win":i.css({left:f+c,top:l+h}),typeof t.body.style.maxHeight=="undefined"&&i.css({position:"absolute",top:u+l+h});break;case"doc":i.css({position:"absolute",left:f+c,top:l+h});break;case"tc":i.css({left:"50%",top:h,marginLeft:-o+c}),typeof t.body.style.maxHeight=="undefined"&&i.css({position:"absolute",top:u+h});break;case"bc":i.css({left:"50%",bottom:h,marginLeft:-o+c}),typeof t.body.style.maxHeight=="undefined"&&i.css({position:"absolute",top:u+h+a});break;default:i.css({top:"50%",left:"50%",marginTop:-s-10+h,marginLeft:-o+c}),typeof t.body.style.maxHeight=="undefined"&&i.css({position:"absolute",top:u+a/2})}},pop:function(t){function f(a){a&&a.disableEvents&&e("body").addClass("disableEvents"),t=e.extend(t,a||{}),t.showTitle&&i.append(s),t.outCloseBtn&&o.addClass("s-sopop-out-close"),i.append(o).append(u),t.height&&t.type!="iframe"&&i.css("height",t.height+"px"),i.css({visibility:t.visibility?"visible":"hidden"}),t.type=="content"&&u.html(t.content);if(t.type=="target"){var f=e(t.target).show();u.append(f)}if(t.type=="iframe"){var c=e('<iframe id="'+t.iframeID+'" name="'+t.iframeID+'" src="'+t.iframe+'" width="100%" height="'+t.height+'" frameborder="0" scrolling="auto"></iframe>');u.html(c)}t.type=="ajax"&&u.load(t.ajax.url,t.ajax.data,function(){n.setPos({mode:t.posType,obj:i,pos:t.pos,offset:t.offset}),t.ajax.callback&&t.ajax.callback()});if(t.btn.length>0){var h=e('<p class="p-so-popBtn"></p>');e.each(t.btn,function(){var t=e.extend({cls:null,text:"确定",link:"#",removePop:!0,callback:function(e){}},this),n=e('<a class="a-sopop-btn" href="'+t.link+'"><span class="s-sopop-btn">'+t.text+"</span></a>");t.cls!==null&&n.addClass(t.cls),n.bind("click",function(){return t.callback&&t.callback(l)&&l(),t.removePop&&l(),t.link==="#"?!1:!0}),h.append(n)}),i.append(h)}e("body").append(i),t.showTitle&&t.drag&&(s.addClass("h2-sopop-move"),n.drag(i,s)),t.beforePop(i,s,o,u),r=n.show({mode:t.posType,obj:i,pos:t.pos,offset:t.offset,onlyOne:t.onlyOne},t.showMask,t.onPop(i)),o.bind("click",function(){l()}),r&&t.maskClick&&r.bind("click",function(){l()})}function l(r){t=e.extend(t,r||{}),n.hide(i,t.showMask),e("body").removeData("soonlyone"),t.target!=null&&e(t.target).appendTo("body").hide(),i.remove(),t.closePop(),e("body").removeClass("disableEvents")}var n=this,t=e.extend({type:"content",target:null,content:null,iframe:null,iframeID:"sopop-iframe",ajax:{url:null,data:null,callback:function(){}},posType:"center",pos:[0,0],offset:[0,0],cls:null,width:400,height:null,defaultShow:!0,visibility:!0,title:"提示",showTitle:!0,outCloseBtn:!1,showMask:!0,onlyOne:!1,drag:!0,maskClick:!1,btn:[],disableEvents:!1,beforePop:function(){},onPop:function(){},closePop:function(){}},t||{}),r,i=e('<div class="so-popbox '+(t.cls?t.cls:"")+'" style="width:'+t.width+'px;display:none;"></div>'),s=e('<h2 class="h2-sopop"><span class="s-sopop-title">'+t.title+"</span></h2>"),o=e('<span class="s-sopop-close">[关闭]</span>'),u=e('<div class="so-popbox-cont"></div>'),a=e("body").data("soonlyone");return t.defaultShow&&!a&&f(t),{wrap:i,mask:r,opt:t,removePop:l,showPop:f}},alert:function(e,t,n){var r=this;r.pop({cls:"so-popAlert",title:e,width:360,content:t,btn:[{text:"确定"}],closePop:n})},confirm:function(e,t,n,r){var i=this;i.pop({cls:"so-popConfirm",title:e,width:360,content:t,btn:[{text:"确定",callback:function(){n&&n()}},{text:"取消",cls:"a-sopop-cancel",callback:function(){r&&r()}}]})},tip:function(t){var n=this,r=null,t=e.extend({cls:"so-popTip",showTitle:!1,posType:"tc",showMask:!1,width:250,stayTime:5e3,offset:[0,5],closePop:function(){r&&clearTimeout(r)}},t||{}),i=n.pop(t);return t.stayTime>0&&(r=setTimeout(function(){i.removePop()},t.stayTime)),i},loading:function(t){var n=this,t=e.extend({type:"content",cls:"so-loading",showTitle:!1,maskClick:!1,width:100,height:36,content:"",stayTime:0,showMask:!1,disableEvents:!0},t||{}),r=n.pop(t);return t.stayTime>0&&setTimeout(function(){r.removePop()},t.stayTime),{open:r.showPop,close:r.removePop}}},e.fn.extend({soIframePop:function(t){var n=e.extend({type:"iframe",targetTag:"href",splitString:"#soIframe?",width:800,height:480,showTitle:!1},t||{}),r=[];return this.each(function(){var t=e(this),i=t.attr(n.targetTag).split(n.splitString),s=i[0];par=i[1]?i[1].split("&"):"";var u={};e.each(par,function(){var e=this.split("=");u[e[0]]=e[1]}),n=e.extend(n,u||{}),n.showTitle=n.showTitle=="true"?1:+n.showTitle,n.iframe=s,n.defaultShow=!1;var a=e.sobox.pop(n);r.push(a),t.click(function(){return a.showPop(),e(this).data("iframePop",a),!1})}),r},soSidePop:function(t){var n=e(this),r=t.event||"click",i=null;return n.bind(r,function(n){var r=e(this).offset(),s=t.por=="mouse"?[n.pageX,n.pageY]:[r.left,r.top],o=e.extend({showMask:!1,posType:"doc",por:"mouse",pos:s,offset:[10,10],onlyOne:!0,returnFalse:!0},t||{});i=e.sobox.pop(o);if(o.returnFalse)return!1}),t.leaveHide==1&&n.bind("mouseout",function(e){i&&i.removePop()}),n},soOverTip:function(t){var n=e(this),r=e.extend({cls:"so-overTip",showMask:!1,posType:"doc",offset:[10,10],showTitle:!1,onlyOne:!0},t||{}),i=null;return n.mouseenter(function(t){r.pos=[t.pageX,t.pageY],i=e.sobox.pop(r)}).mouseleave(function(){i.removePop()}),n},clickPop:function(t){var t=e.extend({optAll:null},t||{}),n=e(this);n.click(function(){var n=e(this).attr("rel"),r=this,s=e(this).attr("popType")||"target";if(n){var u=t.optAll,a=n.split("."),f=a.length;for(i=0;i<f;i++)u=u[a[i]];var l=n.replace(".","_");optT=e.extend({title:e(this).text(),type:s,target:e("#"+l),iframe:e(this).attr("href")},u),optT.beforePop=function(e,t,n,i){u.beforePop&&u.beforePop.call(r,e,t,n,i)},t.optAll.$pop=e.sobox.pop(optT)}})}})}(jQuery,document),define("sobox",["jquery"],function(){}),define("controls/Dialog",["jquery","underscore","sobox"],function(e,t,n){var r=function(t){e("body").hasClass("disableEvents")&&(t.preventDefault(),t.stopPropagation())},i=document.getElementsByTagName("body")[0];return window.addEventListener&&(i.removeEventListener("click",r),i.addEventListener("click",r,!0)),{pop:function(n){return n=t.extend({},{width:"auto",btn:[{text:n.okText||"确定",removePop:n.okRemovePop==undefined?!0:n.okRemovePop,callback:n.ok},{text:n.cancelText||"取消",cls:"a-sopop-cancel",removePop:!0,callback:n.cancel}]},n),e.sobox.pop(n)},alert:function(){var t,n,r=function(){};if(arguments.length)switch(arguments.length){case 1:t="提示",n=arguments[0];break;case 2:t=arguments[0],n=arguments[1];break;case 3:t=arguments[0],n=arguments[1],r=arguments[2];break;default:}return e.sobox.alert(t,'<div style="padding:10px 0">'+n+"</div>",r)},confirm:function(t,n,r,i){var s=['<table width="100%" class="mt_20 mb_20 tipsTable">',"<tbody>","<tr>",'<td align="right" width="60"><i class="i-tips_qa"></i></td>','<td><em class="tipsTxt">',n,"</em></td>","</tr>","</tbody>","</table>"].join("");return e.sobox.pop({title:t,content:s,btn:[{text:"确定",callback:function(){r&&r()}},{text:"取消",cls:"a-sopop-cancel",callback:function(){i&&i()}}]})},tips:function(t,n){return e.sobox.tip({cls:"so-popTip",posType:"ct",content:t,width:"auto",height:38,offset:[0,-75],stayTime:n*1e3||4e3})},warn:function(t,n,r){var i=['<table width="100%" class="mt_20 mb_20 tipsTable">',"<tbody>","<tr>",'<td align="right" width="60"><i class="i-tips"></i></td>','<td><em class="tipsTxt">',t,"</em></td>","</tr>","</tbody>","</table>"].join("");return e.sobox.alert(n||"提示",i,r)},loading:function(t){return e.sobox.loading({cls:"so-loading",stayTime:t*1e3||0,width:100,height:100})}}}),typeof JSON!="object"&&(JSON={}),function(){"use strict";function f(e){return e<10?"0"+e:e}function this_value(){return this.valueOf()}function quote(e){return rx_escapable.lastIndex=0,rx_escapable.test(e)?'"'+e.replace(rx_escapable,function(e){var t=meta[e];return typeof t=="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,s,o=gap,u,a=t[e];a&&typeof a=="object"&&typeof a.toJSON=="function"&&(a=a.toJSON(e)),typeof rep=="function"&&(a=rep.call(t,e,a));switch(typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";gap+=indent,u=[];if(Object.prototype.toString.apply(a)==="[object Array]"){s=a.length;for(n=0;n<s;n+=1)u[n]=str(n,a)||"null";return i=u.length===0?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+o+"]":"["+u.join(",")+"]",gap=o,i}if(rep&&typeof rep=="object"){s=rep.length;for(n=0;n<s;n+=1)typeof rep[n]=="string"&&(r=rep[n],i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i))}else for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i));return i=u.length===0?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+o+"}":"{"+u.join(",")+"}",gap=o,i}}var rx_one=/^[\],:{}\s]*$/,rx_two=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rx_three=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rx_four=/(?:^|:|,)(?:\s*\[)+/g,rx_escapable=/[\\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,rx_dangerous=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=this_value,Number.prototype.toJSON=this_value,String.prototype.toJSON=this_value);var gap,indent,meta,rep;typeof JSON.stringify!="function"&&(meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(e,t,n){var r;gap="",indent="";if(typeof n=="number")for(r=0;r<n;r+=1)indent+=" ";else typeof n=="string"&&(indent=n);rep=t;if(!t||typeof t=="function"||typeof t=="object"&&typeof t.length=="number")return str("",{"":e});throw new Error("JSON.stringify")}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&typeof i=="object")for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r=walk(i,n),r!==undefined?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;text=String(text),rx_dangerous.lastIndex=0,rx_dangerous.test(text)&&(text=text.replace(rx_dangerous,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}));if(rx_one.test(text.replace(rx_two,"@").replace(rx_three,"]").replace(rx_four,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),define("json2",function(){}),define("controls/Ajax",["jquery","underscore","controls/Dialog","json2","i18n/"+global.language],function(e,t,n,r,i){var s={requestId:0,loadingObj:{},defaultOpts:{type:"POST",data:{},dataType:"json",success:function(){},error:function(){s.loadingObj.close&&s.loadingObj.close(),n.tips("Error Request !")},contentType:"text/plain; charset=UTF-8"},request:function(r,s,o,u){this.requestId++;var a=this;if(!r.url)return;this.url=r.url,o||(a.loadingObj.close&&a.loadingObj.close(),a.loadingObj=n.loading()),r.data&&r.data.parse&&delete r.data.parse,r.data&&r.data.success&&delete r.data.success,r.data&&r.data.error&&delete r.data.error,r.fail=r.fail||function(e){n.tips("Error:"+e.code)},e.ajax(t.extend({},this.defaultOpts,r,{data:JSON.stringify(r.data),success:function(e){o||a.loadingObj.close();if(!e)return;s?r.success(e):e&&e.code&&e.code=="S_OK"&&e.hasOwnProperty("var")?r.success(e["var"]):r.fail(e)},error:function(e){o||a.loadingObj.close();if(!u&&e.status==0){n.alert(i.common.sysTips,i.common.loginTimeout,function(){location.href=global.logoutUrl});return}r.fail(e)}}))}};return s}),function($){function init(param,obj){function getParam(){var e="page="+opts.currPage;return opts.ajax.param&&(e+="&"+opts.ajax.param),e}function getPanelTipInfo(){var e="";if(opts.panel.tipInfo_on){var t=document.createElement("span");t=$(t);var n=t.text(opts.panel.tipInfo).text();if(-1!=n.indexOf("{input}")){var r="<input type='text' value='"+opts.currPage+"' >";n=n.replace("{input}",r),n=n.replace("{sumPage}",opts.pageCount),t.html(n),r=t.children(":text:first"),r.css(opts.panel.tipInfo_css),e=t.html()}else if(-1!=n.indexOf("{select}")){for(var i=document.createElement("select"),s=1;parseInt(opts.pageCount)>=s;s++){var o=new Option(s,s);i.options.add(o)}t.html("");var u=n.substr(0,n.indexOf("{select}")),a=n.substr(n.indexOf("{select}")+"{select}".length).replace("{sumPage}",opts.pageCount);t.append(u),t.append(i),t.append(a),e=t.html()}}return e}function onRequest(){debug(opts.id),debug("ajax请求参数列表:"),debug(getParam()),opts.ajax.on?(opts.ajax.ajaxStart(),$.ajax({url:opts.ajax.url,type:opts.ajax.type,data:getParam(),contentType:"application/x-www-form-urlencoded;utf-8",async:!0,cache:!1,timeout:6e4,error:function(){alert("访问服务器超时，请重试，谢谢！")},success:function(e){opts.ajax.ajaxStop(),responseHandle(e),createPageBar()}})):createPageBar()}function responseHandle(data){var pageCountId=opts.ajax.pageCountId,resultPageCount=1;switch(opts.ajax.dataType){case"json":try{data=eval("("+data+")")}catch(err){}finally{resultPageCount=eval("data."+pageCountId)}break;case"xml":try{resultPageCount=$(data).find(pageCountId).text()}catch(e){debug("xml返回数据解析错误，使用默认的pageCount=1"),resultPageCount=1}break;default:try{resultPageCount=$(data).find(":hidden[id='"+pageCountId+"']").val()}catch(e){debug("html返回数据解析错误，使用默认的pageCount=1"),resultPageCount=1}}debug(opts.id),debug("返回总页数:"+resultPageCount),opts.pageCount=resultPageCount,opts.ajax.callback(data)}function createPageBar(){var e=opts.panel.links;opts.currPage=opts.currPage>opts.pageCount?opts.pageCount:opts.currPage;var t=opts.currPage,n=parseInt(opts.pageCount),r=parseInt(opts.pageNumber/2),i=opts.pageNumber,s="";opts.panel.first_on&&(s="<a class='"+(1==t?"disabled":"")+"' href='"+e+"' paged='1'>"+opts.panel.first+"</a>"),opts.panel.prev_on&&(s+=1==t?'<span class="disabled" paged="'+opts.panel.prev+'">'+opts.panel.prev+" </span>":"<a href='"+e+"' paged='"+(t-1)+"'>"+opts.panel.prev+" </a>");var o=lastPage=1;for(o=t-r>0?o=t-r:1,o+i>n?(lastPage=n+1,o=lastPage-i):lastPage=o+i,0>=o&&(o=1),o;lastPage>o;o++)s+=o==t?'<span class="current" paged="'+o+'">'+o+"</span>":"<a href='"+e+"' paged='"+o+"'>"+o+"</a>";opts.panel.next_on&&(s+=t==n?'<span class="disabled" paged="'+opts.panel.next+'">'+opts.panel.next+" </span>":"<a href='"+e+"' paged='"+(t+1)+"'>"+opts.panel.next+" </a>"),opts.panel.last_on&&(s+="<a class='"+(n==t?"disabled":"")+"' href='"+e+"' paged='"+n+"'>"+opts.panel.last+"</a>"),s+=getPanelTipInfo(),debug(opts.id),debug("最终生成菜单："),debug(s),obj.html(s),obj.children("select").val(opts.currPage),obj.children("select").change(function(){var e=parseInt($(this).children("option:selected").val());opts.currPage=e,onRequest()}),obj.children(":text").keyup(function(){var e=$(this),t=$.trim($(this).val());if(0!=t.length){var n=/^\+?[0-9][0-9]*$/;n.exec(t)||e.val(1)}}),obj.children(":text").keypress(function(e){var t=e.which;if(13==t){var n=$.trim($(this).val());obj.children("a").unbind("click"),obj.children("a").each(function(){$(this).click(function(){return!1})}),opts.currPage=n,onRequest()}}),obj.children("a").each(function(){var e=$(this);e.click(function(){if(e.hasClass("disabled"))return;var t=parseInt(e.attr("paged"));return t=t>0?t:1,e.children("a").unbind("click"),e.children("a").each(function(){$(this).click(function(){return!1})}),opts.currPage=t,opts.ajax.onClick(t),onRequest(),$(this).focus(),!1})})}function debug(e){opts.debug&&$.fn.debug(e)}var defaults={currPage:1,pageCount:10,pageNumber:5,cssStyle:"badoo",debug:!1,ajax:{on:!1,type:"POST",pageCountId:"pageCount",url:"jsonTest.php",dataType:"json",param:!1,onClick:function(){return!1},ajaxStart:function(){return!1},ajaxStop:function(){return!1},callback:function(){return!1}},panel:{first:"首页",last:"尾页",next:"下一页",prev:"上一页",first_on:!0,last_on:!0,next_on:!0,prev_on:!0,links:"javascript:;",tipInfo_on:!1,tipInfo:"<span>&nbsp;&nbsp;跳{currText}/{sumPage}页</span>",tipInfo_css:{width:"22px"},tipSelect_on:!1,tipSelect:"跳转到{select} 共{sumPage}页"}},opts=$.extend(!0,defaults,param);opts.id=obj.attr("id"),obj.addClass(opts.cssStyle),onRequest();var method={};return method.id=opts.id,method.getPage=function(){return opts.currPage},method.onReload=function(){debug("reload()"),onRequest()},method.onLoad=function(e){e&&e instanceof Object&&(debug(e),opts.currPage=1,opts.ajax.param=e.param,onRequest())},method.jumpPage=function(e){debug("jumpPage("+e+")"),e=1>e?1:e,e=e>opts.pageCount?opts.pageCount:e,opts.currPage=e,onRequest()},method}$.fn.myPagination=function(e){return init(e,$(this))},$.fn.debug=function(e){window.console&&window.console.log&&console.log(e)}}(jQuery),define("myPagination",["jquery"],function(){}),define("controls/Pager",["jquery","myPagination"],function(e,t){var n=function(e){this.option=e,this.el=e.el,this.pageNo=e.pageNo,this.pageSize=e.pageSize,this.total=e.total,this.onclick=e.onclick,this.cssStyle="manu",this.init()};return n.prototype={getPageCount:function(){return Math.ceil(this.total/this.pageSize)},init:function(){var t=this;e(this.el).myPagination({currPage:t.pageNo,pageCount:t.getPageCount(),pageNumber:10,cssStyle:t.cssStyle,ajax:{on:!1,onClick:t.onclick}})}},n}),define("text",["module"],function(e){"use strict";var t,n,r,i,s,o=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],u=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,a=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,f=typeof location!="undefined"&&location.href,l=f&&location.protocol&&location.protocol.replace(/\:/,""),c=f&&location.hostname,h=f&&(location.port||undefined),p={},d=e.config&&e.config()||{};t={version:"2.0.14",strip:function(e){if(e){e=e.replace(u,"");var t=e.match(a);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:d.createXhr||function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(t=0;t<3;t+=1){n=o[t];try{e=new ActiveXObject(n)}catch(r){}if(e){o=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,s=e.lastIndexOf("."),o=e.indexOf("./")===0||e.indexOf("../")===0;return s!==-1&&(!o||s>1)?(t=e.substring(0,s),n=e.substring(s+1)):t=e,r=n||t,s=r.indexOf("!"),s!==-1&&(i=r.substring(s+1)==="strip",r=r.substring(0,s),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var s,o,u,a=t.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===n)&&(!o||o.toLowerCase()===r.toLowerCase())&&(!u&&!o||u===i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,d.isBuild&&(p[e]=r),i(r)},load:function(e,n,r,i){if(i&&i.isBuild&&!i.inlineText){r();return}d.isBuild=i&&i.isBuild;var s=t.parseName(e),o=s.moduleName+(s.ext?"."+s.ext:""),u=n.toUrl(o),a=d.useXhr||t.useXhr;if(u.indexOf("empty:")===0){r();return}!f||a(u,l,c,h)?t.get(u,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([o],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,n,r,i){if(p.hasOwnProperty(n)){var s=t.jsEscape(p[n]);r.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),u=o.ext?"."+o.ext:"",a=o.moduleName+u,f=r.toUrl(o.moduleName+u)+".js";t.load(a,r,function(n){var r=function(e){return i(f,e)};r.asModule=function(e,t){return i.asModule(e,f,t)},t.write(e,a,r,s)},s)}};if(d.env==="node"||!d.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node&&!process.versions["node-webkit"]&&!process.versions["atom-shell"])n=require.nodeRequire("fs"),t.get=function(e,t,r){try{var i=n.readFileSync(e,"utf8");i[0]==="﻿"&&(i=i.substring(1)),t(i)}catch(s){r&&r(s)}};else if(d.env==="xhr"||!d.env&&t.createXhr())t.get=function(e,n,r,i){var s=t.createXhr(),o;s.open("GET",e,!0);if(i)for(o in i)i.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),i[o]);d.onXhr&&d.onXhr(s,e),s.onreadystatechange=function(t){var i,o;s.readyState===4&&(i=s.status||0,i>399&&i<600?(o=new Error(e+" HTTP status: "+i),o.xhr=s,r&&r(o)):n(s.responseText),d.onXhrComplete&&d.onXhrComplete(s,e))},s.send(null)};else if(d.env==="rhino"||!d.env&&typeof Packages!="undefined"&&typeof java!="undefined")t.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&r.charAt(0)===65279&&(r=r.substring(1)),r!==null&&n.append(r);while((r=u.readLine())!==null)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)};else if(d.env==="xpconnect"||!d.env&&typeof Components!="undefined"&&Components.classes&&Components.interfaces)r=Components.classes,i=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),s="@mozilla.org/windows-registry-key;1"in r,t.get=function(e,t){var n,o,u,a={};s&&(e=e.replace(/\//g,"\\")),u=new FileUtils.File(e);try{n=r["@mozilla.org/network/file-input-stream;1"].createInstance(i.nsIFileInputStream),n.init(u,1,0,!1),o=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(i.nsIConverterInputStream),o.init(n,"utf-8",n.available(),i.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),o.readString(n.available(),a),o.close(),n.close(),t(a.value)}catch(f){throw new Error((u&&u.path||"")+": "+f)}};return t}),define("text!modules/../../template/setting.html",[],function(){return'<!--设置总框架-->\r\n<script id="setting-tpl" type="text/x-handlebars-template">\r\n\r\n    <div class="mainTopBar clearfix">\r\n        <div class="searchBox" style="display:none">\r\n            <i class="i-search"></i><input type="text" class="seaInput" value="" placeholder="<%-Lang.setting.searchByNnD%>">\r\n        </div>\r\n\r\n        <div class="secMenu">\r\n            <ul>\r\n                <li data-id="companyManage" style="display:none">\r\n                    <a href="#company-manage" class="act"><%-Lang.setting.companyManage%></a></li>\r\n                <%if(global.user.role != \'root\'){ %>\r\n                <li data-id="normalSetting"><a href="#normal-setting"><%-Lang.setting.normalSetting%></a></li>\r\n                <li data-id="accountSecurity"><a href="#account-security"><%-Lang.setting.accountSecurity%></a></li>\r\n                <li data-id="messageSetting"><a href="#message-setting"><%-Lang.setting.messageSetting%></a></li>\r\n                <li data-id="companyDiy"><a href="#company-diy"><%-Lang.setting.companyDiy%></a></li>\r\n                <li data-id="systemConfig"><a href="#system-config"><%-Lang.setting.systemConfig%></a></li>\r\n                <%}%>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="container">\r\n\r\n        <!--企业管理-->\r\n        <div id="companyManage" class="tab-li">\r\n\r\n            <div id="listCompany" class="companyManageModule">\r\n                <div class="operaBar clearfix">\r\n                    <div class="fr">\r\n                        <a href="javascript:;" id="company-add" class="btn28 btn_blue1"><i class="i-plus mr_5"></i><em><%-Lang.setting.add%></em></a>\r\n                    </div>\r\n\r\n                    <div class="fake_slt fl">\r\n                        <select class="real-select" id="company-type" style="visibility: hidden; ">\r\n                            <option value="-1"><%-Lang.setting.allCompany%></option>\r\n                            <option value="0"><%-Lang.setting.normalCompany%></option>\r\n                            <option value="1"><%-Lang.setting.lockedCompany%></option>\r\n                            <!--                                     <option value="2">注销企业</option> -->\r\n                        </select>\r\n                    </div>\r\n\r\n                    <a href="javascript:;" id="company-btn" class="btn28 btn_white1 ml_20 fl"><em><%-Lang.setting.locked%></em></a>\r\n\r\n                </div>\r\n                <div class="clearfix" id="company-list"></div>\r\n\r\n                <div class="pager company-list-pager"></div>\r\n            </div>\r\n\r\n            <div id="addCompany" class="companyManageModule">\r\n                <div class="opera_back clearAll">\r\n                    <a href="javascript:;">&lt;<%-Lang.setting.back%></a>\r\n                </div>\r\n                <div class="detailCon" id="formCtrl">\r\n                    <form id="formCtrlCon"></form>\r\n                    <ul>\r\n                        <li>\r\n                            <div class="subTitle">&nbsp;</div>\r\n                            <div class="subCon">\r\n                                <a href="javascript:;" id="add-ok" class="btn28 bg_blue"><em><%-Lang.common.ok%></em></a>\r\n                            </div>\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n\r\n            <div id="editCompany" class="companyManageModule">\r\n\r\n\r\n                <div class="opera_back clearAll">\r\n                    <a href="javascript:;">&lt;<%-Lang.setting.back%></a>\r\n                </div>\r\n\r\n                <div class="detailCon">\r\n                    <h3 class="detTit"><%-Lang.setting.companyInfo%></h3>\r\n                    <form id="formCtrl-edit-form">\r\n                        <ul id="formCtrl-edit"></ul>\r\n                    </form>\r\n                    <h3 class="detTit mt_20"><%=Lang.setting.account%></h3>\r\n                    <ul style="margin-bottom:10px">\r\n                        <li>\r\n                            <div class="subTitle"><em class="col_red">*</em> <%=Lang.setting.account%>：</div>\r\n                            <div class="subCon" id="adminId"></div>\r\n                        </li>\r\n                        <li>\r\n                            <div class="subTitle"><em class="col_red">*</em> <%=Lang.setting.password%>：</div>\r\n                            <div class="subCon">\r\n                                <a href="javascript:;" id="resetPwd" class="btn28 btn_white1"><%=Lang.setting.resetPwd%></a>\r\n                            </div>\r\n                        </li>\r\n                    </ul>\r\n                    <ul>\r\n                        <li>\r\n                            <div class="subTitle">&nbsp;</div>\r\n                            <div class="subCon">\r\n                                <a id="edit-ok" href="javascript:;" class="btn28 bg_blue"><em><%-Lang.common.ok%></em></a><a id="edit-cancel" href="javascript:;" class="btn28 btn_blue1 ml_10"><em><%-Lang.common.cancel%></em></a>\r\n                            </div>\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n\r\n            <div id="showCompany" class="companyManageModule">\r\n\r\n                <div class="opera_back clearAll">\r\n                    <a href="javascript:;">&lt;<%-Lang.setting.back%></a>\r\n                </div>\r\n                <div class="detailCon">\r\n                    <h3 class="detTit"><%-Lang.setting.companyInfo%></h3>\r\n                    <ul id="detail-con"></ul>\r\n                </div>\r\n\r\n            </div>\r\n\r\n        </div>\r\n        <!--企业管理-->\r\n\r\n\r\n        <!--账户安全-->\r\n        <div style="display: none" id="accountSecurity" class="detailCon tab-li">\r\n            <h3 class="detTit mt_20"><%-Lang.setting.pwdLv%></h3>\r\n            <ul>\r\n                <li>\r\n                    <div class="subCon"><%-Lang.setting.minPwd%> <select class="account-select" id="min-length">\r\n                        <option value="6">6</option>\r\n                        <option value="8">8</option>\r\n                        <option value="10">10</option>\r\n                        <option value="12">12</option>\r\n                    </select>\r\n                    </div>\r\n                </li>\r\n                <li>\r\n                    <div class="subCon">\r\n                        <input type="checkbox" class="mr_10" id="account-checkbox-1">\r\n                        <em><label for="account-checkbox-1"><%-Lang.setting.pwdRule1%></label></em>\r\n                    </div>\r\n                </li>\r\n                <li>\r\n                    <div class="subCon">\r\n                        <input type="checkbox" class="mr_10" id="account-checkbox-2">\r\n                        <em><label for="account-checkbox-2"><%-Lang.setting.pwdRule2%></label></em>\r\n                    </div>\r\n                </li>\r\n                <li>\r\n                    <div class="subCon">\r\n                        <input type="checkbox" class="mr_10" id="account-checkbox-3">\r\n                        <em><label for="account-checkbox-3"><%-Lang.setting.pwdRule3%></label></em>\r\n                    </div>\r\n                </li>\r\n            </ul>\r\n\r\n            <h3 class="detTit mt_20"><%-Lang.setting.pwdTime%></h3>\r\n            <ul>\r\n                <li>\r\n                    <div class="subCon">\r\n\r\n                        <select class="account-select" id="password-duration">\r\n                            <option value="-1"><%-Lang.setting.never%></option>\r\n                            <option value="1"><%-Lang.setting.month1%></option>\r\n                            <option value="2"><%-Lang.setting.month2%></option>\r\n                            <option value="3"><%-Lang.setting.month3%></option>\r\n                            <option value="6"><%-Lang.setting.month6%></option>\r\n                            <option value="12"><%-Lang.setting.month12%></option>\r\n                        </select>\r\n\r\n                    </div>\r\n                </li>\r\n                <li>\r\n                    <div class="subCon">\r\n                        <a id="account-ok" href="javascript:;" class="btn28 bg_blue"><em><%-Lang.common.ok%></em></a>\r\n                    </div>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n        <!--账户安全-->\r\n\r\n        <!--常规设置-->\r\n        <div id="normalSetting" style="display:none" class="tab-li">\r\n            <div class="detailCon">\r\n                <form id="nsForm">\r\n                    <ul id="ns-ul"></ul>\r\n                    <ul>\r\n                        <li>\r\n                            <div class="subTitle">&nbsp;</div>\r\n                            <div class="subCon">\r\n                                <a id="s-btn-ok" href="javascript:;" class="btn28 bg_blue"><em><%-Lang.common.ok%></em></a>\r\n                                <!--<a id="s-btn-cancel" href="javascript:;" class="btn28 btn_blue1 ml_10"><em>取消</em></a>-->\r\n                            </div>\r\n                        </li>\r\n                    </ul>\r\n\r\n                </form>\r\n            </div>\r\n        </div>\r\n        <!--常规设置-->\r\n\r\n        <!--消息设置-->\r\n        <div id="messageSetting" style="display:none" class="tab-li">\r\n            <div class="SetInfo">\r\n                <div class="setInfoContainer">\r\n                    <div class="setInfoTitle">\r\n                        <table width="100%" class="setInfoTable">\r\n                            <thead>\r\n                            <tr>\r\n                                <th scope="col" width="56" align="center">\r\n                                    <a href="javascript:;"><i class="btn-arrow i-bdown"></i></a></th>\r\n                                <th scope="col" align="left" width="30%">文件操作类</th>\r\n                                <th scope="col">消息盒子</th>\r\n                                <th scope="col"><span class="type1">APP推送</span></th>\r\n                            </tr>\r\n                            </thead>\r\n                        </table>\r\n                    </div>\r\n                    <div class="setInfoBody" style="display:block">\r\n                        <table width="100%" class="setInfoTable">\r\n                            <tbody>\r\n                            <tr data-type="upload_file">\r\n                                <td width="56">&nbsp;</td>\r\n                                <td width="30%">上传文件</td>\r\n                                <td align="center"><input class="checkbox0" data-client="0" type="checkbox"></td>\r\n                                <td align="center"><input class="checkbox1" data-client="1" type="checkbox"></td>\r\n                            </tr>\r\n                            <tr data-type="update_file">\r\n                                <td>&nbsp;</td>\r\n                                <td>更新文件</td>\r\n                                <td align="center"><input class="checkbox0" data-client="0" type="checkbox"></td>\r\n                                <td align="center"><input class="checkbox1" data-client="1" type="checkbox"></td>\r\n                            </tr>\r\n                            <tr data-type="create_move_copy_file">\r\n                                <td>&nbsp;</td>\r\n                                <td>移动文件</td>\r\n                                <td align="center"><input class="checkbox0" data-client="0" type="checkbox"></td>\r\n                                <td align="center"><input class="checkbox1" data-client="1" type="checkbox"></td>\r\n                            </tr>\r\n                            <tr data-type="delete_file">\r\n                                <td>&nbsp;</td>\r\n                                <td>删除文件</td>\r\n                                <td align="center"><input class="checkbox0" data-client="0" type="checkbox"></td>\r\n                                <td align="center"><input class="checkbox1" data-client="1" type="checkbox"></td>\r\n                            </tr>\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                </div>\r\n                <div class="setInfoContainer">\r\n                    <div class="setInfoTitle">\r\n                        <table width="100%" class="setInfoTable">\r\n                            <thead>\r\n                            <tr>\r\n                                <th scope="col" width="56" align="center">\r\n                                    <a href="javascript:;"><i class="btn-arrow i-arrDown2"></i></a></th>\r\n                                <th scope="col" align="left" width="30%">团队协作类</th>\r\n                                <th scope="col">消息盒子</th>\r\n                                <th scope="col"><span class="type1">APP推送</span></th>\r\n                            </tr>\r\n                            </thead>\r\n                        </table>\r\n                    </div>\r\n                    <div class="setInfoBody">\r\n                        <table width="100%" class="setInfoTable">\r\n                            <tbody>\r\n                            <tr data-type="add_member">\r\n                                <td width="56">&nbsp;</td>\r\n                                <td width="30%">加入成员</td>\r\n                                <td align="center"><input class="checkbox0" data-client="0" type="checkbox"></td>\r\n                                <td align="center"><input class="checkbox1" data-client="1" type="checkbox"></td>\r\n                            </tr>\r\n                            <tr data-type="delete_member">\r\n                                <td>&nbsp;</td>\r\n                                <td>剔除成员</td>\r\n                                <td align="center"><input class="checkbox0" data-client="0" type="checkbox"></td>\r\n                                <td align="center"><input class="checkbox1" data-client="1" type="checkbox"></td>\r\n                            </tr>\r\n                            <tr data-type="delete_team">\r\n                                <td>&nbsp;</td>\r\n                                <td>删除团队</td>\r\n                                <td align="center"><input class="checkbox0" data-client="0" type="checkbox"></td>\r\n                                <td align="center"><input class="checkbox1" data-client="1" type="checkbox"></td>\r\n                            </tr>\r\n                            <tr data-type="add_comment">\r\n                                <td>&nbsp;</td>\r\n                                <td>发表评论</td>\r\n                                <td align="center"><input class="checkbox0" data-client="0" type="checkbox"></td>\r\n                                <td align="center"><input class="checkbox1" data-client="1" type="checkbox"></td>\r\n                            </tr>\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                </div>\r\n                <div class="setInfoContainer">\r\n                    <div class="setInfoTitle">\r\n                        <table width="100%" class="setInfoTable">\r\n                            <thead>\r\n                            <tr>\r\n                                <th scope="col" width="56" align="center">\r\n                                    <a href="javascript:;"><i class="btn-arrow i-arrDown2"></i></a></th>\r\n                                <th scope="col" align="left" width="30%">企业文库类</th>\r\n                                <th scope="col">消息盒子</th>\r\n                                <th scope="col"><span class="type1">APP推送</span></th>\r\n                            </tr>\r\n                            </thead>\r\n                        </table>\r\n                    </div>\r\n\r\n                    <div class="setInfoBody">\r\n                        <table width="100%" class="setInfoTable">\r\n                            <tbody>\r\n                            <tr data-type="grant_change">\r\n                                <td width="56">&nbsp;</td>\r\n                                <td width="30%">权限变更</td>\r\n                                <td align="center"><input class="checkbox0" data-client="0" type="checkbox"></td>\r\n                                <td align="center"><input class="checkbox1" data-client="1" type="checkbox"></td>\r\n                            </tr>\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!--消息设置-->\r\n\r\n\r\n        <!--企业定制-->\r\n        <div id="companyDiy" style="display:none" class="tab-li">\r\n\r\n\r\n            <div class="EnCustom">\r\n                <div class="EnCustomBox">\r\n                    <div class="EnCustomBoxLt">\r\n                        <h3 class="detTit">企业信息</h3>\r\n                        <div class="EnCustomBoxTxt">\r\n                            <p>功能说明：企业可自定义首页登录页面与企业LOGO，体现企业整体形象。</p>\r\n                            <p class="mt_25">&nbsp;</p>\r\n                            <p class="mt_25">登录页背景图：企业可联系彩讯科技对登录页背景进行定制。</p>\r\n                        </div>\r\n                    </div>\r\n                    <div class="EnCustomBoxRt" style="top:50px;">\r\n                        <img src="resource/images/img3.jpg" width="354" height="175" alt="">\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="EnCustomBox mt_25">\r\n                    <div class="EnCustomBoxLt">\r\n\r\n                        <div class="EnCustomBoxTxt">\r\n                            <ul class="setLogoUL">\r\n                                <li>\r\n                                    <span class="setLogoSp">企业LOGO</span>\r\n                                    <div class="setLogoULRp">\r\n                                        <p>\r\n                                            <span class="uploadbar"><input readonly type="text" value="" class="inputAdd filePath"><a href="javascript:;" class="uploadBtn">浏览</a></span>\r\n                                        </p>\r\n                                        <p class="mt_10"><span class="col_grey">* 最佳尺寸：170*60像素，大小请小于1M</span></p>\r\n                                        <p class="mt_10">\r\n                                            <a class="btn28 bg_blue btn-upload" href="javascript:;"><em>提交</em></a>\r\n                                        </p>\r\n                                    </div>\r\n                                </li>\r\n                            </ul>\r\n                        </div>\r\n                    </div>\r\n                    <div class="EnCustomBoxRt" style="top:15px;">\r\n                        <img src="resource/images/img4.jpg" width="354" height="203" alt="">\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n\r\n\r\n        </div>\r\n        <!--企业定制-->\r\n\r\n\r\n        <div id="systemConfig" style="display:none" class="tab-li"></div>\r\n\r\n    </div>\r\n\r\n</script><!--设置总框架-->\r\n\r\n\r\n<!--常规设置-->\r\n<script type="text/x-handlebars-template" id="normalSetting2">\r\n    <li>\r\n        <div class="subTitle"><em class="col_red">*</em> <%-Lang.setting.diskMaxFileUpLoad2%></div>\r\n        <div class="subCon">\r\n            <input name="diskMaxFileUpLoad" id="diskMaxFileUpLoad" type="text" class="inputAdd" placeholder="<%-Lang.setting.diskMaxFileUpLoad%>" value="<%-diskMaxFileUpLoad%>">\r\n        </div>\r\n    </li>\r\n\r\n    <li>\r\n        <div class="subTitle"><em class="col_red">*</em> <%-Lang.setting.diskMaxUserCapacity2%></div>\r\n        <div class="subCon">\r\n            <input name="diskMaxUserCapacity" id="diskMaxUserCapacity" type="text" class="inputAdd" placeholder="<%-Lang.setting.diskMaxUserCapacity%>" value="<%-diskMaxUserCapacity%>">\r\n        </div>\r\n    </li>\r\n    <li>\r\n        <div class="subTitle"><em class="col_red">*</em> <%-Lang.setting.maxUserTeamCapacity2%>\r\n        </div>\r\n        <div class="subCon">\r\n            <input name="maxUserTeamCapacity" id="maxUserTeamCapacity" type="text" class="inputAdd" placeholder="<%-Lang.setting.maxUserTeamCapacity%>" value="<%-maxUserTeamCapacity%>">\r\n        </div>\r\n    </li>\r\n\r\n    <li>\r\n        <div class="subTitle"><em class="col_red">*</em> <%-Lang.setting.defaultUserCapacity2%></div>\r\n        <div class="subCon">\r\n            <input name="defaultUserCapacity" id="defaultUserCapacity" type="text" class="inputAdd" placeholder="<%-Lang.setting.defaultUserCapacity%>" value="<%-defaultUserCapacity%>">\r\n        </div>\r\n    </li>\r\n    <li>\r\n        <div class="subTitle"><em class="col_red">*</em> <%-Lang.setting.defaultTeamCapacity2%>\r\n        </div>\r\n        <div class="subCon">\r\n            <input name="defaultTeamCapacity" id="defaultTeamCapacity" type="text" class="inputAdd" placeholder="<%-Lang.setting.defaultTeamCapacity%>" value="<%-defaultTeamCapacity%>">\r\n        </div>\r\n    </li>\r\n\r\n\r\n    <li>\r\n        <div class="subTitle"><em class="col_red">*</em> <%-Lang.setting.maxUserTeamNum2%></div>\r\n        <div class="subCon">\r\n            <input name="maxUserTeamNum" id="maxUserTeamNum" type="text" class="inputAdd" placeholder="<%-Lang.setting.maxUserTeamNum%>" value="<%-maxUserTeamNum%>">\r\n        </div>\r\n    </li>\r\n    <li>\r\n        <div class="subTitle"><em class="col_red">*</em> <%-Lang.setting.maxUserTeamMember2%></div>\r\n        <div class="subCon">\r\n            <input name="maxUserTeamMember" id="maxUserTeamMember" type="text" class="inputAdd" placeholder="<%-Lang.setting.maxUserTeamMember%>" value="<%-maxUserTeamMember%>">\r\n        </div>\r\n    </li>\r\n    <li>\r\n        <div class="subTitle"><em class="col_red">*</em> <%-Lang.setting.diskMaxFileDownNum2%></div>\r\n        <div class="subCon">\r\n            <input name="diskMaxFileDownNum" id="diskMaxFileDownNum" type="text" class="inputAdd" placeholder="<%-Lang.setting.diskMaxFileDownNum%>" value="<%-diskMaxFileDownNum%>">\r\n        </div>\r\n    </li>\r\n    <li>\r\n        <div class="subTitle"><em class="col_red">*</em> <%-Lang.setting.diskMaxFileDownTime2%></div>\r\n        <div class="subCon">\r\n            <input name="diskMaxFileDownTime" id="diskMaxFileDownTime" type="text" class="inputAdd" placeholder="<%-Lang.setting.diskMaxFileDownTime%>" value="<%-diskMaxFileDownTime%>">\r\n        </div>\r\n    </li>\r\n    <li>\r\n        <div class="subTitle"><em class="col_red">*</em> <%-Lang.setting.diskVersionsNum2%></div>\r\n        <div class="subCon">\r\n            <input name="diskVersionsNum" id="diskVersionsNum" type="text" class="inputAdd" placeholder="<%-Lang.setting.diskVersionsNum%>" value="<%-diskVersionsNum%>">\r\n        </div>\r\n    </li>\r\n    <li>\r\n        <div class="subTitle"><em class="col_red">*</em> <%-Lang.setting.diskVersionsTime2%></div>\r\n        <div class="subCon">\r\n            <input name="diskVersionsTime" id="diskVersionsTime" type="text" class="inputAdd" placeholder="<%-Lang.setting.diskVersionsTime%>" value="<%-diskVersionsTime%>">\r\n        </div>\r\n    </li>\r\n</script><!--常规设置-->\r\n\r\n\r\n<!--添加企业-->\r\n<script id="formCtrlCon-tpl" type="text/template">\r\n    <h3 class="detTit"><%=Lang.setting.companyInfo%></h3>\r\n    <ul>\r\n        <li>\r\n            <div class="subTitle"><em class="col_red">*</em> <%=Lang.setting.companyName%>：</div>\r\n            <div class="subCon">\r\n                <input name="company-name" id="company-name" type="text" class="inputAdd" placeholder="<%=Lang.setting.typeName%>" value="">\r\n            </div>\r\n        </li>\r\n        <li>\r\n            <div class="subTitle"><em class="col_red">*</em> <%=Lang.setting.domain%>：</div>\r\n            <div class="subCon">\r\n                <input name="company-domain" id="company-domain" type="text" class="inputAdd" placeholder="<%=Lang.setting.typeDomain%>" value="">\r\n            </div>\r\n        </li>\r\n        <li>\r\n            <div class="subTitle"><em class="col_red">*</em> <%=Lang.setting.timeout%>：</div>\r\n            <div class="subCon">\r\n                <div class="fake_slt">\r\n\r\n                    <select class="real-select" id="timeout" style="visibility: hidden; ">\r\n                        <option value="3">3<%= Lang.setting.month %></option>\r\n                        <option value="6">6<%= Lang.setting.month %></option>\r\n                        <option value="12">1<%= Lang.setting.year %></option>\r\n                        <option value="-1"><%= Lang.setting.forever %></option>\r\n                        <option value="0"><%- Lang.setting.custom %></option>\r\n                    </select>\r\n\r\n                </div>\r\n            </div>\r\n        </li>\r\n\r\n        <li class="customTime" style="display:none">\r\n            <div class="subTitle"><em class="col_red">*</em> <%- Lang.setting.customTime2 %></div>\r\n            <div class="subCon">\r\n                <input style="width:170px" id="timeout2" name="timeout2" type="text" placeholder="<%- Lang.setting.customTime %>" class="inputAdd" value=""> <%- Lang.setting.months %>\r\n            </div>\r\n        </li>\r\n\r\n        <li>\r\n            <div class="subTitle"><em class="col_red">*</em> <%=Lang.setting.space%>：</div>\r\n            <div class="subCon">\r\n                <input name="company-space" id="company-space" type="text" class="inputAdd" placeholder="<%=Lang.setting.typeSpace%>" value="">&nbsp;&nbsp;<select class="unit-select" id="unit-select-add">\r\n                <option value="MB">MB</option>\r\n                <option value="GB">GB</option>\r\n                <option value="TB">TB</option>\r\n            </select></div>\r\n        </li>\r\n        <li>\r\n            <div class="subTitle"><em class="col_red">*</em> <%=Lang.setting.userLimit%>：</div>\r\n            <div class="subCon">\r\n                <input name="user-count" id="user-count" type="text" placeholder="<%=Lang.setting.typeUserLimit%>" class="inputAdd" value="" style="width: 170px"> <%=Lang.setting.userUnit%>\r\n            </div>\r\n        </li>\r\n        <li style="display: none">\r\n            <div class="subTitle"><em class="col_red">*</em> <%=Lang.setting.status%>：</div>\r\n            <div class="subCon">\r\n                <div class="fake_slt">\r\n                    <select class="real-select" id="company-status" style="visibility: hidden; ">\r\n                        <option value="0"><%=Lang.setting.normal%></option>\r\n                        <option value="1"><%=Lang.setting.locked%></option>\r\n                        <!--<option value="2"><%=Lang.setting.canceled%></option>-->\r\n                    </select>\r\n                </div>\r\n            </div>\r\n        </li>\r\n    </ul><h3 class="detTit mt_20"><%=Lang.setting.account%></h3>\r\n    <ul>\r\n        <li>\r\n            <div class="subTitle"><em class="col_red">*</em> <%=Lang.setting.account%>：</div>\r\n            <div class="subCon">\r\n                <input name="company-account" id="company-account" type="text" class="inputAdd" placeholder="<%=Lang.setting.typeAccount%>" value="">\r\n            </div>\r\n        </li>\r\n        <li>\r\n            <div class="subTitle"><em class="col_red">*</em> <%=Lang.setting.password%>：</div>\r\n            <div class="subCon">\r\n                <input name="company-pswd" id="company-pswd" type="password" autocomplete="off" class="inputAdd" placeholder="<%=Lang.setting.typePwd%>" value="">\r\n            </div>\r\n        </li>\r\n        <li>\r\n            <div class="subTitle"><em class="col_red">*</em> <%=Lang.setting.confirmPwd%>：</div>\r\n            <div class="subCon">\r\n                <input name="company-pswd-2" id="company-pswd-2" type="password" autocomplete="off" class="inputAdd" placeholder="<%=Lang.setting.typePwd2%>" value="">\r\n            </div>\r\n        </li>\r\n\r\n    </ul>\r\n\r\n\r\n</script><!--添加企业-->\r\n\r\n<!--编辑企业信息-->\r\n<script id="formCtrl-edit-tpl" type="text/template">\r\n\r\n    <li>\r\n        <div class="subTitle"><em class="col_red">*</em> <%=Lang.setting.companyName%>：</div>\r\n        <div class="subCon">\r\n            <input name="company-name-edit" id="company-name-edit" type="text" class="inputAdd" placeholder="<%=Lang.setting.typeName%>" value="<%=name%>" data-original="<%=name%>">\r\n        </div>\r\n    </li>\r\n    <li>\r\n        <div class="subTitle"><em class="col_red">*</em> <%=Lang.setting.domain%>：</div>\r\n        <div class="subCon">\r\n            <input name="company-domain-edit" id="company-domain-edit" type="text" placeholder="<%=Lang.setting.typeDomain%>" class="inputAdd" value="<%=domain%>" data-original="<%=domain%>">\r\n        </div>\r\n    </li>\r\n    <li>\r\n        <div class="subTitle"><em class="col_red">*</em> <%=Lang.setting.timeout%>：</div>\r\n        <div class="subCon">\r\n            <div class="fake_slt">\r\n\r\n                <select class="real-select" id="timeout-edit" style="visibility: hidden; " value="<%=outDate%>">\r\n                    <option value="3">3<%= Lang.setting.month %></option>\r\n                    <option value="6">6<%= Lang.setting.month %></option>\r\n                    <option value="12">1<%= Lang.setting.year %></option>\r\n                    <option value="-1"><%= Lang.setting.forever %></option>\r\n                    <option value="0"><%- Lang.setting.custom %></option>\r\n                </select>\r\n\r\n            </div>\r\n        </div>\r\n    </li>\r\n\r\n    <li class="customTime" style="display:none">\r\n        <div class="subTitle"><em class="col_red">*</em> <%- Lang.setting.customTime2 %></div>\r\n        <div class="subCon">\r\n            <input style="width:170px" id="timeout3" name="timeout3" type="text" placeholder="<%- Lang.setting.customTime %>" class="inputAdd" value="<%-(outDateOrg>0?outDateOrg:\'\')%>"> <%- Lang.setting.months %>\r\n        </div>\r\n    </li>\r\n\r\n\r\n    <li>\r\n        <div class="subTitle"><em class="col_red">*</em> <%=Lang.setting.space%>：</div>\r\n        <div class="subCon">\r\n            <input name="company-space-edit" id="company-space-edit" placeholder="<%=Lang.setting.typeSpace%>" type="text" class="inputAdd" value="<%=storage%>">&nbsp;&nbsp;<select class="unit-select" id="unit-select-edit">\r\n            <option value="MB">MB</option>\r\n            <option value="GB">GB</option>\r\n            <option value="TB">TB</option>\r\n        </select></div>\r\n    </li>\r\n    <li>\r\n        <div class="subTitle"><em class="col_red">*</em> <%=Lang.setting.userLimit%>：</div>\r\n        <div class="subCon">\r\n            <input name="user-count-edit" id="user-count-edit" type="text" placeholder="<%=Lang.setting.typeUserLimit%>" class="inputAdd" value="<%=userLimit%>" style="width: 170px"> <%=Lang.setting.userUnit%>\r\n        </div>\r\n    </li>\r\n    <li>\r\n        <div class="subTitle"><em class="col_red">*</em> <%=Lang.setting.status%>：</div>\r\n        <div class="subCon">\r\n            <div class="fake_slt">\r\n                <select class="real-select" id="company-status-edit" style="visibility: hidden; ">\r\n                    <option value="0"><%=Lang.setting.normal%></option>\r\n                    <option value="1"><%=Lang.setting.locked%></option>\r\n                    <!--<option value="2"><%=Lang.setting.canceled%></option>-->\r\n                </select>\r\n            </div>\r\n        </div>\r\n    </li>\r\n\r\n</script><!--编辑企业信息-->\r\n\r\n<!--显示企业信息-->\r\n<script type="text/template" id="detail-con-tpl">\r\n    <li>\r\n        <div class="subTitle"><%=Lang.setting.companyName%>：</div>\r\n        <div class="subCon"><%=name%></div>\r\n    </li>\r\n    <li>\r\n        <div class="subTitle"><%=Lang.setting.domain%>：</div>\r\n        <div class="subCon"><%=domain%></div>\r\n    </li>\r\n    <li>\r\n        <div class="subTitle"><%=Lang.setting.timeout%>：</div>\r\n        <div class="subCon"><%=outDate%></div>\r\n    </li>\r\n    <li>\r\n        <div class="subTitle"><%=Lang.setting.space%>：</div>\r\n        <div class="subCon"><%=storage%></div>\r\n    </li>\r\n    <li>\r\n        <div class="subTitle"><%=Lang.setting.userLimit%>：</div>\r\n        <div class="subCon"><%=userLimit%></div>\r\n    </li>\r\n    <li>\r\n        <div class="subTitle"><%=Lang.setting.status%>：</div>\r\n        <div class="subCon"><%=status%></div>\r\n    </li>\r\n</script><!--显示企业信息-->\r\n\r\n\r\n<script type="text/template" id="resetAdminPwd">\r\n\r\n    <div class="popUserSetR popUserSetR2">\r\n        <form id="resetAdminPwdForm">\r\n            <ul class="con-ul" style="">\r\n                <li><span class="pUSRlt"><em class="col_red">*</em>  <%= Lang.setting.newPassword %></span>\r\n                    <div class="pUSRrt">\r\n                        <input name="password" type="password" autocomplete="off" id="as-password" class="inputAdd password" placeholder="<%= Lang.setting.typePwd %>">\r\n                    </div>\r\n                </li>\r\n                <li><span class="pUSRlt"><em class="col_red">*</em>  <%= Lang.setting.confirmPwd %></span>\r\n                    <div class="pUSRrt">\r\n                        <input name="password2" type="password" autocomplete="off" class="inputAdd password2" placeholder="<%= Lang.setting.typePwd2 %>">\r\n                    </div>\r\n                </li>\r\n            </ul>\r\n        </form>\r\n    </div>\r\n\r\n</script>\r\n\r\n\r\n<script type="text/template" id="systemConfigContent">\r\n\r\n    <div class="EnCustom">\r\n        <div class="EnCustomBoxTxt">\r\n            <h3 class="detTit">系统邮箱配置</h3>\r\n            <p>功能说明：在此进行系统邮箱配置，为网盘邮件通知功能提供发件邮箱。</p><br>\r\n            <div class="detailCon detailCon-scc">\r\n                <ul>\r\n                    <li>\r\n                        <div class="subTitle">邮件发送：</div>\r\n                        <div class="subCon">\r\n                            <input type="radio" name="switch" id="s-on"><label for="s-on"> 开启</label>&nbsp;&nbsp;&nbsp;&nbsp;\r\n                            <input type="radio" name="switch" id="s-off"><label for="s-off"> 关闭</label>\r\n                        </div>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n            <div class="detailCon detailCon-scc s1">\r\n                <ul>\r\n                    <li>\r\n                        <div class="subTitle">系统邮箱帐号：</div>\r\n                        <div class="subCon">\r\n                            <span class="emailAccount"></span>&nbsp;&nbsp;&nbsp;&nbsp;<a id="change-mail" href="javascript:;" class="btn28 bg_blue"><em>更改邮箱</em></a>\r\n                        </div>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n            <div class="detailCon detailCon-scc s2">\r\n                <form id="emailForm">\r\n                <ul>\r\n                    <li>\r\n                        <div class="subTitle"><em class="col_red">*</em> 邮件服务器地址：</div>\r\n                        <div class="subCon">\r\n                            <input name="emailUrl" id="emailUrl" type="text" class="inputAdd" placeholder="请输入邮件服务器地址" value="">\r\n\r\n                        </div>\r\n                    </li>\r\n                    <li class="emailSslLi">\r\n                        <div class="subTitle">&nbsp;</div>\r\n                        <div class="subCon">\r\n                            <input type="checkbox" id="emailSsl" name="emailSsl"/><label style="vertical-align:middle" for="emailSsl"> SSL</label>\r\n                        </div>\r\n                    </li>\r\n                    <li>\r\n                        <div class="subTitle"><em class="col_red">*</em> 服务器端口：</div>\r\n                        <div class="subCon">\r\n                            <input name="emailPort" id="emailPort" type="text" class="inputAdd" placeholder="请输入服务器端口" value="25">\r\n                        </div>\r\n                    </li>\r\n                    <li>\r\n                        <div class="subTitle"><em class="col_red">*</em> 邮件发送账号：</div>\r\n                        <div class="subCon">\r\n                            <input name="emailAccount" id="emailAccount" type="text" class="inputAdd" placeholder="请输入邮件发送账号" value="">\r\n                        </div>\r\n                    </li>\r\n                    <li>\r\n                        <div class="subTitle"><em class="col_red">*</em> 邮箱密码：</div>\r\n                        <div class="subCon">\r\n                            <input name="emailPwd" id="emailPwd" type="password" class="inputAdd" placeholder="请输入邮箱密码" value="">\r\n                        </div>\r\n                    </li>\r\n                    <li>\r\n                        <div class="subTitle">&nbsp;</div>\r\n                        <div class="subCon">\r\n                            <div class="subCon">\r\n                                <a href="javascript:;" id="emailBtn" class="btn28 bg_blue"><em>提交</em></a>\r\n                            </div>\r\n                        </div>\r\n                    </li>\r\n\r\n                </ul></form>\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n\r\n    <div class="EnCustom">\r\n        <div class="EnCustomBoxTxt">\r\n            <h3 class="detTit">组织同步</h3>\r\n            <p>功能说明：支持从现已运行的组织管理服务器内同步导入企业部门、成员信息。</p><br>\r\n            <div class="detailCon detailCon-scc">\r\n                <ul>\r\n\r\n                    <li>\r\n                        <div class="subTitle">组织同步：</div>\r\n                        <div class="subCon">\r\n                            <input type="radio" name="switch1" id="s-on1"><label for="s-on1">&nbsp;开启</label>&nbsp;&nbsp;&nbsp;&nbsp;\r\n                            <input type="radio" name="switch1" id="s-off1"><label for="s-off1">&nbsp;关闭</label>\r\n                        </div>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n            <div class="detailCon detailCon-scc" id="svrBtn">\r\n                <ul>\r\n                    <li>\r\n                        <div class="subTitle">服务器地址：</div>\r\n                        <div class="subCon">\r\n                            <span id="svrDomain"></span>&nbsp;&nbsp;&nbsp;&nbsp;<a id="addSyncServer" href="javascript:;" class="btn28 bg_blue"><em>添加服务器</em></a>\r\n                            <a href="javascript:;" class="btn28 bg_blue" id="editSyncServer"><em>修改服务器</em></a>\r\n                        </div>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n            <div class="syncLogBtn"><a href="javascript:;">查看同步日志</a> </div>\r\n\r\n        </div>\r\n    </div>\r\n\r\n\r\n</script>\r\n\r\n\r\n<script type="text/template" id="syncServer">\r\n\r\n    <div class="creatAccount">\r\n\r\n        <form id="syncServerForm">\r\n        <ul>\r\n            <li>\r\n                <span class="cAsub"><em class="col_red">*</em>  服务器同步类型</span>\r\n                <div class="cACon">\r\n                    <select id="syncType" name="syncType">\r\n                        <!--<option value="1">Think Mail</option>-->\r\n                        <option value="2" selected="selected">Active Directory Server</option>\r\n                        <!--<option value="3">Open LDAP</option>-->\r\n                        <!--<option value="4">Domino Server</option>-->\r\n                    </select>\r\n                </div>\r\n            </li>\r\n\r\n            <li>\r\n                <span class="cAsub"><em class="col_red">*</em>  目标服务器域名</span>\r\n                <div class="cACon">\r\n                    <input type="text" name="syncDomain" placeholder="请输入目标服务器域名" class="inputAdd" value="<%- domain %>">\r\n                </div>\r\n            </li>\r\n            <li>\r\n                <span class="cAsub">&nbsp;</span>\r\n                <div class="cACon">\r\n                    <input type="checkbox" name="syncSSL" id="syncSSL" <%- isSsl==1 ? \'checked\' : \'\' %>  >&nbsp;<label for="syncSSL">SSL加密</label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;组名 端口 <input name="syncPort" class="inputAdd" style="width:40px" type="text" value="<%- port %>">\r\n                </div>\r\n            </li>\r\n\r\n            <li>\r\n                <span class="cAsub"><em class="col_red">*</em>  目标服务器地址</span>\r\n                <div class="cACon">\r\n                    <input type="text" name="syncURL" placeholder="请输入目标服务器地址" class="inputAdd" value="<%- addr %>">\r\n                </div>\r\n            </li>\r\n\r\n            <li>\r\n                <span class="cAsub"><em class="col_red">*</em>  同步模式</span>\r\n                <div class="cACon">\r\n                    <select id="syncMode" name="syncMode">\r\n                        <option value="1">镜像被动模式</option>\r\n                        <!--<option value="2">双向模式</option>-->\r\n                        <!--<option value="3">主机模式</option>-->\r\n                    </select>\r\n                    <br>镜像被动模式：以目标服务器组织信息为主，<br>邮件服务器读取目标服务器组织信息\r\n\r\n                </div>\r\n            </li>\r\n\r\n            <li>\r\n                <span class="cAsub"><em class="col_red">*</em>  目标管理员帐号</span>\r\n                <div class="cACon">\r\n                    <input type="text" name="syncAccount" placeholder="请输入目标管理员帐号" class="inputAdd" value="<%- user %>">\r\n                </div>\r\n            </li>\r\n\r\n            <li>\r\n                <span class="cAsub"><em class="col_red">*</em>  目标管理员密码</span>\r\n                <div class="cACon">\r\n                    <input type="password" id="syncPwd" name="syncPwd" placeholder="请输入目标管理员密码" class="inputAdd" value="<%- showPwd %>">\r\n                </div>\r\n            </li>\r\n\r\n            <li>\r\n                <span class="cAsub"><em class="col_red">*</em>  同步时间间隔</span>\r\n                <div class="cACon">\r\n                    <input type="text" name="syncDelay" placeholder="请输入同步时间间隔" class="inputAdd" value="<%- syncperiod %>"> 小时\r\n                </div>\r\n            </li>\r\n        </ul>\r\n        </form>\r\n\r\n    </div>\r\n\r\n\r\n</script>\r\n'}),!function(){if(!window.CustomEvent&&document.createEventObject)return void (window.CustomEvent=function(e,t){if(!arguments.length)throw new Error("Not enough arguments");var n={type:e,bubbles:!1,cancelable:!1,detail:null},r=document.createEventObject();for(var i in n)r[i]=n[i];for(var i in t)r[i]=t[i];return r});try{new CustomEvent("test")}catch(e){var t=function(e,t){if(!arguments.length)throw new Error("Not enough arguments");var n={bubbles:!1,cancelable:!1,detail:null};for(var r in t)n[r]=t[r];var i=document.createEvent("CustomEvent");return i.initCustomEvent(e,n.bubbles,n.cancelable,n.detail),i};t.prototype=(window.CustomEvent||window.Event).prototype,window.CustomEvent=t}}(),function(){if(!document.addEventListener&&window.Element&&window.Event){var e="__events",t="__immediateStopped";Event.prototype.NONE=Event.NONE=0,Event.prototype.CAPTURING_PHASE=Event.CAPTURING_PHASE=1,Event.prototype.AT_TARGET=Event.AT_TARGET=2,Event.prototype.BUBBLING_PHASE=Event.BUBBLING_PHASE=3,Event.prototype.preventDefault=function(){this.cancelable!==!1&&(this.returnValue=!1)},Event.prototype.stopPropagation=function(){this.cancelBubble=!0},Event.prototype.stopImmediatePropagation=function(){this[t]=this.cancelBubble=!0};for(var n=function(e,t){return e.timeStamp=+(new Date),e.target||(e.target=e.srcElement||t),e.pageX=e.clientX+document.documentElement.scrollLeft,e.pageY=e.clientY+document.documentElement.scrollTop,e.relatedTarget="mouseover"==e.type?e.fromElement:"mouseout"==e.type?e.toElement:null,e},r=function(e,t,n){for(var r=0;r<e.length;r++){var i=e[r];if(i.useCapture==n&&i.listener==t)return r}return-1},i=function(e,t,n){e.currentTarget=n,"function"==typeof t?t.call(n,e):t.handleEvent(e)},s=function(e){for(var t=[];e.parentNode;)t.unshift(e.parentNode),e=e.parentNode;return t},o=function(n,r,s){n.eventPhase=s;for(var o=0;o<r.length;o++){for(var u=r[o],a=[],f=(u[e]||{})[n.type]||[],l=0;l<f.length;l++){var c=f[l];c.useCapture&&s==Event.BUBBLING_PHASE||(c.useCapture||s!=Event.CAPTURING_PHASE)&&a.push(c.listener)}for(l=0;l<a.length;)try{for(;l<a.length;){var h=a[l++];if(i(n,h,u),n[t])return!0}}catch(p){setTimeout(function(){throw p},0)}if(n.cancelBubble)return!0}return!1},u=function(e){n(e,this);var t=s(e.target);return t.length&&o(e,t,Event.CAPTURING_PHASE)?e.returnValue:o(e,[e.target],Event.AT_TARGET)?e.returnValue:t.length&&e.bubbles!==!1&&(t.reverse(),o(e,t,Event.BUBBLING_PHASE))?e.returnValue:(e.stopPropagation(),e.returnValue)},a={addEventListener:function(t,n,i){var s=this,o=(this[e]||{})[t]||[],a=o.length;if(!(r(o,n,i)>-1)){if(e in this)var f=this[e];else{var f={_handler:function(){u.apply(s,arguments)}};this[e]=f}t in f||(f[t]=[]),f[t].push({listener:n,useCapture:i}),a||this.attachEvent("on"+t,f._handler)}},removeEventListener:function(t,n,i){var s=(this[e]||{})[t]||[],o=r(s,n,i);-1!=o&&(s.splice(o,1),s.length||this.detachEvent("on"+t,this[e]._handler))},dispatchEvent:function(e){return e.returnValue=!0,u.call(this,e)}},f=[Element,window.constructor,document.constructor];f.length;){var l=f.pop();for(var c in a)l.prototype[c]=a[c]}}}(),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){var n,r;if(null==this)throw new TypeError(" this is null or not defined");var i=Object(this),s=i.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(n=t),r=0;s>r;){var o;r in i&&(o=i[r],e.call(n,o,r,i)),r++}}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var n;if(null==this)throw new TypeError('"this" is null or not defined');var r=Object(this),i=r.length>>>0;if(0===i)return-1;var s=+t||0;if(Math.abs(s)===1/0&&(s=0),s>=i)return-1;for(n=Math.max(s>=0?s:i-Math.abs(s),0);i>n;){if(n in r&&r[n]===e)return n;n++}return-1}),function(e){var t;if("object"==typeof exports){try{t=require("jquery")}catch(n){}module.exports=e(window,document,t)}else window.Dropkick=e(window,document,window.jQuery)}(function(e,t,n,r){var i,s=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),o=e.parent!==e.self&&location.host===parent.location.host,u=-1!==navigator.appVersion.indexOf("MSIE"),a=function(n,r){var i,s;if(this===e)return new a(n,r);for("string"==typeof n&&"#"===n[0]&&(n=t.getElementById(n.substr(1))),i=0;i<a.uid;i++)if(s=a.cache[i],s instanceof a&&s.data.select===n)return c.extend(s.data.settings,r),s;return n?"SELECT"===n.nodeName?this.init(n,r):void 0:(console.error("You must pass a select to DropKick"),!1)},f=function(){},l={initialize:f,change:f,open:f,close:f,search:"strict",bubble:!0},c={hasClass:function(e,t){var n=new RegExp("(^|\\s+)"+t+"(\\s+|$)");return e&&n.test(e.className)},addClass:function(e,t){e&&!c.hasClass(e,t)&&(e.className+=" "+t)},removeClass:function(e,t){var n=new RegExp("(^|\\s+)"+t+"(\\s+|$)");e&&(e.className=e.className.replace(n," "))},toggleClass:function(e,t){var n=c.hasClass(e,t)?"remove":"add";c[n+"Class"](e,t)},extend:function(e){return Array.prototype.slice.call(arguments,1).forEach(function(t){if(t)for(var n in t)e[n]=t[n]}),e},offset:function(n){var r=n.getBoundingClientRect()||{top:0,left:0},i=t.documentElement,s=u?i.scrollTop:e.pageYOffset,o=u?i.scrollLeft:e.pageXOffset;return{top:r.top+s-i.clientTop,left:r.left+o-i.clientLeft}},position:function(e,t){for(var n={top:0,left:0};e&&e!==t;)n.top+=e.offsetTop,n.left+=e.offsetLeft,e=e.parentNode;return n},closest:function(e,t){for(;e;){if(e===t)return e;e=e.parentNode}return!1},create:function(e,n){var r,i=t.createElement(e);n||(n={});for(r in n)n.hasOwnProperty(r)&&("innerHTML"===r?i.innerHTML=n[r]:i.setAttribute(r,n[r]));return i},deferred:function(t){return function(){var n=arguments,r=this;e.setTimeout(function(){t.apply(r,n)},1)}}};return a.cache={},a.uid=0,a.prototype={add:function(e,n){var r,i,s;"string"==typeof e&&(r=e,e=t.createElement("option"),e.text=r),"OPTION"===e.nodeName&&(i=c.create("li",{"class":"dk-option","data-value":e.value,innerHTML:e.text,role:"option","aria-selected":"false",id:"dk"+this.data.cacheID+"-"+(e.id||e.value.replace(" ","-"))}),c.addClass(i,e.className),this.length+=1,e.disabled&&(c.addClass(i,"dk-option-disabled"),i.setAttribute("aria-disabled","true")),this.data.select.add(e,n),"number"==typeof n&&(n=this.item(n)),this.options.indexOf(n)>-1?n.parentNode.insertBefore(i,n):this.data.elem.lastChild.appendChild(i),i.addEventListener("mouseover",this),s=this.options.indexOf(n),this.options.splice(s,0,i),e.selected&&this.select(s))},item:function(e){return e=0>e?this.options.length+e:e,this.options[e]||null},remove:function(e){var t=this.item(e);t.parentNode.removeChild(t),this.options.splice(e,1),this.data.select.remove(e),this.select(this.data.select.selectedIndex),this.length-=1},init:function(e,n){var r,u=a.build(e,"dk"+a.uid);if(this.data={},this.data.select=e,this.data.elem=u.elem,this.data.settings=c.extend({},l,n),this.disabled=e.disabled,this.form=e.form,this.length=e.length,this.multiple=e.multiple,this.options=u.options.slice(0),this.selectedIndex=e.selectedIndex,this.selectedOptions=u.selected.slice(0),this.value=e.value,this.data.cacheID=a.uid,a.cache[this.data.cacheID]=this,this.data.settings.initialize.call(this),a.uid+=1,this._changeListener||(e.addEventListener("change",this),this._changeListener=!0),!s||this.data.settings.mobile){if(e.parentNode.insertBefore(this.data.elem,e),e.setAttribute("data-dkCacheId",this.data.cacheID),this.data.elem.addEventListener("click",this),this.data.elem.addEventListener("keydown",this),this.data.elem.addEventListener("keypress",this),this.form&&this.form.addEventListener("reset",this),!this.multiple)for(r=0;r<this.options.length;r++)this.options[r].addEventListener("mouseover",this);i||(t.addEventListener("click",a.onDocClick),o&&parent.document.addEventListener("click",a.onDocClick),i=!0)}return this},close:function(){var e,t=this.data.elem;if(!this.isOpen||this.multiple)return!1;for(e=0;e<this.options.length;e++)c.removeClass(this.options[e],"dk-option-highlight");t.lastChild.setAttribute("aria-expanded","false"),c.removeClass(t.lastChild,"dk-select-options-highlight"),c.removeClass(t,"dk-select-open-(up|down)"),this.isOpen=!1,this.data.settings.close.call(this)},open:c.deferred(function(){var n,r,i,s,o,a,f=this.data.elem,l=f.lastChild;return o=u?c.offset(f).top-t.documentElement.scrollTop:c.offset(f).top-e.scrollY,a=e.innerHeight-(o+f.offsetHeight),this.isOpen||this.multiple?!1:(l.style.display="block",n=l.offsetHeight,l.style.display="",r=o>n,i=a>n,s=r&&!i&&0?"-up":"-down",this.isOpen=!0,c.addClass(f,"dk-select-open"+s),l.setAttribute("aria-expanded","true"),this._scrollTo(this.options.length-1),this._scrollTo(this.selectedIndex),void this.data.settings.open.call(this))}),disable:function(e,t){var n="dk-option-disabled";(0===arguments.length||"boolean"==typeof e)&&(t=e===r?!0:!1,e=this.data.elem,n="dk-select-disabled",this.disabled=t),t===r&&(t=!0),"number"==typeof e&&(e=this.item(e)),c[t?"addClass":"removeClass"](e,n)},select:function(e,t){var n,r,i,s,o=this.data.select;if("number"==typeof e&&(e=this.item(e)),"string"==typeof e)for(n=0;n<this.length;n++)this.options[n].getAttribute("data-value")===e&&(e=this.options[n]);return!e||"string"==typeof e||!t&&c.hasClass(e,"dk-option-disabled")?!1:c.hasClass(e,"dk-option")?(r=this.options.indexOf(e),i=o.options[r],this.multiple?(c.toggleClass(e,"dk-option-selected"),i.selected=!i.selected,c.hasClass(e,"dk-option-selected")?(e.setAttribute("aria-selected","true"),this.selectedOptions.push(e)):(e.setAttribute("aria-selected","false"),r=this.selectedOptions.indexOf(e),this.selectedOptions.splice(r,1))):(s=this.data.elem.firstChild,this.selectedOptions.length&&(c.removeClass(this.selectedOptions[0],"dk-option-selected"),this.selectedOptions[0].setAttribute("aria-selected","false")),c.addClass(e,"dk-option-selected"),e.setAttribute("aria-selected","true"),s.setAttribute("aria-activedescendant",e.id),s.className="dk-selected "+i.className,s.innerHTML=i.text,this.selectedOptions[0]=e,i.selected=!0),this.selectedIndex=o.selectedIndex,this.value=o.value,t||this.data.select.dispatchEvent(new CustomEvent("change",{bubbles:this.data.settings.bubble})),e):void 0},selectOne:function(e,t){return this.reset(!0),this._scrollTo(e),this.select(e,t)},search:function(e,t){var n,r,i,s,o,u,a,f,l=this.data.select.options,c=[];if(!e)return this.options;for(t=t?t.toLowerCase():"strict",t="fuzzy"===t?2:"partial"===t?1:0,f=new RegExp((t?"":"^")+e,"i"),n=0;n<l.length;n++)if(i=l[n].text.toLowerCase(),2==t){for(r=e.toLowerCase().split(""),s=o=u=a=0;o<i.length;)i[o]===r[s]?(u+=1+u,s++):u=0,a+=u,o++;s===r.length&&c.push({e:this.options[n],s:a,i:n})}else f.test(i)&&c.push(this.options[n]);return 2===t&&(c=c.sort(function(e,t){return t.s-e.s||e.i-t.i}).reduce(function(e,t){return e[e.length]=t.e,e},[])),c},focus:function(){this.disabled||(this.multiple?this.data.elem:this.data.elem.children[0]).focus()},reset:function(e){var t,n=this.data.select;for(this.selectedOptions.length=0,t=0;t<n.options.length;t++)n.options[t].selected=!1,c.removeClass(this.options[t],"dk-option-selected"),this.options[t].setAttribute("aria-selected","false"),!e&&n.options[t].defaultSelected&&this.select(t,!0);this.selectedOptions.length||this.multiple||this.select(0,!0)},refresh:function(){this.dispose().init(this.data.select,this.data.settings)},dispose:function(){return delete a.cache[this.data.cacheID],this.data.elem.parentNode.removeChild(this.data.elem),this.data.select.removeAttribute("data-dkCacheId"),this},handleEvent:function(e){if(!this.disabled)switch(e.type){case"click":this._delegate(e);break;case"keydown":this._keyHandler(e);break;case"keypress":this._searchOptions(e);break;case"mouseover":this._highlight(e);break;case"reset":this.reset();break;case"change":this.data.settings.change.call(this)}},_delegate:function(t){var n,r,i,s,o=t.target;if(c.hasClass(o,"dk-option-disabled"))return!1;if(this.multiple){if(c.hasClass(o,"dk-option"))if(n=e.getSelection(),"Range"===n.type&&n.collapseToStart(),t.shiftKey)if(i=this.options.indexOf(this.selectedOptions[0]),s=this.options.indexOf(this.selectedOptions[this.selectedOptions.length-1]),r=this.options.indexOf(o),r>i&&s>r&&(r=i),r>s&&s>i&&(s=i),this.reset(!0),s>r)for(;s+1>r;)this.select(r++);else for(;r>s-1;)this.select(r--);else t.ctrlKey||t.metaKey?this.select(o):(this.reset(!0),this.select(o))}else this[this.isOpen?"close":"open"](),c.hasClass(o,"dk-option")&&this.select(o)},_highlight:function(e){var t,n=e.target;if(!this.multiple){for(t=0;t<this.options.length;t++)c.removeClass(this.options[t],"dk-option-highlight");c.addClass(this.data.elem.lastChild,"dk-select-options-highlight"),c.addClass(n,"dk-option-highlight")}},_keyHandler:function(e){var t,n,r=this.selectedOptions,i=this.options,s=1,o={tab:9,enter:13,esc:27,space:32,up:38,down:40};switch(e.keyCode){case o.up:s=-1;case o.down:if(e.preventDefault(),t=r[r.length-1],c.hasClass(this.data.elem.lastChild,"dk-select-options-highlight"))for(c.removeClass(this.data.elem.lastChild,"dk-select-options-highlight"),n=0;n<i.length;n++)c.hasClass(i[n],"dk-option-highlight")&&(c.removeClass(i[n],"dk-option-highlight"),t=i[n]);s=i.indexOf(t)+s,s>i.length-1?s=i.length-1:0>s&&(s=0),this.data.select.options[s].disabled||(this.reset(!0),this.select(s),this._scrollTo(s));break;case o.space:if(!this.isOpen){e.preventDefault(),this.open();break};case o.tab:case o.enter:for(s=0;s<i.length;s++)c.hasClass(i[s],"dk-option-highlight")&&this.select(s);case o.esc:this.isOpen&&(e.preventDefault(),this.close())}},_searchOptions:function(e){var t,n=this,i=String.fromCharCode(e.keyCode||e.which),s=function(){n.data.searchTimeout&&clearTimeout(n.data.searchTimeout),n.data.searchTimeout=setTimeout(function(){n.data.searchString=""},1e3)};this.data.searchString===r&&(this.data.searchString=""),s(),this.data.searchString+=i,t=this.search(this.data.searchString,this.data.settings.search),t.length&&(c.hasClass(t[0],"dk-option-disabled")||this.selectOne(t[0]))},_scrollTo:function(e){var t,n,r,i=this.data.elem.lastChild;return-1===e||"number"!=typeof e&&!e||!this.isOpen&&!this.multiple?!1:("number"==typeof e&&(e=this.item(e)),t=c.position(e,i).top,n=t-i.scrollTop,r=n+e.offsetHeight,void (r>i.offsetHeight?(t+=e.offsetHeight,i.scrollTop=t-i.offsetHeight):0>n&&(i.scrollTop=t)))}},a.build=function(e,t){var n,r,i,s=[],o={elem:null,options:[],selected:[]},u=function(e){var n,r,i,s,a=[];switch(e.nodeName){case"OPTION":n=c.create("li",{"class":"dk-option ","data-value":e.value,innerHTML:e.text,role:"option","aria-selected":"false",id:t+"-"+(e.id||e.value.replace(" ","-"))}),c.addClass(n,e.className),e.disabled&&(c.addClass(n,"dk-option-disabled"),n.setAttribute("aria-disabled","true")),e.selected&&(c.addClass(n,"dk-option-selected"),n.setAttribute("aria-selected","true"),o.selected.push(n)),o.options.push(this.appendChild(n));break;case"OPTGROUP":for(r=c.create("li",{"class":"dk-optgroup"}),e.label&&r.appendChild(c.create("div",{"class":"dk-optgroup-label",innerHTML:e.label})),i=c.create("ul",{"class":"dk-optgroup-options"}),s=e.children.length;s--;a.unshift(e.children[s]));a.forEach(u,i),this.appendChild(r).appendChild(i)}};for(o.elem=c.create("div",{"class":"dk-select"+(e.multiple?"-multi":"")}),r=c.create("ul",{"class":"dk-select-options",id:t+"-listbox",role:"listbox"}),e.disabled&&c.addClass(o.elem,"dk-select-disabled"),o.elem.id=t+(e.id?"-"+e.id:""),c.addClass(o.elem,e.className),e.multiple?(o.elem.setAttribute("tabindex",e.getAttribute("tabindex")||"0"),r.setAttribute("aria-multiselectable","true")):(n=e.options[e.selectedIndex],o.elem.appendChild(c.create("div",{"class":"dk-selected "+n.className,tabindex:e.tabindex||0,innerHTML:n?n.text:"&nbsp;",id:t+"-combobox","aria-live":"assertive","aria-owns":r.id,role:"combobox"})),r.setAttribute("aria-expanded","false")),i=e.children.length;i--;s.unshift(e.children[i]));return s.forEach(u,o.elem.appendChild(r)),o},a.onDocClick=function(e){var t,n;if(1!==e.target.nodeType)return!1;null!==(t=e.target.getAttribute("data-dkcacheid"))&&a.cache[t].focus();for(n in a.cache)c.closest(e.target,a.cache[n].data.elem)||n===t||a.cache[n].disabled||a.cache[n].close()},n!==r&&(n.fn.dropkick=function(){var e=Array.prototype.slice.call(arguments);return n(this).each(function(){e[0]&&"object"!=typeof e[0]?"string"==typeof e[0]&&a.prototype[e[0]].apply(new a(this),e.slice(1)):new a(this,e[0]||{})})}),a}),define("dropkick",["jquery"],function(){}),function(e,t){typeof exports=="object"?module.exports=exports=t():typeof define=="function"&&define.amd?define("CryptoJS",[],t):e.CryptoJS=t()}(this,function(){var e=e||function(e,t){var n={},r=n.lib={},i=r.Base=function(){function e(){}return{extend:function(t){e.prototype=this;var n=new e;return t&&n.mixIn(t),n.hasOwnProperty("init")||(n.init=function(){n.$super.init.apply(this,arguments)}),n.init.prototype=n,n.$super=this,n},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),s=r.WordArray=i.extend({init:function(e,n){e=this.words=e||[],n!=t?this.sigBytes=n:this.sigBytes=e.length*4},toString:function(e){return(e||u).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,i=e.sigBytes;this.clamp();if(r%4)for(var s=0;s<i;s++){var o=n[s>>>2]>>>24-s%4*8&255;t[r+s>>>2]|=o<<24-(r+s)%4*8}else for(var s=0;s<i;s+=4)t[r+s>>>2]=n[s>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){var n=[],r=function(t){var t=t,n=987654321,r=4294967295;return function(){n=36969*(n&65535)+(n>>16)&r,t=18e3*(t&65535)+(t>>16)&r;var i=(n<<16)+t&r;return i/=4294967296,i+=.5,i*(e.random()>.5?1:-1)}};for(var i=0,o;i<t;i+=4){var u=r((o||e.random())*4294967296);o=u()*987654071,n.push(u()*4294967296|0)}return new s.init(n,t)}}),o=n.enc={},u=o.Hex={stringify:function(e){var t=e.words,n=e.sigBytes,r=[];for(var i=0;i<n;i++){var s=t[i>>>2]>>>24-i%4*8&255;r.push((s>>>4).toString(16)),r.push((s&15).toString(16))}return r.join("")},parse:function(e){var t=e.length,n=[];for(var r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new s.init(n,t/2)}},a=o.Latin1={stringify:function(e){var t=e.words,n=e.sigBytes,r=[];for(var i=0;i<n;i++){var s=t[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(s))}return r.join("")},parse:function(e){var t=e.length,n=[];for(var r=0;r<t;r++)n[r>>>2]|=(e.charCodeAt(r)&255)<<24-r%4*8;return new s.init(n,t)}},f=o.Utf8={stringify:function(e){try{return decodeURIComponent(escape(a.stringify(e)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(e){return a.parse(unescape(encodeURIComponent(e)))}},l=r.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(e){typeof e=="string"&&(e=f.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,i=n.sigBytes,o=this.blockSize,u=o*4,a=i/u;t?a=e.ceil(a):a=e.max((a|0)-this._minBufferSize,0);var f=a*o,l=e.min(f*4,i);if(f){for(var c=0;c<f;c+=o)this._doProcessBlock(r,c);var h=r.splice(0,f);n.sigBytes-=l}return new s.init(h,l)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),c=r.Hasher=l.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){e&&this._append(e);var t=this._doFinalize();return t},blockSize:16,_createHelper:function(e){return function(t,n){return(new e.init(n)).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return(new h.HMAC.init(e,n)).finalize(t)}}}),h=n.algo={};return n}(Math);return function(){var t=e,n=t.lib,r=n.WordArray,i=t.enc,s=i.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp();var i=[];for(var s=0;s<n;s+=3){var o=t[s>>>2]>>>24-s%4*8&255,u=t[s+1>>>2]>>>24-(s+1)%4*8&255,a=t[s+2>>>2]>>>24-(s+2)%4*8&255,f=o<<16|u<<8|a;for(var l=0;l<4&&s+l*.75<n;l++)i.push(r.charAt(f>>>6*(3-l)&63))}var c=r.charAt(64);if(c)while(i.length%4)i.push(c);return i.join("")},parse:function(e){var t=e.length,n=this._map,i=n.charAt(64);if(i){var s=e.indexOf(i);s!=-1&&(t=s)}var o=[],u=0;for(var a=0;a<t;a++)if(a%4){var f=n.indexOf(e.charAt(a-1))<<a%4*2,l=n.indexOf(e.charAt(a))>>>6-a%4*2,c=f|l;o[u>>>2]|=c<<24-u%4*8,u++}return r.create(o,u)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(t){function f(e,t,n,r,i,s,o){var u=e+(t&n|~t&r)+i+o;return(u<<s|u>>>32-s)+t}function l(e,t,n,r,i,s,o){var u=e+(t&r|n&~r)+i+o;return(u<<s|u>>>32-s)+t}function c(e,t,n,r,i,s,o){var u=e+(t^n^r)+i+o;return(u<<s|u>>>32-s)+t}function h(e,t,n,r,i,s,o){var u=e+(n^(t|~r))+i+o;return(u<<s|u>>>32-s)+t}var n=e,r=n.lib,i=r.WordArray,s=r.Hasher,o=n.algo,u=[];(function(){for(var e=0;e<64;e++)u[e]=t.abs(t.sin(e+1))*4294967296|0})();var a=o.MD5=s.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var r=t+n,i=e[r];e[r]=(i<<8|i>>>24)&16711935|(i<<24|i>>>8)&4278255360}var s=this._hash.words,o=e[t+0],a=e[t+1],p=e[t+2],d=e[t+3],v=e[t+4],m=e[t+5],g=e[t+6],y=e[t+7],b=e[t+8],w=e[t+9],E=e[t+10],S=e[t+11],x=e[t+12],N=e[t+13],C=e[t+14],k=e[t+15],L=s[0],A=s[1],O=s[2],M=s[3];L=f(L,A,O,M,o,7,u[0]),M=f(M,L,A,O,a,12,u[1]),O=f(O,M,L,A,p,17,u[2]),A=f(A,O,M,L,d,22,u[3]),L=f(L,A,O,M,v,7,u[4]),M=f(M,L,A,O,m,12,u[5]),O=f(O,M,L,A,g,17,u[6]),A=f(A,O,M,L,y,22,u[7]),L=f(L,A,O,M,b,7,u[8]),M=f(M,L,A,O,w,12,u[9]),O=f(O,M,L,A,E,17,u[10]),A=f(A,O,M,L,S,22,u[11]),L=f(L,A,O,M,x,7,u[12]),M=f(M,L,A,O,N,12,u[13]),O=f(O,M,L,A,C,17,u[14]),A=f(A,O,M,L,k,22,u[15]),L=l(L,A,O,M,a,5,u[16]),M=l(M,L,A,O,g,9,u[17]),O=l(O,M,L,A,S,14,u[18]),A=l(A,O,M,L,o,20,u[19]),L=l(L,A,O,M,m,5,u[20]),M=l(M,L,A,O,E,9,u[21]),O=l(O,M,L,A,k,14,u[22]),A=l(A,O,M,L,v,20,u[23]),L=l(L,A,O,M,w,5,u[24]),M=l(M,L,A,O,C,9,u[25]),O=l(O,M,L,A,d,14,u[26]),A=l(A,O,M,L,b,20,u[27]),L=l(L,A,O,M,N,5,u[28]),M=l(M,L,A,O,p,9,u[29]),O=l(O,M,L,A,y,14,u[30]),A=l(A,O,M,L,x,20,u[31]),L=c(L,A,O,M,m,4,u[32]),M=c(M,L,A,O,b,11,u[33]),O=c(O,M,L,A,S,16,u[34]),A=c(A,O,M,L,C,23,u[35]),L=c(L,A,O,M,a,4,u[36]),M=c(M,L,A,O,v,11,u[37]),O=c(O,M,L,A,y,16,u[38]),A=c(A,O,M,L,E,23,u[39]),L=c(L,A,O,M,N,4,u[40]),M=c(M,L,A,O,o,11,u[41]),O=c(O,M,L,A,d,16,u[42]),A=c(A,O,M,L,g,23,u[43]),L=c(L,A,O,M,w,4,u[44]),M=c(M,L,A,O,x,11,u[45]),O=c(O,M,L,A,k,16,u[46]),A=c(A,O,M,L,p,23,u[47]),L=h(L,A,O,M,o,6,u[48]),M=h(M,L,A,O,y,10,u[49]),O=h(O,M,L,A,C,15,u[50]),A=h(A,O,M,L,m,21,u[51]),L=h(L,A,O,M,x,6,u[52]),M=h(M,L,A,O,d,10,u[53]),O=h(O,M,L,A,E,15,u[54]),A=h(A,O,M,L,a,21,u[55]),L=h(L,A,O,M,b,6,u[56]),M=h(M,L,A,O,k,10,u[57]),O=h(O,M,L,A,g,15,u[58]),A=h(A,O,M,L,N,21,u[59]),L=h(L,A,O,M,v,6,u[60]),M=h(M,L,A,O,S,10,u[61]),O=h(O,M,L,A,p,15,u[62]),A=h(A,O,M,L,w,21,u[63]),s[0]=s[0]+L|0,s[1]=s[1]+A|0,s[2]=s[2]+O|0,s[3]=s[3]+M|0},_doFinalize:function(){var e=this._data,n=e.words,r=this._nDataBytes*8,i=e.sigBytes*8;n[i>>>5]|=128<<24-i%32;var s=t.floor(r/4294967296),o=r;n[(i+64>>>9<<4)+15]=(s<<8|s>>>24)&16711935|(s<<24|s>>>8)&4278255360,n[(i+64>>>9<<4)+14]=(o<<8|o>>>24)&16711935|(o<<24|o>>>8)&4278255360,e.sigBytes=(n.length+1)*4,this._process();var u=this._hash,a=u.words;for(var f=0;f<4;f++){var l=a[f];a[f]=(l<<8|l>>>24)&16711935|(l<<24|l>>>8)&4278255360}return u},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}});n.MD5=s._createHelper(a),n.HmacMD5=s._createHmacHelper(a)}(Math),function(){var t=e,n=t.lib,r=n.WordArray,i=n.Hasher,s=t.algo,o=[],u=s.SHA1=i.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){var n=this._hash.words,r=n[0],i=n[1],s=n[2],u=n[3],a=n[4];for(var f=0;f<80;f++){if(f<16)o[f]=e[t+f]|0;else{var l=o[f-3]^o[f-8]^o[f-14]^o[f-16];o[f]=l<<1|l>>>31}var c=(r<<5|r>>>27)+a+o[f];f<20?c+=(i&s|~i&u)+1518500249:f<40?c+=(i^s^u)+1859775393:f<60?c+=(i&s|i&u|s&u)-1894007588:c+=(i^s^u)-899497514,a=u,u=s,s=i<<30|i>>>2,i=r,r=c}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+s|0,n[3]=n[3]+u|0,n[4]=n[4]+a|0},_doFinalize:function(){var e=this._data,t=e.words,n=this._nDataBytes*8,r=e.sigBytes*8;return t[r>>>5]|=128<<24-r%32,t[(r+64>>>9<<4)+14]=Math.floor(n/4294967296),t[(r+64>>>9<<4)+15]=n,e.sigBytes=t.length*4,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA1=i._createHelper(u),t.HmacSHA1=i._createHmacHelper(u)}(),function(t){var n=e,r=n.lib,i=r.WordArray,s=r.Hasher,o=n.algo,u=[],a=[];(function(){function e(e){var n=t.sqrt(e);for(var r=2;r<=n;r++)if(!(e%r))return!1;return!0}function n(e){return(e-(e|0))*4294967296|0}var r=2,i=0;while(i<64)e(r)&&(i<8&&(u[i]=n(t.pow(r,.5))),a[i]=n(t.pow(r,1/3)),i++),r++})();var f=[],l=o.SHA256=s.extend({_doReset:function(){this._hash=new i.init(u.slice(0))},_doProcessBlock:function(e,t){var n=this._hash.words,r=n[0],i=n[1],s=n[2],o=n[3],u=n[4],l=n[5],c=n[6],h=n[7];for(var p=0;p<64;p++){if(p<16)f[p]=e[t+p]|0;else{var d=f[p-15],v=(d<<25|d>>>7)^(d<<14|d>>>18)^d>>>3,m=f[p-2],g=(m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10;f[p]=v+f[p-7]+g+f[p-16]}var y=u&l^~u&c,b=r&i^r&s^i&s,w=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),E=(u<<26|u>>>6)^(u<<21|u>>>11)^(u<<7|u>>>25),S=h+E+y+a[p]+f[p],x=w+b;h=c,c=l,l=u,u=o+S|0,o=s,s=i,i=r,r=S+x|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+s|0,n[3]=n[3]+o|0,n[4]=n[4]+u|0,n[5]=n[5]+l|0,n[6]=n[6]+c|0,n[7]=n[7]+h|0},_doFinalize:function(){var e=this._data,n=e.words,r=this._nDataBytes*8,i=e.sigBytes*8;return n[i>>>5]|=128<<24-i%32,n[(i+64>>>9<<4)+14]=t.floor(r/4294967296),n[(i+64>>>9<<4)+15]=r,e.sigBytes=n.length*4,this._process(),this._hash},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}});n.SHA256=s._createHelper(l),n.HmacSHA256=s._createHmacHelper(l)}(Math),function(){function o(e){return e<<8&4278255360|e>>>8&16711935}var t=e,n=t.lib,r=n.WordArray,i=t.enc,s=i.Utf16=i.Utf16BE={stringify:function(e){var t=e.words,n=e.sigBytes,r=[];for(var i=0;i<n;i+=2){var s=t[i>>>2]>>>16-i%4*8&65535;r.push(String.fromCharCode(s))}return r.join("")},parse:function(e){var t=e.length,n=[];for(var i=0;i<t;i++)n[i>>>1]|=e.charCodeAt(i)<<16-i%2*16;return r.create(n,t*2)}};i.Utf16LE={stringify:function(e){var t=e.words,n=e.sigBytes,r=[];for(var i=0;i<n;i+=2){var s=o(t[i>>>2]>>>16-i%4*8&65535);r.push(String.fromCharCode(s))}return r.join("")},parse:function(e){var t=e.length,n=[];for(var i=0;i<t;i++)n[i>>>1]|=o(e.charCodeAt(i)<<16-i%2*16);return r.create(n,t*2)}}}(),function(){if(typeof ArrayBuffer!="function")return;var t=e,n=t.lib,r=n.WordArray,i=r.init,s=r.init=function(e){e instanceof ArrayBuffer&&(e=new Uint8Array(e));if(e instanceof Int8Array||typeof Uint8ClampedArray!="undefined"&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);if(e instanceof Uint8Array){var t=e.byteLength,n=[];for(var r=0;r<t;r++)n[r>>>2]|=e[r]<<24-r%4*8;i.call(this,n,t)}else i.apply(this,arguments)};s.prototype=r}(),function(t){function d(e,t,n){return e^t^n}function v(e,t,n){return e&t|~e&n}function m(e,t,n){return(e|~t)^n}function g(e,t,n){return e&n|t&~n}function y(e,t,n){return e^(t|~n)}function b(e,t){return e<<t|e>>>32-t}var n=e,r=n.lib,i=r.WordArray,s=r.Hasher,o=n.algo,u=i.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),a=i.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),f=i.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),l=i.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),c=i.create([0,1518500249,1859775393,2400959708,2840853838]),h=i.create([1352829926,1548603684,1836072691,2053994217,0]),p=o.RIPEMD160=s.extend({_doReset:function(){this._hash=i.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var r=t+n,i=e[r];e[r]=(i<<8|i>>>24)&16711935|(i<<24|i>>>8)&4278255360}var s=this._hash.words,o=c.words,p=h.words,w=u.words,E=a.words,S=f.words,x=l.words,T,N,C,k,L,A,O,M,_,D;A=T=s[0],O=N=s[1],M=C=s[2],_=k=s[3],D=L=s[4];var P;for(var n=0;n<80;n+=1)P=T+e[t+w[n]]|0,n<16?P+=d(N,C,k)+o[0]:n<32?P+=v(N,C,k)+o[1]:n<48?P+=m(N,C,k)+o[2]:n<64?P+=g(N,C,k)+o[3]:P+=y(N,C,k)+o[4],P|=0,P=b(P,S[n]),P=P+L|0,T=L,L=k,k=b(C,10),C=N,N=P,P=A+e[t+E[n]]|0,n<16?P+=y(O,M,_)+p[0]:n<32?P+=g(O,M,_)+p[1]:n<48?P+=m(O,M,_)+p[2]:n<64?P+=v(O,M,_)+p[3]:P+=d(O,M,_)+p[4],P|=0,P=b(P,x[n]),P=P+D|0,A=D,D=_,_=b(M,10),M=O,O=P;P=s[1]+C+_|0,s[1]=s[2]+k+D|0,s[2]=s[3]+L+A|0,s[3]=s[4]+T+O|0,s[4]=s[0]+N+M|0,s[0]=P},_doFinalize:function(){var e=this._data,t=e.words,n=this._nDataBytes*8,r=e.sigBytes*8;t[r>>>5]|=128<<24-r%32,t[(r+64>>>9<<4)+14]=(n<<8|n>>>24)&16711935|(n<<24|n>>>8)&4278255360,e.sigBytes=(t.length+1)*4,this._process();var i=this._hash,s=i.words;for(var o=0;o<5;o++){var u=s[o];s[o]=(u<<8|u>>>24)&16711935|(u<<24|u>>>8)&4278255360}return i},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}});n.RIPEMD160=s._createHelper(p),n.HmacRIPEMD160=s._createHmacHelper(p)}(Math),function(){var t=e,n=t.lib,r=n.Base,i=t.enc,s=i.Utf8,o=t.algo,u=o.HMAC=r.extend({init:function(e,t){e=this._hasher=new e.init,typeof t=="string"&&(t=s.parse(t));var n=e.blockSize,r=n*4;t.sigBytes>r&&(t=e.finalize(t)),t.clamp();var i=this._oKey=t.clone(),o=this._iKey=t.clone(),u=i.words,a=o.words;for(var f=0;f<n;f++)u[f]^=1549556828,a[f]^=909522486;i.sigBytes=o.sigBytes=r,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);t.reset();var r=t.finalize(this._oKey.clone().concat(n));return r}})}(),function(){var t=e,n=t.lib,r=n.Base,i=n.WordArray,s=t.algo,o=s.SHA1,u=s.HMAC,a=s.PBKDF2=r.extend({cfg:r.extend({keySize:4,hasher:o,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){var n=this.cfg,r=u.create(n.hasher,e),s=i.create(),o=i.create([1]),a=s.words,f=o.words,l=n.keySize,c=n.iterations;while(a.length<l){var h=r.update(t).finalize(o);r.reset();var p=h.words,d=p.length,v=h;for(var m=1;m<c;m++){v=r.finalize(v),r.reset();var g=v.words;for(var y=0;y<d;y++)p[y]^=g[y]}s.concat(h),f[0]++}return s.sigBytes=l*4,s}});t.PBKDF2=function(e,t,n){return a.create(n).compute(e,t)}}(),function(){var t=e,n=t.lib,r=n.Base,i=n.WordArray,s=t.algo,o=s.MD5,u=s.EvpKDF=r.extend({cfg:r.extend({keySize:4,hasher:o,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){var n=this.cfg,r=n.hasher.create(),s=i.create(),o=s.words,u=n.keySize,a=n.iterations;while(o.length<u){f&&r.update(f);var f=r.update(e).finalize(t);r.reset();for(var l=1;l<a;l++)f=r.finalize(f),r.reset();s.concat(f)}return s.sigBytes=u*4,s}});t.EvpKDF=function(e,t,n){return u.create(n).compute(e,t)}}(),function(){var t=e,n=t.lib,r=n.WordArray,i=t.algo,s=i.SHA256,o=i.SHA224=s.extend({_doReset:function(){this._hash=new r.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=s._doFinalize.call(this);return e.sigBytes-=4,e}});t.SHA224=s._createHelper(o),t.HmacSHA224=s._createHmacHelper(o)}(),function(t){var n=e,r=n.lib,i=r.Base,s=r.WordArray,o=n.x64={},u=o.Word=i.extend({init:function(e,t){this.high=e,this.low=t}}),a=o.WordArray=i.extend({init:function(e,n){e=this.words=e||[],n!=t?this.sigBytes=n:this.sigBytes=e.length*8},toX32:function(){var e=this.words,t=e.length,n=[];for(var r=0;r<t;r++){var i=e[r];n.push(i.high),n.push(i.low)}return s.create(n,this.sigBytes)},clone:function(){var e=i.clone.call(this),t=e.words=this.words.slice(0),n=t.length;for(var r=0;r<n;r++)t[r]=t[r].clone();return e}})}(),function(t){var n=e,r=n.lib,i=r.WordArray,s=r.Hasher,o=n.x64,u=o.Word,a=n.algo,f=[],l=[],c=[];(function(){var e=1,t=0;for(var n=0;n<24;n++){f[e+5*t]=(n+1)*(n+2)/2%64;var r=t%5,i=(2*e+3*t)%5;e=r,t=i}for(var e=0;e<5;e++)for(var t=0;t<5;t++)l[e+5*t]=t+(2*e+3*t)%5*5;var s=1;for(var o=0;o<24;o++){var a=0,h=0;for(var p=0;p<7;p++){if(s&1){var d=(1<<p)-1;d<32?h^=1<<d:a^=1<<d-32}s&128?s=s<<1^113:s<<=1}c[o]=u.create(a,h)}})();var h=[];(function(){for(var e=0;e<25;e++)h[e]=u.create()})();var p=a.SHA3=s.extend({cfg:s.cfg.extend({outputLength:512}),_doReset:function(){var e=this._state=[];for(var t=0;t<25;t++)e[t]=new u.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){var n=this._state,r=this.blockSize/2;for(var i=0;i<r;i++){var s=e[t+2*i],o=e[t+2*i+1];s=(s<<8|s>>>24)&16711935|(s<<24|s>>>8)&4278255360,o=(o<<8|o>>>24)&16711935|(o<<24|o>>>8)&4278255360;var u=n[i];u.high^=o,u.low^=s}for(var a=0;a<24;a++){for(var p=0;p<5;p++){var d=0,v=0;for(var m=0;m<5;m++){var u=n[p+5*m];d^=u.high,v^=u.low}var g=h[p];g.high=d,g.low=v}for(var p=0;p<5;p++){var y=h[(p+4)%5],b=h[(p+1)%5],w=b.high,E=b.low,d=y.high^(w<<1|E>>>31),v=y.low^(E<<1|w>>>31);for(var m=0;m<5;m++){var u=n[p+5*m];u.high^=d,u.low^=v}}for(var S=1;S<25;S++){var u=n[S],x=u.high,N=u.low,C=f[S];if(C<32)var d=x<<C|N>>>32-C,v=N<<C|x>>>32-C;else var d=N<<C-32|x>>>64-C,v=x<<C-32|N>>>64-C;var k=h[l[S]];k.high=d,k.low=v}var L=h[0],A=n[0];L.high=A.high,L.low=A.low;for(var p=0;p<5;p++)for(var m=0;m<5;m++){var S=p+5*m,u=n[S],O=h[S],M=h[(p+1)%5+5*m],_=h[(p+2)%5+5*m];u.high=O.high^~M.high&_.high,u.low=O.low^~M.low&_.low}var u=n[0],D=c[a];u.high^=D.high,u.low^=D.low}},_doFinalize:function(){var e=this._data,n=e.words,r=this._nDataBytes*8,s=e.sigBytes*8,o=this.blockSize*32;n[s>>>5]|=1<<24-s%32,n[(t.ceil((s+1)/o)*o>>>5)-1]|=128,e.sigBytes=n.length*4,this._process();var u=this._state,a=this.cfg.outputLength/8,f=a/8,l=[];for(var c=0;c<f;c++){var h=u[c],p=h.high,d=h.low;p=(p<<8|p>>>24)&16711935|(p<<24|p>>>8)&4278255360,d=(d<<8|d>>>24)&16711935|(d<<24|d>>>8)&4278255360,l.push(d),l.push(p)}return new i.init(l,a)},clone:function(){var e=s.clone.call(this),t=e._state=this._state.slice(0);for(var n=0;n<25;n++)t[n]=t[n].clone();return e}});n.SHA3=s._createHelper(p),n.HmacSHA3=s._createHmacHelper(p)}(Math),function(){function a(){return s.create.apply(s,arguments)}var t=e,n=t.lib,r=n.Hasher,i=t.x64,s=i.Word,o=i.WordArray,u=t.algo,f=[a(1116352408,3609767458),a(1899447441,602891725),a(3049323471,3964484399),a(3921009573,2173295548),a(961987163,4081628472),a(1508970993,3053834265),a(2453635748,2937671579),a(2870763221,3664609560),a(3624381080,2734883394),a(310598401,1164996542),a(607225278,1323610764),a(1426881987,3590304994),a(1925078388,4068182383),a(2162078206,991336113),a(2614888103,633803317),a(3248222580,3479774868),a(3835390401,2666613458),a(4022224774,944711139),a(264347078,2341262773),a(604807628,2007800933),a(770255983,1495990901),a(1249150122,1856431235),a(1555081692,3175218132),a(1996064986,2198950837),a(2554220882,3999719339),a(2821834349,766784016),a(2952996808,2566594879),a(3210313671,3203337956),a(3336571891,1034457026),a(3584528711,2466948901),a(113926993,3758326383),a(338241895,168717936),a(666307205,1188179964),a(773529912,1546045734),a(1294757372,1522805485),a(1396182291,2643833823),a(1695183700,2343527390),a(1986661051,1014477480),a(2177026350,1206759142),a(2456956037,344077627),a(2730485921,1290863460),a(2820302411,3158454273),a(3259730800,3505952657),a(3345764771,106217008),a(3516065817,3606008344),a(3600352804,1432725776),a(4094571909,1467031594),a(275423344,851169720),a(430227734,3100823752),a(506948616,1363258195),a(659060556,3750685593),a(883997877,3785050280),a(958139571,3318307427),a(1322822218,3812723403),a(1537002063,2003034995),a(1747873779,3602036899),a(1955562222,1575990012),a(2024104815,1125592928),a(2227730452,2716904306),a(2361852424,442776044),a(2428436474,593698344),a(2756734187,3733110249),a(3204031479,2999351573),a(3329325298,3815920427),a(3391569614,3928383900),a(3515267271,566280711),a(3940187606,3454069534),a(4118630271,4000239992),a(116418474,1914138554),a(174292421,2731055270),a(289380356,3203993006),a(460393269,320620315),a(685471733,587496836),a(852142971,1086792851),a(1017036298,365543100),a(1126000580,2618297676),a(1288033470,3409855158),a(1501505948,4234509866),a(1607167915,987167468),a(1816402316,1246189591)],l=[];(function(){for(var e=0;e<80;e++)l[e]=a()})();var c=u.SHA512=r.extend({_doReset:function(){this._hash=new o.init([new s.init(1779033703,4089235720),new s.init(3144134277,2227873595),new s.init(1013904242,4271175723),new s.init(2773480762,1595750129),new s.init(1359893119,2917565137),new s.init(2600822924,725511199),new s.init(528734635,4215389547),new s.init(1541459225,327033209)])},_doProcessBlock:function(e,t){var n=this._hash.words,r=n[0],i=n[1],s=n[2],o=n[3],u=n[4],a=n[5],c=n[6],h=n[7],p=r.high,d=r.low,v=i.high,m=i.low,g=s.high,y=s.low,b=o.high,w=o.low,E=u.high,S=u.low,x=a.high,T=a.low,N=c.high,C=c.low,k=h.high,L=h.low,A=p,O=d,M=v,_=m,D=g,P=y,H=b,B=w,j=E,F=S,I=x,q=T,R=N,U=C,z=k,X=L;for(var V=0;V<80;V++){var $=l[V];if(V<16)var J=$.high=e[t+V*2]|0,Q=$.low=e[t+V*2+1]|0;else{var G=l[V-15],Y=G.high,Z=G.low,et=(Y>>>1|Z<<31)^(Y>>>8|Z<<24)^Y>>>7,tt=(Z>>>1|Y<<31)^(Z>>>8|Y<<24)^(Z>>>7|Y<<25),nt=l[V-2],rt=nt.high,it=nt.low,st=(rt>>>19|it<<13)^(rt<<3|it>>>29)^rt>>>6,ot=(it>>>19|rt<<13)^(it<<3|rt>>>29)^(it>>>6|rt<<26),ut=l[V-7],at=ut.high,ft=ut.low,lt=l[V-16],ct=lt.high,ht=lt.low,Q=tt+ft,J=et+at+(Q>>>0<tt>>>0?1:0),Q=Q+ot,J=J+st+(Q>>>0<ot>>>0?1:0),Q=Q+ht,J=J+ct+(Q>>>0<ht>>>0?1:0);$.high=J,$.low=Q}var pt=j&I^~j&R,dt=F&q^~F&U,vt=A&M^A&D^M&D,mt=O&_^O&P^_&P,gt=(A>>>28|O<<4)^(A<<30|O>>>2)^(A<<25|O>>>7),yt=(O>>>28|A<<4)^(O<<30|A>>>2)^(O<<25|A>>>7),bt=(j>>>14|F<<18)^(j>>>18|F<<14)^(j<<23|F>>>9),wt=(F>>>14|j<<18)^(F>>>18|j<<14)^(F<<23|j>>>9),Et=f[V],St=Et.high,xt=Et.low,Tt=X+wt,Nt=z+bt+(Tt>>>0<X>>>0?1:0),Tt=Tt+dt,Nt=Nt+pt+(Tt>>>0<dt>>>0?1:0),Tt=Tt+xt,Nt=Nt+St+(Tt>>>0<xt>>>0?1:0),Tt=Tt+Q,Nt=Nt+J+(Tt>>>0<Q>>>0?1:0),Ct=yt+mt,kt=gt+vt+(Ct>>>0<yt>>>0?1:0);z=R,X=U,R=I,U=q,I=j,q=F,F=B+Tt|0,j=H+Nt+(F>>>0<B>>>0?1:0)|0,H=D,B=P,D=M,P=_,M=A,_=O,O=Tt+Ct|0,A=Nt+kt+(O>>>0<Tt>>>0?1:0)|0}d=r.low=d+O,r.high=p+A+(d>>>0<O>>>0?1:0),m=i.low=m+_,i.high=v+M+(m>>>0<_>>>0?1:0),y=s.low=y+P,s.high=g+D+(y>>>0<P>>>0?1:0),w=o.low=w+B,o.high=b+H+(w>>>0<B>>>0?1:0),S=u.low=S+F,u.high=E+j+(S>>>0<F>>>0?1:0),T=a.low=T+q,a.high=x+I+(T>>>0<q>>>0?1:0),C=c.low=C+U,c.high=N+R+(C>>>0<U>>>0?1:0),L=h.low=L+X,h.high=k+z+(L>>>0<X>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,n=this._nDataBytes*8,r=e.sigBytes*8;t[r>>>5]|=128<<24-r%32,t[(r+128>>>10<<5)+30]=Math.floor(n/4294967296),t[(r+128>>>10<<5)+31]=n,e.sigBytes=t.length*4,this._process();var i=this._hash.toX32();return i},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});t.SHA512=r._createHelper(c),t.HmacSHA512=r._createHmacHelper(c)}(),function(){var t=e,n=t.x64,r=n.Word,i=n.WordArray,s=t.algo,o=s.SHA512,u=s.SHA384=o.extend({_doReset:function(){this._hash=new i.init([new r.init(3418070365,3238371032),new r.init(1654270250,914150663),new r.init(2438529370,812702999),new r.init(355462360,4144912697),new r.init(1731405415,4290775857),new r.init(2394180231,1750603025),new r.init(3675008525,1694076839),new r.init(1203062813,3204075428)])},_doFinalize:function(){var e=o._doFinalize.call(this);return e.sigBytes-=16,e}});t.SHA384=o._createHelper(u),t.HmacSHA384=o._createHmacHelper(u)}(),e.lib.Cipher||function(t){var n=e,r=n.lib,i=r.Base,s=r.WordArray,o=r.BufferedBlockAlgorithm,u=n.enc,a=u.Utf8,f=u.Base64,l=n.algo,c=l.EvpKDF,h=r.Cipher=o.extend({cfg:i.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){o.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){e&&this._append(e);var t=this._doFinalize();return t},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return typeof e=="string"?C:x}return function(t){return{encrypt:function(n,r,i){return e(r).encrypt(t,n,r,i)},decrypt:function(n,r,i){return e(r).decrypt(t,n,r,i)}}}}()}),p=r.StreamCipher=h.extend({_doFinalize:function(){var e=this._process(!0);return e},blockSize:1}),d=n.mode={},v=r.BlockCipherMode=i.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),m=d.CBC=function(){function n(e,n,r){var i=this._iv;if(i){var s=i;this._iv=t}else var s=this._prevBlock;for(var o=0;o<r;o++)e[n+o]^=s[o]}var e=v.extend();return e.Encryptor=e.extend({processBlock:function(e,t){var r=this._cipher,i=r.blockSize;n.call(this,e,t,i),r.encryptBlock(e,t),this._prevBlock=e.slice(t,t+i)}}),e.Decryptor=e.extend({processBlock:function(e,t){var r=this._cipher,i=r.blockSize,s=e.slice(t,t+i);r.decryptBlock(e,t),n.call(this,e,t,i),this._prevBlock=s}}),e}(),g=n.pad={},y=g.Pkcs7={pad:function(e,t){var n=t*4,r=n-e.sigBytes%n,i=r<<24|r<<16|r<<8|r,o=[];for(var u=0;u<r;u+=4)o.push(i);var a=s.create(o,r);e.concat(a)},unpad:function(e){var t=e.words[e.sigBytes-1>>>2]&255;e.sigBytes-=t}},b=r.BlockCipher=h.extend({cfg:h.cfg.extend({mode:m,padding:y}),reset:function(){h.reset.call(this);var e=this.cfg,t=e.iv,n=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var r=n.createEncryptor;else{var r=n.createDecryptor;this._minBufferSize=1}this._mode=r.call(n,this,t&&t.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else{var t=this._process(!0);e.unpad(t)}return t},blockSize:4}),w=r.CipherParams=i.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),E=n.format={},S=E.OpenSSL={stringify:function(e){var t=e.ciphertext,n=e.salt;if(n)var r=s.create([1398893684,1701076831]).concat(n).concat(t);else var r=t;return r.toString(f)},parse:function(e){var t=f.parse(e),n=t.words;if(n[0]==1398893684&&n[1]==1701076831){var r=s.create(n.slice(2,4));n.splice(0,4),t.sigBytes-=16}return w.create({ciphertext:t,salt:r})}},x=r.SerializableCipher=i.extend({cfg:i.extend({format:S}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);var i=e.createEncryptor(n,r),s=i.finalize(t),o=i.cfg;return w.create({ciphertext:s,key:n,iv:o.iv,algorithm:e,mode:o.mode,padding:o.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,n,r){r=this.cfg.extend(r),t=this._parse(t,r.format);var i=e.createDecryptor(n,r).finalize(t.ciphertext);return i},_parse:function(e,t){return typeof e=="string"?t.parse(e,this):e}}),T=n.kdf={},N=T.OpenSSL={execute:function(e,t,n,r){r||(r=s.random(8));var i=c.create({keySize:t+n}).compute(e,r),o=s.create(i.words.slice(t),n*4);return i.sigBytes=t*4,w.create({key:i,iv:o,salt:r})}},C=r.PasswordBasedCipher=x.extend({cfg:x.cfg.extend({kdf:N}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);var i=r.kdf.execute(n,e.keySize,e.ivSize);r.iv=i.iv;var s=x.encrypt.call(this,e,t,i.key,r);return s.mixIn(i),s},decrypt:function(e,t,n,r){r=this.cfg.extend(r),t=this._parse(t,r.format);var i=r.kdf.execute(n,e.keySize,e.ivSize,t.salt);r.iv=i.iv;var s=x.decrypt.call(this,e,t,i.key,r);return s}})}(),e.mode.CFB=function(){function n(e,t,n,r){var i=this._iv;if(i){var s=i.slice(0);this._iv=undefined}else var s=this._prevBlock;r.encryptBlock(s,0);for(var o=0;o<n;o++)e[t+o]^=s[o]}var t=e.lib.BlockCipherMode.extend();return t.Encryptor=t.extend({processBlock:function(e,t){var r=this._cipher,i=r.blockSize;n.call(this,e,t,i,r),this._prevBlock=e.slice(t,t+i)}}),t.Decryptor=t.extend({processBlock:function(e,t){var r=this._cipher,i=r.blockSize,s=e.slice(t,t+i);n.call(this,e,t,i,r),this._prevBlock=s}}),t}(),e.mode.ECB=function(){var t=e.lib.BlockCipherMode.extend();return t.Encryptor=t.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),t.Decryptor=t.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),t}(),e.pad.AnsiX923={pad:function(e,t){var n=e.sigBytes,r=t*4,i=r-n%r,s=n+i-1;e.clamp(),e.words[s>>>2]|=i<<24-s%4*8,e.sigBytes+=i},unpad:function(e){var t=e.words[e.sigBytes-1>>>2]&255;e.sigBytes-=t}},e.pad.Iso10126={pad:function(t,n){var r=n*4,i=r-t.sigBytes%r;t.concat(e.lib.WordArray.random(i-1)).concat(e.lib.WordArray.create([i<<24],1))},unpad:function(e){var t=e.words[e.sigBytes-1>>>2]&255;e.sigBytes-=t}},e.pad.Iso97971={pad:function(t,n){t.concat(e.lib.WordArray.create([2147483648],1)),e.pad.ZeroPadding.pad(t,n)},unpad:function(t){e.pad.ZeroPadding.unpad(t),t.sigBytes--}},e.mode.OFB=function(){var t=e.lib.BlockCipherMode.extend(),n=t.Encryptor=t.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,i=this._iv,s=this._keystream;i&&(s=this._keystream=i.slice(0),this._iv=undefined),n.encryptBlock(s,0);for(var o=0;o<r;o++)e[t+o]^=s[o]}});return t.Decryptor=n,t}(),e.pad.NoPadding={pad:function(){},unpad:function(){}},function(t){var n=e,r=n.lib,i=r.CipherParams,s=n.enc,o=s.Hex,u=n.format,a=u.Hex={stringify:function(e){return e.ciphertext.toString(o)},parse:function(e){var t=o.parse(e);return i.create({ciphertext:t})}}}(),function(){var t=e,n=t.lib,r=n.BlockCipher,i=t.algo,s=[],o=[],u=[],a=[],f=[],l=[],c=[],h=[],p=[],d=[];(function(){var e=[];for(var t=0;t<256;t++)t<128?e[t]=t<<1:e[t]=t<<1^283;var n=0,r=0;for(var t=0;t<256;t++){var i=r^r<<1^r<<2^r<<3^r<<4;i=i>>>8^i&255^99,s[n]=i,o[i]=n;var v=e[n],m=e[v],g=e[m],y=e[i]*257^i*16843008;u[n]=y<<24|y>>>8,a[n]=y<<16|y>>>16,f[n]=y<<8|y>>>24,l[n]=y;var y=g*16843009^m*65537^v*257^n*16843008;c[i]=y<<24|y>>>8,h[i]=y<<16|y>>>16,p[i]=y<<8|y>>>24,d[i]=y,n?(n=v^e[e[e[g^v]]],r^=e[e[r]]):n=r=1}})();var v=[0,1,2,4,8,16,32,64,128,27,54],m=i.AES=r.extend({_doReset:function(){var e=this._key,t=e.words,n=e.sigBytes/4,r=this._nRounds=n+6,i=(r+1)*4,o=this._keySchedule=[];for(var u=0;u<i;u++)if(u<n)o[u]=t[u];else{var a=o[u-1];u%n?n>6&&u%n==4&&(a=s[a>>>24]<<24|s[a>>>16&255]<<16|s[a>>>8&255]<<8|s[a&255]):(a=a<<8|a>>>24,a=s[a>>>24]<<24|s[a>>>16&255]<<16|s[a>>>8&255]<<8|s[a&255],a^=v[u/n|0]<<24),o[u]=o[u-n]^a}var f=this._invKeySchedule=[];for(var l=0;l<i;l++){var u=i-l;if(l%4)var a=o[u];else var a=o[u-4];l<4||u<=4?f[l]=a:f[l]=c[s[a>>>24]]^h[s[a>>>16&255]]^p[s[a>>>8&255]]^d[s[a&255]]}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,u,a,f,l,s)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,c,h,p,d,o);var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,r,i,s,o,u){var a=this._nRounds,f=e[t]^n[0],l=e[t+1]^n[1],c=e[t+2]^n[2],h=e[t+3]^n[3],p=4;for(var d=1;d<a;d++){var v=r[f>>>24]^i[l>>>16&255]^s[c>>>8&255]^o[h&255]^n[p++],m=r[l>>>24]^i[c>>>16&255]^s[h>>>8&255]^o[f&255]^n[p++],g=r[c>>>24]^i[h>>>16&255]^s[f>>>8&255]^o[l&255]^n[p++],y=r[h>>>24]^i[f>>>16&255]^s[l>>>8&255]^o[c&255]^n[p++];f=v,l=m,c=g,h=y}var v=(u[f>>>24]<<24|u[l>>>16&255]<<16|u[c>>>8&255]<<8|u[h&255])^n[p++],m=(u[l>>>24]<<24|u[c>>>16&255]<<16|u[h>>>8&255]<<8|u[f&255])^n[p++],g=(u[c>>>24]<<24|u[h>>>16&255]<<16|u[f>>>8&255]<<8|u[l&255])^n[p++],y=(u[h>>>24]<<24|u[f>>>16&255]<<16|u[l>>>8&255]<<8|u[c&255])^n[p++];e[t]=v,e[t+1]=m,e[t+2]=g,e[t+3]=y},keySize:8});t.AES=r._createHelper(m)}(),function(){function h(e,t){var n=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=n,this._lBlock^=n<<e}function p(e,t){var n=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=n,this._rBlock^=n<<e}var t=e,n=t.lib,r=n.WordArray,i=n.BlockCipher,s=t.algo,o=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],u=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],a=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],f=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],l=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],c=s.DES=i.extend({_doReset:function(){var e=this._key,t=e.words,n=[];for(var r=0;r<56;r++){var i=o[r]-1;n[r]=t[i>>>5]>>>31-i%32&1}var s=this._subKeys=[];for(var f=0;f<16;f++){var l=s[f]=[],c=a[f];for(var r=0;r<24;r++)l[r/6|0]|=n[(u[r]-1+c)%28]<<31-r%6,l[4+(r/6|0)]|=n[28+(u[r+24]-1+c)%28]<<31-r%6;l[0]=l[0]<<1|l[0]>>>31;for(var r=1;r<7;r++)l[r]=l[r]>>>(r-1)*4+3;l[7]=l[7]<<5|l[7]>>>27}var h=this._invSubKeys=[];for(var r=0;r<16;r++)h[r]=s[15-r]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,n){this._lBlock=e[t],this._rBlock=e[t+1],h.call(this,4,252645135),h.call(this,16,65535),p.call(this,2,858993459),p.call(this,8,16711935),h.call(this,1,1431655765);for(var r=0;r<16;r++){var i=n[r],s=this._lBlock,o=this._rBlock,u=0;for(var a=0;a<8;a++)u|=f[a][((o^i[a])&l[a])>>>0];this._lBlock=o,this._rBlock=s^u}var c=this._lBlock;this._lBlock=this._rBlock,this._rBlock=c,h.call(this,1,1431655765),p.call(this,8,16711935),p.call(this,2,858993459),h.call(this,16,65535),h.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});t.DES=i._createHelper(c);var d=s.TripleDES=i.extend({_doReset:function(){var e=this._key,t=e.words;this._des1=c.createEncryptor(r.create(t.slice(0,2))),this._des2=c.createEncryptor(r.create(t.slice(2,4))),this._des3=c.createEncryptor(r.create(t.slice(4,6)))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});t.TripleDES=i._createHelper(d)}(),function(){function o(){var e=this._S,t=this._i,n=this._j,r=0;for(var i=0;i<4;i++){t=(t+1)%256,n=(n+e[t])%256;var s=e[t];e[t]=e[n],e[n]=s,r|=e[(e[t]+e[n])%256]<<24-i*8}return this._i=t,this._j=n,r}var t=e,n=t.lib,r=n.StreamCipher,i=t.algo,s=i.RC4=r.extend({_doReset:function(){var e=this._key,t=e.words,n=e.sigBytes,r=this._S=[];for(var i=0;i<256;i++)r[i]=i;for(var i=0,s=0;i<256;i++){var o=i%n,u=t[o>>>2]>>>24-o%4*8&255;s=(s+r[i]+u)%256;var a=r[i];r[i]=r[s],r[s]=a}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=o.call(this)},keySize:8,ivSize:0});t.RC4=r._createHelper(s);var u=i.RC4Drop=s.extend({cfg:s.cfg.extend({drop:192}),_doReset:function(){s._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)o.call(this)}});t.RC4Drop=r._createHelper(u)}(),e.mode.CTRGladman=function(){function n(e){if((e>>24&255)===255){var t=e>>16&255,n=e>>8&255,r=e&255;t===255?(t=0,n===255?(n=0,r===255?r=0:++r):++n):++t,e=0,e+=t<<16,e+=n<<8,e+=r}else e+=1<<24;return e}function r(e){return(e[0]=n(e[0]))===0&&(e[1]=n(e[1])),e}var t=e.lib.BlockCipherMode.extend(),i=t.Encryptor=t.extend({processBlock:function(e,t){var n=this._cipher,i=n.blockSize,s=this._iv,o=this._counter;s&&(o=this._counter=s.slice(0),this._iv=undefined),r(o);var u=o.slice(0);n.encryptBlock(u,0);for(var a=0;a<i;a++)e[t+a]^=u[a]}});return t.Decryptor=i,t}(),function(){function f(){var e=this._X,t=this._C;for(var n=0;n<8;n++)o[n]=t[n];t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<o[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<o[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<o[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<o[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<o[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<o[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<o[6]>>>0?1:0)|0,this._b=t[7]>>>0<o[7]>>>0?1:0;for(var n=0;n<8;n++){var r=e[n]+t[n],i=r&65535,s=r>>>16,a=((i*i>>>17)+i*s>>>15)+s*s,f=((r&4294901760)*r|0)+((r&65535)*r|0);u[n]=a^f}e[0]=u[0]+(u[7]<<16|u[7]>>>16)+(u[6]<<16|u[6]>>>16)|0,e[1]=u[1]+(u[0]<<8|u[0]>>>24)+u[7]|0,e[2]=u[2]+(u[1]<<16|u[1]>>>16)+(u[0]<<16|u[0]>>>16)|0,e[3]=u[3]+(u[2]<<8|u[2]>>>24)+u[1]|0,e[4]=u[4]+(u[3]<<16|u[3]>>>16)+(u[2]<<16|u[2]>>>16)|0,e[5]=u[5]+(u[4]<<8|u[4]>>>24)+u[3]|0,e[6]=u[6]+(u[5]<<16|u[5]>>>16)+(u[4]<<16|u[4]>>>16)|0,e[7]=u[7]+(u[6]<<8|u[6]>>>24)+u[5]|0}var t=e,n=t.lib,r=n.StreamCipher,i=t.algo,s=[],o=[],u=[],a=i.Rabbit=r.extend({_doReset:function(){var e=this._key.words,t=this.cfg.iv;for(var n=0;n<4;n++)e[n]=(e[n]<<8|e[n]>>>24)&16711935|(e[n]<<24|e[n]>>>8)&4278255360;var r=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],i=this._C=[e[2]<<16|e[2]>>>16,e[0]&4294901760|e[1]&65535,e[3]<<16|e[3]>>>16,e[1]&4294901760|e[2]&65535,e[0]<<16|e[0]>>>16,e[2]&4294901760|e[3]&65535,e[1]<<16|e[1]>>>16,e[3]&4294901760|e[0]&65535];this._b=0;for(var n=0;n<4;n++)f.call(this);for(var n=0;n<8;n++)i[n]^=r[n+4&7];if(t){var s=t.words,o=s[0],u=s[1],a=(o<<8|o>>>24)&16711935|(o<<24|o>>>8)&4278255360,l=(u<<8|u>>>24)&16711935|(u<<24|u>>>8)&4278255360,c=a>>>16|l&4294901760,h=l<<16|a&65535;i[0]^=a,i[1]^=c,i[2]^=l,i[3]^=h,i[4]^=a,i[5]^=c,i[6]^=l,i[7]^=h;for(var n=0;n<4;n++)f.call(this)}},_doProcessBlock:function(e,t){var n=this._X;f.call(this),s[0]=n[0]^n[5]>>>16^n[3]<<16,s[1]=n[2]^n[7]>>>16^n[5]<<16,s[2]=n[4]^n[1]>>>16^n[7]<<16,s[3]=n[6]^n[3]>>>16^n[1]<<16;for(var r=0;r<4;r++)s[r]=(s[r]<<8|s[r]>>>24)&16711935|(s[r]<<24|s[r]>>>8)&4278255360,e[t+r]^=s[r]},blockSize:4,ivSize:2});t.Rabbit=r._createHelper(a)}(),e.mode.CTR=function(){var t=e.lib.BlockCipherMode.extend(),n=t.Encryptor=t.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,i=this._iv,s=this._counter;i&&(s=this._counter=i.slice(0),this._iv=undefined);var o=s.slice(0);n.encryptBlock(o,0),s[r-1]=s[r-1]+1|0;for(var u=0;u<r;u++)e[t+u]^=o[u]}});return t.Decryptor=n,t}(),function(){function f(){var e=this._X,t=this._C;for(var n=0;n<8;n++)o[n]=t[n];t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<o[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<o[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<o[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<o[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<o[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<o[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<o[6]>>>0?1:0)|0,this._b=t[7]>>>0<o[7]>>>0?1:0;for(var n=0;n<8;n++){var r=e[n]+t[n],i=r&65535,s=r>>>16,a=((i*i>>>17)+i*s>>>15)+s*s,f=((r&4294901760)*r|0)+((r&65535)*r|0);u[n]=a^f}e[0]=u[0]+(u[7]<<16|u[7]>>>16)+(u[6]<<16|u[6]>>>16)|0,e[1]=u[1]+(u[0]<<8|u[0]>>>24)+u[7]|0,e[2]=u[2]+(u[1]<<16|u[1]>>>16)+(u[0]<<16|u[0]>>>16)|0,e[3]=u[3]+(u[2]<<8|u[2]>>>24)+u[1]|0,e[4]=u[4]+(u[3]<<16|u[3]>>>16)+(u[2]<<16|u[2]>>>16)|0,e[5]=u[5]+(u[4]<<8|u[4]>>>24)+u[3]|0,e[6]=u[6]+(u[5]<<16|u[5]>>>16)+(u[4]<<16|u[4]>>>16)|0,e[7]=u[7]+(u[6]<<8|u[6]>>>24)+u[5]|0}var t=e,n=t.lib,r=n.StreamCipher,i=t.algo,s=[],o=[],u=[],a=i.RabbitLegacy=r.extend({_doReset:function(){var e=this._key.words,t=this.cfg.iv,n=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],r=this._C=[e[2]<<16|e[2]>>>16,e[0]&4294901760|e[1]&65535,e[3]<<16|e[3]>>>16,e[1]&4294901760|e[2]&65535,e[0]<<16|e[0]>>>16,e[2]&4294901760|e[3]&65535,e[1]<<16|e[1]>>>16,e[3]&4294901760|e[0]&65535];this._b=0;for(var i=0;i<4;i++)f.call(this);for(var i=0;i<8;i++)r[i]^=n[i+4&7];if(t){var s=t.words,o=s[0],u=s[1],a=(o<<8|o>>>24)&16711935|(o<<24|o>>>8)&4278255360,l=(u<<8|u>>>24)&16711935|(u<<24|u>>>8)&4278255360,c=a>>>16|l&4294901760,h=l<<16|a&65535;r[0]^=a,r[1]^=c,r[2]^=l,r[3]^=h,r[4]^=a,r[5]^=c,r[6]^=l,r[7]^=h;for(var i=0;i<4;i++)f.call(this)}},_doProcessBlock:function(e,t){var n=this._X;f.call(this),s[0]=n[0]^n[5]>>>16^n[3]<<16,s[1]=n[2]^n[7]>>>16^n[5]<<16,s[2]=n[4]^n[1]>>>16^n[7]<<16,s[3]=n[6]^n[3]>>>16^n[1]<<16;for(var r=0;r<4;r++)s[r]=(s[r]<<8|s[r]>>>24)&16711935|(s[r]<<24|s[r]>>>8)&4278255360,e[t+r]^=s[r]},blockSize:4,ivSize:2});t.RabbitLegacy=r._createHelper(a)}(),e.pad.ZeroPadding={pad:function(e,t){var n=t*4;e.clamp(),e.sigBytes+=n-(e.sigBytes%n||n)},unpad:function(e){var t=e.words,n=e.sigBytes-1;while(!(t[n>>>2]>>>24-n%4*8&255))n--;e.sigBytes=n+1}},e}),function(e,t){var n={},r=function(e,t){var n,r,i;if(typeof e=="string")return o(e);n=[];for(r=e.length,i=0;i<r;i++)n.push(o(e[i]));return t.apply(null,n)},i=function(e,t,n){arguments.length===2&&(n=t,t=null),r(t||[],function(){s(e,n,arguments)})},s=function(e,t,i){var s={exports:t},o;typeof t=="function"&&(i.length||(i=[r,s.exports,s]),o=t.apply(null,i),o!==undefined&&(s.exports=o)),n[e]=s.exports},o=function(t){var r=n[t]||e[t];if(!r)throw new Error("`"+t+"` is undefined");return r},u=function(e){var t,r,i,s,o,u;u=function(e){return e&&e.charAt(0).toUpperCase()+e.substr(1)};for(t in n){r=e;if(!n.hasOwnProperty(t))continue;i=t.split("/"),o=u(i.pop());while(s=u(i.shift()))r[s]=r[s]||{},r=r[s];r[o]=n[t]}return e},a=function(n){return e.__dollar=n,u(t(e,i,r))},f;typeof module=="object"&&typeof module.exports=="object"?module.exports=a():typeof define=="function"&&define.amd?define("WebUploader",["jquery"],a):(f=e.WebUploader,e.WebUploader=a(),e.WebUploader.noConflict=function(){e.WebUploader=f})}(window,function(e,t,n){return t("dollar-third",[],function(){var t=e.__dollar||e.jQuery||e.Zepto;if(!t)throw new Error("jQuery or Zepto not found!");return t}),t("dollar",["dollar-third"],function(e){return e}),t("promise-third",["dollar"],function(e){return{Deferred:e.Deferred,when:e.when,isPromise:function(e){return e&&typeof e.then=="function"}}}),t("promise",["promise-third"],function(e){return e}),t("base",["dollar","promise"],function(t,n){function s(e){return function(){return i.apply(e,arguments)}}function o(e,t){return function(){return e.apply(t,arguments)}}function u(e){var t;return Object.create?Object.create(e):(t=function(){},t.prototype=e,new t)}var r=function(){},i=Function.call;return{version:"0.1.5",$:t,Deferred:n.Deferred,isPromise:n.isPromise,when:n.when,browser:function(e){var t={},n=e.match(/WebKit\/([\d.]+)/),r=e.match(/Chrome\/([\d.]+)/)||e.match(/CriOS\/([\d.]+)/),i=e.match(/MSIE\s([\d\.]+)/)||e.match(/(?:trident)(?:.*rv:([\w.]+))?/i),s=e.match(/Firefox\/([\d.]+)/),o=e.match(/Safari\/([\d.]+)/),u=e.match(/OPR\/([\d.]+)/);return n&&(t.webkit=parseFloat(n[1])),r&&(t.chrome=parseFloat(r[1])),i&&(t.ie=parseFloat(i[1])),s&&(t.firefox=parseFloat(s[1])),o&&(t.safari=parseFloat(o[1])),u&&(t.opera=parseFloat(u[1])),t}(navigator.userAgent),os:function(e){var t={},n=e.match(/(?:Android);?[\s\/]+([\d.]+)?/),r=e.match(/(?:iPad|iPod|iPhone).*OS\s([\d_]+)/);return n&&(t.android=parseFloat(n[1])),r&&(t.ios=parseFloat(r[1].replace(/_/g,"."))),t}(navigator.userAgent),inherits:function(e,n,r){var i;return typeof n=="function"?(i=n,n=null):n&&n.hasOwnProperty("constructor")?i=n.constructor:i=function(){return e.apply(this,arguments)},t.extend(!0,i,e,r||{}),i.__super__=e.prototype,i.prototype=u(e.prototype),n&&t.extend(!0,i.prototype,n),i},noop:r,bindFn:o,log:function(){return e.console?o(console.log,console):r}(),nextTick:function(){return function(e){setTimeout(e,1)}}(),slice:s([].slice),guid:function(){var e=0;return function(t){var n=(+(new Date)).toString(32),r=0;for(;r<5;r++)n+=Math.floor(Math.random()*65535).toString(32);return(t||"wu_")+n+(e++).toString(32)}}(),formatSize:function(e,t,n){var r;n=n||["B","K","M","G","TB"];while((r=n.shift())&&e>1024)e/=1024;return(r==="B"?e:e.toFixed(t||2))+r}}}),t("mediator",["base"],function(e){function s(e,n,r,i){return t.grep(e,function(e){return e&&(!n||e.e===n)&&(!r||e.cb===r||e.cb._cb===r)&&(!i||e.ctx===i)})}function o(e,n,i){t.each((e||"").split(r),function(e,t){i(t,n)})}function u(e,t){var n=!1,r=-1,i=e.length,s;while(++r<i){s=e[r];if(s.cb.apply(s.ctx2,t)===!1){n=!0;break}}return!n}var t=e.$,n=[].slice,r=/\s+/,i;return i={on:function(e,t,n){var r=this,i;return t?(i=this._events||(this._events=[]),o(e,t,function(e,t){var s={e:e};s.cb=t,s.ctx=n,s.ctx2=n||r,s.id=i.length,i.push(s)}),this):this},once:function(e,t,n){var r=this;return t?(o(e,t,function(e,t){var i=function(){return r.off(e,i),t.apply(n||r,arguments)};i._cb=t,r.on(e,i,n)}),r):r},off:function(e,n,r){var i=this._events;return i?!e&&!n&&!r?(this._events=[],this):(o(e,n,function(e,n){t.each(s(i,e,n,r),function(){delete i[this.id]})}),this):this},trigger:function(e){var t,r,i;return!this._events||!e?this:(t=n.call(arguments,1),r=s(this._events,e),i=s(this._events,"all"),u(r,t)&&u(i,arguments))}},t.extend({installTo:function(e){return t.extend(e,i)}},i)}),t("uploader",["base","mediator"],function(e,t){function r(e){this.options=n.extend(!0,{},r.options,e),this._init(this.options)}var n=e.$;return r.options={},t.installTo(r.prototype),n.each({upload:"start-upload",stop:"stop-upload",getFile:"get-file",getFiles:"get-files",addFile:"add-file",addFiles:"add-file",sort:"sort-files",removeFile:"remove-file",cancelFile:"cancel-file",skipFile:"skip-file",retry:"retry",isInProgress:"is-in-progress",makeThumb:"make-thumb",md5File:"md5-file",getDimension:"get-dimension",addButton:"add-btn",predictRuntimeType:"predict-runtime-type",refresh:"refresh",disable:"disable",enable:"enable",reset:"reset"},function(e,t){r.prototype[e]=function(){return this.request(t,arguments)}}),n.extend(r.prototype,{state:"pending",_init:function(e){var t=this;t.request("init",e,function(){t.state="ready",t.trigger("ready")})},option:function(e,t){var r=this.options;if(!(arguments.length>1))return e?r[e]:r;n.isPlainObject(t)&&n.isPlainObject(r[e])?n.extend(r[e],t):r[e]=t},getStats:function(){var e=this.request("get-stats");return e?{successNum:e.numOfSuccess,progressNum:e.numOfProgress,cancelNum:e.numOfCancel,invalidNum:e.numOfInvalid,uploadFailNum:e.numOfUploadFailed,queueNum:e.numOfQueue,interruptNum:e.numofInterrupt}:{}},trigger:function(e){var r=[].slice.call(arguments,1),i=this.options,s="on"+e.substring(0,1).toUpperCase()+e.substring(1);return t.trigger.apply(this,arguments)===!1||n.isFunction(i[s])&&i[s].apply(this,r)===!1||n.isFunction(this[s])&&this[s].apply(this,r)===!1||t.trigger.apply(t,[this,e].concat(r))===!1?!1:!0},destroy:function(){this.request("destroy",arguments),this.off()},request:e.noop}),e.create=r.create=function(e){return new r(e)},e.Uploader=r,r}),t("runtime/runtime",["base","mediator"],function(e,t){function s(t){this.options=n.extend({container:document.body},t),this.uid=e.guid("rt_")}var n=e.$,r={},i=function(e){for(var t in e)if(e.hasOwnProperty(t))return t;return null};return n.extend(s.prototype,{getContainer:function(){var e=this.options,t,r;return this._container?this._container:(t=n(e.container||document.body),r=n(document.createElement("div")),r.attr("id","rt_"+this.uid),r.css({position:"absolute",top:"0px",left:"0px",width:"1px",height:"1px",overflow:"hidden"}),t.append(r),t.addClass("webuploader-container"),this._container=r,this._parent=t,r)},init:e.noop,exec:e.noop,destroy:function(){this._container&&this._container.remove(),this._parent&&this._parent.removeClass("webuploader-container"),this.off()}}),s.orders="html5,flash",s.addRuntime=function(e,t){r[e]=t},s.hasRuntime=function(e){return e?!!r[e]:!!i(r)},s.create=function(e,t){var o,u;t=t||s.orders,n.each(t.split(/\s*,\s*/g),function(){if(r[this])return o=this,!1}),o=o||i(r);if(!o)throw new Error("Runtime Error");return u=new r[o](e),u},t.installTo(s.prototype),s}),t("runtime/client",["base","mediator","runtime/runtime"],function(e,t,n){function i(t,i){var s=e.Deferred(),o;this.uid=e.guid("client_"),this.runtimeReady=function(e){return s.done(e)},this.connectRuntime=function(t,u){if(o)throw new Error("already connected!");return s.done(u),typeof t=="string"&&r.get(t)&&(o=r.get(t)),o=o||r.get(null,i),o?(e.$.extend(o.options,t),o.__promise.then(s.resolve),o.__client++):(o=n.create(t,t.runtimeOrder),o.__promise=s.promise(),o.once("ready",s.resolve),o.init(),r.add(o),o.__client=1),i&&(o.__standalone=i),o},this.getRuntime=function(){return o},this.disconnectRuntime=function(){if(!o)return;o.__client--,o.__client<=0&&(r.remove(o),delete o.__promise,o.destroy()),o=null},this.exec=function(){if(!o)return;var n=e.slice(arguments);return t&&n.unshift(t),o.exec.apply(this,n)},this.getRuid=function(){return o&&o.uid},this.destroy=function(e){return function(){e&&e.apply(this,arguments),this.trigger("destroy"),this.off(),this.exec("destroy"),this.disconnectRuntime()}}(this.destroy)}var r;return r=function(){var e={};return{add:function(t){e[t.uid]=t},get:function(t,n){var r;if(t)return e[t];for(r in e){if(n&&e[r].__standalone)continue;return e[r]}return null},remove:function(t){delete e[t.uid]}}}(),t.installTo(i.prototype),i}),t("lib/dnd",["base","mediator","runtime/client"],function(e,t,n){function i(e){e=this.options=r.extend({},i.options,e),e.container=r(e.container);if(!e.container.length)return;n.call(this,"DragAndDrop")}var r=e.$;return i.options={accept:null,disableGlobalDnd:!1},e.inherits(n,{constructor:i,init:function(){var e=this;e.connectRuntime(e.options,function(){e.exec("init"),e.trigger("ready")})}}),t.installTo(i.prototype),i}),t("widgets/widget",["base","uploader"],function(e,t){function u(e){if(!e)return!1;var t=e.length,r=n.type(e);return e.nodeType===1&&t?!0:r==="array"||r!=="function"&&r!=="string"&&(t===0||typeof t=="number"&&t>0&&t-1 in e)}function a(e){this.owner=e,this.options=e.options}var n=e.$,r=t.prototype._init,i=t.prototype.destroy,s={},o=[];return n.extend(a.prototype,{init:e.noop,invoke:function(e,t){var r=this.responseMap;return!!r&&e in r&&r[e]in this&&!!n.isFunction(this[r[e]])?this[r[e]].apply(this,t):s},request:function(){return this.owner.request.apply(this.owner,arguments)}}),n.extend(t.prototype,{_init:function(){var e=this,t=e._widgets=[],i=e.options.disableWidgets||"";return n.each(o,function(n,r){(!i||!~i.indexOf(r._name))&&t.push(new r(e))}),r.apply(e,arguments)},request:function(t,n,r){var i=0,o=this._widgets,a=o&&o.length,f=[],l=[],c,h,p,d;n=u(n)?n:[n];for(;i<a;i++)c=o[i],h=c.invoke(t,n),h!==s&&(e.isPromise(h)?l.push(h):f.push(h));return r||l.length?(p=e.when.apply(e,l),d=p.pipe?"pipe":"then",p[d](function(){var t=e.Deferred(),n=arguments;return n.length===1&&(n=n[0]),setTimeout(function(){t.resolve(n)},1),t.promise()})[r?d:"done"](r||e.noop)):f[0]},destroy:function(){i.apply(this,arguments),this._widgets=null}}),t.register=a.register=function(t,r){var i={init:"init",destroy:"destroy",name:"anonymous"},s;return arguments.length===1?(r=t,n.each(r,function(e){if(e[0]==="_"||e==="name"){e==="name"&&(i.name=r.name);return}i[e.replace(/[A-Z]/g,"-$&").toLowerCase()]=e})):i=n.extend(i,t),r.responseMap=i,s=e.inherits(a,r),s._name=i.name,o.push(s),s},t.unRegister=a.unRegister=function(e){if(!e||e==="anonymous")return;for(var t=o.length;t--;)o[t]._name===e&&o.splice(t,1)},a}),t("widgets/filednd",["base","uploader","lib/dnd","widgets/widget"],function(e,t,n){var r=e.$;return t.options.dnd="",t.register({name:"dnd",init:function(t){if(!t.dnd||this.request("predict-runtime-type")!=="html5")return;var i=this,s=e.Deferred(),o=r.extend({},{disableGlobalDnd:t.disableGlobalDnd,container:t.dnd,accept:t.accept}),u;return this.dnd=u=new n(o),u.once("ready",s.resolve),u.on("drop",function(e){i.request("add-file",[e])}),u.on("accept",function(e){return i.owner.trigger("dndAccept",e)}),u.init(),s.promise()},destroy:function(){this.dnd&&this.dnd.destroy()}})}),t("lib/filepaste",["base","mediator","runtime/client"],function(e,t,n){function i(e){e=this.options=r.extend({},e),e.container=r(e.container||document.body),n.call(this,"FilePaste")}var r=e.$;return e.inherits(n,{constructor:i,init:function(){var e=this;e.connectRuntime(e.options,function(){e.exec("init"),e.trigger("ready")})}}),t.installTo(i.prototype),i}),t("widgets/filepaste",["base","uploader","lib/filepaste","widgets/widget"],function(e,t,n){var r=e.$;return t.register({name:"paste",init:function(t){if(!t.paste||this.request("predict-runtime-type")!=="html5")return;var i=this,s=e.Deferred(),o=r.extend({},{container:t.paste,accept:t.accept}),u;return this.paste=u=new n(o),u.once("ready",s.resolve),u.on("paste",function(e){i.owner.request("add-file",[e])}),u.init(),s.promise()},destroy:function(){this.paste&&this.paste.destroy()}})}),t("lib/blob",["base","runtime/client"],function(e,t){function n(e,n){var r=this;r.source=n,r.ruid=e,this.size=n.size||0,!n.type&&this.ext&&~"jpg,jpeg,png,gif,bmp".indexOf(this.ext)?this.type="image/"+(this.ext==="jpg"?"jpeg":this.ext):this.type=n.type||"application/octet-stream",t.call(r,"Blob"),this.uid=n.uid||this.uid,e&&r.connectRuntime(e)}return e.inherits(t,{constructor:n,slice:function(e,t){return this.exec("slice",e,t)},getSource:function(){return this.source}}),n}),t("lib/file",["base","lib/blob"],function(e,t){function i(e,i){var s;this.name=i.name||"untitled"+n++,s=r.exec(i.name)?RegExp.$1.toLowerCase():"",!s&&i.type&&(s=/\/(jpg|jpeg|png|gif|bmp)$/i.exec(i.type)?RegExp.$1.toLowerCase():"",this.name+="."+s),this.ext=s,this.lastModifiedDate=i.lastModifiedDate||(new Date).toLocaleString(),t.apply(this,arguments)}var n=1,r=/\.([^.]+)$/;return e.inherits(t,i)}),t("lib/filepicker",["base","runtime/client","lib/file"],function(t,n,r){function s(e){e=this.options=i.extend({},s.options,e),e.container=i(e.id);if(!e.container.length)throw new Error("按钮指定错误");e.innerHTML=e.innerHTML||e.label||e.container.html()||"",e.button=i(e.button||document.createElement("div")),e.button.html(e.innerHTML),e.container.html(e.button),n.call(this,"FilePicker",!0)}var i=t.$;return s.options={button:null,container:null,label:null,innerHTML:null,multiple:!0,accept:null,name:"file"},t.inherits(n,{constructor:s,init:function(){var n=this,s=n.options,o=s.button;o.addClass("webuploader-pick"),n.on("all",function(e){var t;switch(e){case"mouseenter":o.addClass("webuploader-pick-hover");break;case"mouseleave":o.removeClass("webuploader-pick-hover");break;case"change":t=n.exec("getFiles"),n.trigger("select",i.map(t,function(e){return e=new r(n.getRuid(),e),e._refer=s.container,e}),s.container)}}),n.connectRuntime(s,function(){n.refresh(),n.exec("init",s),n.trigger("ready")}),this._resizeHandler=t.bindFn(this.refresh,this),i(e).on("resize",this._resizeHandler)},refresh:function(){var e=this.getRuntime().getContainer(),t=this.options.button,n=t.outerWidth?t.outerWidth():t.width(),r=t.outerHeight?t.outerHeight():t.height(),i=t.offset();n&&r&&e.css({bottom:"auto",right:"auto",width:n+"px",height:r+"px"}).offset(i)},enable:function(){var e=this.options.button;e.removeClass("webuploader-pick-disable"),this.refresh()},disable:function(){var e=this.options.button;this.getRuntime().getContainer().css({top:"-99999px"}),e.addClass("webuploader-pick-disable")},destroy:function(){var t=this.options.button;i(e).off("resize",this._resizeHandler),t.removeClass("webuploader-pick-disable webuploader-pick-hover webuploader-pick")}}),s}),t("widgets/filepicker",["base","uploader","lib/filepicker","widgets/widget"],function(e,t,n){var r=e.$;return r.extend(t.options,{pick:null,accept:null}),t.register({name:"picker",init:function(e){return this.pickers=[],e.pick&&this.addBtn(e.pick)},refresh:function(){r.each(this.pickers,function(){this.refresh()})},addBtn:function(t){var i=this,s=i.options,o=s.accept,u=[];if(!t)return;return r.isPlainObject(t)||(t={id:t}),r(t.id).each(function(){var a,f,l;l=e.Deferred(),a=r.extend({},t,{accept:r.isPlainObject(o)?[o]:o,swf:s.swf,runtimeOrder:s.runtimeOrder,id:this}),f=new n(a),f.once("ready",l.resolve),f.on("select",function(e){i.owner.request("add-file",[e])}),f.init(),i.pickers.push(f),u.push(l.promise())}),e.when.apply(e,u)},disable:function(){r.each(this.pickers,function(){this.disable()})},enable:function(){r.each(this.pickers,function(){this.enable()})},destroy:function(){r.each(this.pickers,function(){this.destroy()}),this.pickers=null}})}),t("lib/image",["base","runtime/client","lib/blob"],function(e,t,n){function i(e){this.options=r.extend({},i.options,e),t.call(this,"Image"),this.on("load",function(){this._info=this.exec("info"),this._meta=this.exec("meta")})}var r=e.$;return i.options={quality:90,crop:!1,preserveHeaders:!1,allowMagnify:!1},e.inherits(t,{constructor:i,info:function(e){return e?(this._info=e,this):this._info},meta:function(e){return e?(this._meta=e,this):this._meta},loadFromBlob:function(e){var t=this,n=e.getRuid();this.connectRuntime(n,function(){t.exec("init",t.options),t.exec("loadFromBlob",e)})},resize:function(){var t=e.slice(arguments);return this.exec.apply(this,["resize"].concat(t))},crop:function(){var t=e.slice(arguments);return this.exec.apply(this,["crop"].concat(t))},getAsDataUrl:function(e){return this.exec("getAsDataUrl",e)},getAsBlob:function(e){var t=this.exec("getAsBlob",e);return new n(this.getRuid(),t)}}),i}),t("widgets/image",["base","uploader","lib/image","widgets/widget"],function(e,t,n){var r=e.$,i;return i=function(e){var t=0,n=[],r=function(){var r;while(n.length&&t<e)r=n.shift(),t+=r[0],r[1]()};return function(e,i,s){n.push([i,s]),e.once("destroy",function(){t-=i,setTimeout(r,1)}),setTimeout(r,1)}}(5242880),r.extend(t.options,{thumb:{width:110,height:110,quality:70,allowMagnify:!0,crop:!0,preserveHeaders:!1,type:"image/jpeg"},compress:{width:1600,height:1600,quality:90,allowMagnify:!1,crop:!1,preserveHeaders:!0}}),t.register({name:"image",makeThumb:function(e,t,s,o){var u,a;e=this.request("get-file",e);if(!e.type.match(/^image/)){t(!0);return}u=r.extend({},this.options.thumb),r.isPlainObject(s)&&(u=r.extend(u,s),s=null),s=s||u.width,o=o||u.height,a=new n(u),a.once("load",function(){e._info=e._info||a.info(),e._meta=e._meta||a.meta(),s<=1&&s>0&&(s=e._info.width*s),o<=1&&o>0&&(o=e._info.height*o),a.resize(s,o)}),a.once("complete",function(){t(!1,a.getAsDataUrl(u.type)),a.destroy()}),a.once("error",function(e){t(e||!0),a.destroy()}),i(a,e.source.size,function(){e._info&&a.info(e._info),e._meta&&a.meta(e._meta),a.loadFromBlob(e.source)})},beforeSendFile:function(t){var i=this.options.compress||this.options.resize,s=i&&i.compressSize||0,o=i&&i.noCompressIfLarger||!1,u,a;t=this.request("get-file",t);if(!i||!~"image/jpeg,image/jpg".indexOf(t.type)||t.size<s||t._compressed)return;return i=r.extend({},i),a=e.Deferred(),u=new n(i),a.always(function(){u.destroy(),u=null}),u.once("error",a.reject),u.once("load",function(){var e=i.width,n=i.height;t._info=t._info||u.info(),t._meta=t._meta||u.meta(),e<=1&&e>0&&(e=t._info.width*e),n<=1&&n>0&&(n=t._info.height*n),u.resize(e,n)}),u.once("complete",function(){var e,n;try{e=u.getAsBlob(i.type),n=t.size;if(!o||e.size<n)t.source=e,t.size=e.size,t.trigger("resize",e.size,n);t._compressed=!0,a.resolve()}catch(r){a.resolve()}}),t._info&&u.info(t._info),t._meta&&u.meta(t._meta),u.loadFromBlob(t.source),a.promise()}})}),t("file",["base","mediator"],function(e,t){function u(){return r+i++}function a(e){this.name=e.name||"Untitled",this.size=e.size||0,this.type=e.type||"application/octet-stream",this.lastModifiedDate=e.lastModifiedDate||new Date*1,this.id=u(),this.ext=s.exec(this.name)?RegExp.$1:"",this.statusText="",o[this.id]=a.Status.INITED,this.source=e,this.loaded=0,this.on("error",function(e){this.setStatus(a.Status.ERROR,e)})}var n=e.$,r="WU_FILE_",i=0,s=/\.([^.]+)$/,o={};return n.extend(a.prototype,{setStatus:function(e,t){var n=o[this.id];typeof t!="undefined"&&(this.statusText=t),e!==n&&(o[this.id]=e,this.trigger("statuschange",e,n))},getStatus:function(){return o[this.id]},getSource:function(){return this.source},destroy:function(){this.off(),delete o[this.id]}}),t.installTo(a.prototype),a.Status={INITED:"inited",QUEUED:"queued",PROGRESS:"progress",ERROR:"error",COMPLETE:"complete",CANCELLED:"cancelled",INTERRUPT:"interrupt",INVALID:"invalid"},a}),t("queue",["base","mediator","file"],function(e,t,n){function s(){this.stats={numOfQueue:0,numOfSuccess:0,numOfCancel:0,numOfProgress:0,numOfUploadFailed:0,numOfInvalid:0,numofDeleted:0,numofInterrupt:0},this._queue=[],this._map={}}var r=e.$,i=n.Status;return r.extend(s.prototype,{append:function(e){return this._queue.push(e),this._fileAdded(e),this},prepend:function(e){return this._queue.unshift(e),this._fileAdded(e),this},getFile:function(e){return typeof e!="string"?e:this._map[e]},fetch:function(e){var t=this._queue.length,n,r;e=e||i.QUEUED;for(n=0;n<t;n++){r=this._queue[n];if(e===r.getStatus())return r}return null},sort:function(e){typeof e=="function"&&this._queue.sort(e)},getFiles:function(){var e=[].slice.call(arguments,0),t=[],n=0,i=this._queue.length,s;for(;n<i;n++){s=this._queue[n];if(e.length&&!~r.inArray(s.getStatus(),e))continue;t.push(s)}return t},removeFile:function(e){var t=this,n=this._map[e.id];n&&(delete this._map[e.id],e.destroy(),this.stats.numofDeleted++)},_fileAdded:function(e){var t=this,n=this._map[e.id];n||(this._map[e.id]=e,e.on("statuschange",function(e,n){t._onFileStatusChange(e,n)}))},_onFileStatusChange:function(e,t){var n=this.stats;switch(t){case i.PROGRESS:n.numOfProgress--;break;case i.QUEUED:n.numOfQueue--;break;case i.ERROR:n.numOfUploadFailed--;break;case i.INVALID:n.numOfInvalid--;break;case i.INTERRUPT:n.numofInterrupt--}switch(e){case i.QUEUED:n.numOfQueue++;break;case i.PROGRESS:n.numOfProgress++;break;case i.ERROR:n.numOfUploadFailed++;break;case i.COMPLETE:n.numOfSuccess++;break;case i.CANCELLED:n.numOfCancel++;break;case i.INVALID:n.numOfInvalid++;break;case i.INTERRUPT:n.numofInterrupt++}}}),t.installTo(s.prototype),s}),t("widgets/queue",["base","uploader","queue","file","lib/file","runtime/client","widgets/widget"],function(e,t,n,r,i,s){var o=e.$,u=/\.\w+$/,a=r.Status;return t.register({name:"queue",init:function(t){var r=this,i,u,a,f,l,c,h;o.isPlainObject(t.accept)&&(t.accept=[t.accept]);if(t.accept){l=[];for(a=0,u=t.accept.length;a<u;a++)f=t.accept[a].extensions,f&&l.push(f);l.length&&(c="\\."+l.join(",").replace(/,/g,"$|\\.").replace(/\*/g,".*")+"$"),r.accept=new RegExp(c,"i")}r.queue=new n,r.stats=r.queue.stats;if(this.request("predict-runtime-type")!=="html5")return;return i=e.Deferred(),this.placeholder=h=new s("Placeholder"),h.connectRuntime({runtimeOrder:"html5"},function(){r._ruid=h.getRuid(),i.resolve()}),i.promise()},_wrapFile:function(e){if(!(e instanceof r)){if(!(e instanceof i)){if(!this._ruid)throw new Error("Can't add external files.");e=new i(this._ruid,e)}e=new r(e)}return e},acceptFile:function(e){var t=!e||!e.size||this.accept&&u.exec(e.name)&&!this.accept.test(e.name);return!t},_addFile:function(e){var t=this;e=t._wrapFile(e);if(!t.owner.trigger("beforeFileQueued",e))return;if(!t.acceptFile(e)){t.owner.trigger("error","Q_TYPE_DENIED",e);return}return t.queue.append(e),t.owner.trigger("fileQueued",e),e},getFile:function(e){return this.queue.getFile(e)},addFile:function(e){var t=this;e.length||(e=[e]),e=o.map(e,function(e){return t._addFile(e)}),t.owner.trigger("filesQueued",e),t.options.auto&&setTimeout(function(){t.request("start-upload")},20)},getStats:function(){return this.stats},removeFile:function(e,t){var n=this;e=e.id?e:n.queue.getFile(e),this.request("cancel-file",e),t&&this.queue.removeFile(e)},getFiles:function(){return this.queue.getFiles.apply(this.queue,arguments)},fetchFile:function(){return this.queue.fetch.apply(this.queue,arguments)},retry:function(e,t){var n=this,r,i,s;if(e){e=e.id?e:n.queue.getFile(e),e.setStatus(a.QUEUED),t||n.request("start-upload");return}r=n.queue.getFiles(a.ERROR),i=0,s=r.length;for(;i<s;i++)e=r[i],e.setStatus(a.QUEUED);n.request("start-upload")},sortFiles:function(){return this.queue.sort.apply(this.queue,arguments)},reset:function(){this.owner.trigger("reset"),this.queue=new n,this.stats=this.queue.stats},destroy:function(){this.reset(),this.placeholder&&this.placeholder.destroy()}})}),t("widgets/runtime",["uploader","runtime/runtime","widgets/widget"],function(e,t){return e.support=function(){return t.hasRuntime.apply(t,arguments)},e.register({name:"runtime",init:function(){if(!this.predictRuntimeType())throw Error("Runtime Error")},predictRuntimeType:function(){var e=this.options.runtimeOrder||t.orders,n=this.type,r,i;if(!n){e=e.split(/\s*,\s*/g);for(r=0,i=e.length;r<i;r++)if(t.hasRuntime(e[r])){this.type=n=e[r];break}}return n}})}),t("lib/transport",["base","runtime/client","mediator"],function(e,t,n){function i(e){var n=this;e=n.options=r.extend(!0,{},i.options,e||{}),t.call(this,"Transport"),this._blob=null,this._formData=e.formData||{},this._headers=e.headers||{},this.on("progress",this._timeout),this.on("load error",function(){n.trigger("progress",1),clearTimeout(n._timer)})}var r=e.$;return i.options={server:"",method:"POST",withCredentials:!1,fileVal:"file",timeout:12e4,formData:{},headers:{},sendAsBinary:!1},r.extend(i.prototype,{appendBlob:function(e,t,n){var r=this,i=r.options;r.getRuid()&&r.disconnectRuntime(),r.connectRuntime(t.ruid,function(){r.exec("init")}),r._blob=t,i.fileVal=e||i.fileVal,i.filename=n||i.filename},append:function(e,t){typeof e=="object"?r.extend(this._formData,e):this._formData[e]=t},setRequestHeader:function(e,t){typeof e=="object"?r.extend(this._headers,e):this._headers[e]=t},send:function(e){this.exec("send",e),this._timeout()},abort:function(){return clearTimeout(this._timer),this.exec("abort")},destroy:function(){this.trigger("destroy"),this.off(),this.exec("destroy"),this.disconnectRuntime()},getResponse:function(){return this.exec("getResponse")},getResponseAsJson:function(){return this.exec("getResponseAsJson")},getStatus:function(){return this.exec("getStatus")},_timeout:function(){var e=this,t=e.options.timeout;if(!t)return;clearTimeout(e._timer),e._timer=setTimeout(function(){e.abort(),e.trigger("error","timeout")},t)}}),n.installTo(i.prototype),i}),t("widgets/upload",["base","uploader","file","lib/transport","widgets/widget"],function(e,t,n,r){function u(e,t){var n=[],r=e.source,i=r.size,s=t?Math.ceil(i/t):1,o=0,u=0,a,f;f={file:e,has:function(){return!!n.length},shift:function(){return n.shift()},unshift:function(e){n.unshift(e)}};while(u<s)a=Math.min(t,i-o),n.push({file:e,start:o,end:t?o+a:i,total:i,chunks:s,chunk:u++,cuted:f}),o+=a;return e.blocks=n.concat(),e.remaning=n.length,f}var i=e.$,s=e.isPromise,o=n.Status;i.extend(t.options,{prepareNextFile:!1,chunked:!1,chunkSize:5242880,chunkRetry:2,threads:3,formData:{}}),t.register({name:"upload",init:function(){var t=this.owner,n=this;this.runing=!1,this.progress=!1,t.on("startUpload",function(){n.progress=!0}).on("uploadFinished",function(){n.progress=!1}),this.pool=[],this.stack=[],this.pending=[],this.remaning=0,this.__tick=e.bindFn(this._tick,this),t.on("uploadComplete",function(e){e.blocks&&i.each(e.blocks,function(e,t){t.transport&&(t.transport.abort(),t.transport.destroy()),delete t.transport}),delete e.blocks,delete e.remaning})},reset:function(){this.request("stop-upload",!0),this.runing=!1,this.pool=[],this.stack=[],this.pending=[],this.remaning=0,this._trigged=!1,this._promise=null},startUpload:function(t){var n=this;i.each(n.request("get-files",o.INVALID),function(){n.request("remove-file",this)});if(t){t=t.id?t:n.request("get-file",t);if(t.getStatus()===o.INTERRUPT)i.each(n.pool,function(e,n){if(n.file!==t)return;n.transport&&n.transport.send()}),t.setStatus(o.QUEUED);else{if(t.getStatus()===o.PROGRESS)return;t.setStatus(o.QUEUED)}}else i.each(n.request("get-files",[o.INITED]),function(){this.setStatus(o.QUEUED)});if(n.runing)return;n.runing=!0;var r=[];i.each(n.pool,function(e,t){var i=t.file;i.getStatus()===o.INTERRUPT&&(r.push(i),n._trigged=!1,t.transport&&t.transport.send())});var t;while(t=r.shift())t.setStatus(o.PROGRESS);t||i.each(n.request("get-files",o.INTERRUPT),function(){this.setStatus(o.PROGRESS)}),n._trigged=!1,e.nextTick(n.__tick),n.owner.trigger("startUpload")},stopUpload:function(t,n){var r=this;t===!0&&(n=t,t=null);if(r.runing===!1)return;if(t){t=t.id?t:r.request("get-file",t);if(t.getStatus()!==o.PROGRESS&&t.getStatus()!==o.QUEUED)return;return t.setStatus(o.INTERRUPT),i.each(r.pool,function(e,n){if(n.file!==t)return;n.transport&&n.transport.abort(),r._putback(n),r._popBlock(n)}),e.nextTick(r.__tick)}r.runing=!1,this._promise&&this._promise.file&&this._promise.file.setStatus(o.INTERRUPT),n&&i.each(r.pool,function(e,t){t.transport&&t.transport.abort(),t.file.setStatus(o.INTERRUPT)}),r.owner.trigger("stopUpload")},cancelFile:function(e){e=e.id?e:this.request("get-file",e),e.blocks&&i.each(e.blocks,function(e,t){var n=t.transport;n&&(n.abort(),n.destroy(),delete t.transport)}),e.setStatus(o.CANCELLED),this.owner.trigger("fileDequeued",e)},isInProgress:function(){return!!this.progress},_getStats:function(){return this.request("get-stats")},skipFile:function(e,t){e=e.id?e:this.request("get-file",e),e.setStatus(t||o.COMPLETE),e.skipped=!0,e.blocks&&i.each(e.blocks,function(e,t){var n=t.transport;n&&(n.abort(),n.destroy(),delete t.transport)}),this.owner.trigger("uploadSkip",e)},_tick:function(){var t=this,n=t.options,r,i;if(t._promise)return t._promise.always(t.__tick);t.pool.length<n.threads&&(i=t._nextBlock())?(t._trigged=!1,r=function(n){t._promise=null,n&&n.file&&t._startSend(n),e.nextTick(t.__tick)},t._promise=s(i)?i.always(r):r(i)):!t.remaning&&!t._getStats().numOfQueue&&!t._getStats().numofInterrupt&&(t.runing=!1,t._trigged||e.nextTick(function(){t.owner.trigger("uploadFinished")}),t._trigged=!0)},_putback:function(e){var t;e.cuted.unshift(e),t=this.stack.indexOf(e.cuted),~t||this.stack.unshift(e.cuted)},_getStack:function(){var e=0,t;while(t=this.stack[e++]){if(t.has()&&t.file.getStatus()===o.PROGRESS)return t;(!t.has()||t.file.getStatus()!==o.PROGRESS&&t.file.getStatus()!==o.INTERRUPT)&&this.stack.splice(--e,1)}return null},_nextBlock:function(){var e=this,t=e.options,n,r,i,o;if(n=this._getStack())return t.prepareNextFile&&!e.pending.length&&e._prepareNextFile(),n.shift();if(e.runing)return!e.pending.length&&e._getStats().numOfQueue&&e._prepareNextFile(),r=e.pending.shift(),i=function(r){return r?(n=u(r,t.chunked?t.chunkSize:0),e.stack.push(n),n.shift()):null},s(r)?(o=r.file,r=r[r.pipe?"pipe":"then"](i),r.file=o,r):i(r)},_prepareNextFile:function(){var e=this,t=e.request("fetch-file"),n=e.pending,r;t&&(r=e.request("before-send-file",t,function(){return t.getStatus()===o.PROGRESS||t.getStatus()===o.INTERRUPT?t:e._finishFile(t)}),e.owner.trigger("uploadStart",t),t.setStatus(o.PROGRESS),r.file=t,r.done(function(){var e=i.inArray(r,n);~e&&n.splice(e,1,t)}),r.fail(function(n){t.setStatus(o.ERROR,n),e.owner.trigger("uploadError",t,n),e.owner.trigger("uploadComplete",t)}),n.push(r))},_popBlock:function(e){var t=i.inArray(e,this.pool);this.pool.splice(t,1),e.file.remaning--,this.remaning--},_startSend:function(t){var n=this,r=t.file,i;if(r.getStatus()!==o.PROGRESS){r.getStatus()===o.INTERRUPT&&n._putback(t);return}n.pool.push(t),n.remaning++,t.blob=t.chunks===1?r.source:r.source.slice(t.start,t.end),i=n.request("before-send",t,function(){r.getStatus()===o.PROGRESS?n._doSend(t):(n._popBlock(t),e.nextTick(n.__tick))}),i.fail(function(){r.remaning===1?n._finishFile(r).always(function(){t.percentage=1,n._popBlock(t),n.owner.trigger("uploadComplete",r),e.nextTick(n.__tick)}):(t.percentage=1,n.updateFileProgress(r),n._popBlock(t),e.nextTick(n.__tick))})},_doSend:function(t){var n=this,s=n.owner,u=n.options,a=t.file,f=new r(u),l=i.extend({},u.formData),c=i.extend({},u.headers),h,p;t.transport=f,f.on("destroy",function(){delete t.transport,n._popBlock(t),e.nextTick(n.__tick)}),f.on("progress",function(e){t.percentage=e,n.updateFileProgress(a)}),h=function(e){var n;return p=f.getResponseAsJson()||{},p._raw=f.getResponse(),n=function(t){e=t},s.trigger("uploadAccept",t,p,n)||(e=e||"server"),e},f.on("error",function(e,n){t.retried=t.retried||0,t.chunks>1&&~"http,abort".indexOf(e)&&t.retried<u.chunkRetry?(t.retried++,f.send()):(!n&&e==="server"&&(e=h(e)),a.setStatus(o.ERROR,e),s.trigger("uploadError",a,e),s.trigger("uploadComplete",a))}),f.on("load",function(){var e;if(e=h()){f.trigger("error",e,!0);return}a.remaning===1?n._finishFile(a,p):f.destroy()}),l=i.extend(l,{id:a.id,name:a.name,type:a.type,lastModifiedDate:a.lastModifiedDate,size:a.size}),t.chunks>1&&i.extend(l,{chunks:t.chunks,chunk:t.chunk}),s.trigger("uploadBeforeSend",t,l,c),f.appendBlob(u.fileVal,t.blob,a.name),f.append(l),f.setRequestHeader(c),f.send()},_finishFile:function(e,t,n){var r=this.owner;return r.request("after-send-file",arguments,function(){e.setStatus(o.COMPLETE),r.trigger("uploadSuccess",e,t,n)}).fail(function(t){e.getStatus()===o.PROGRESS&&e.setStatus(o.ERROR,t),r.trigger("uploadError",e,t)}).always(function(){r.trigger("uploadComplete",e)})},updateFileProgress:function(e){var t=0,n=0;if(!e.blocks)return;i.each(e.blocks,function(e,t){n+=(t.percentage||0)*(t.end-t.start)}),t=n/e.size,this.owner.trigger("uploadProgress",e,t||0)}})}),t("widgets/validator",["base","uploader","file","widgets/widget"],function(e,t,n){var r=e.$,i={},s;return s={addValidator:function(e,t){i[e]=t},removeValidator:function(e){delete i[e]}},t.register({name:"validator",init:function(){var t=this;e.nextTick(function(){r.each(i,function(){this.call(t.owner)})})}}),s.addValidator("fileNumLimit",function(){var e=this,t=e.options,n=0,r=parseInt(t.fileNumLimit,10),i=!0;if(!r)return;e.on("beforeFileQueued",function(e){return n>=r&&i&&(i=!1,this.trigger("error","Q_EXCEED_NUM_LIMIT",r,e),setTimeout(function(){i=!0},1)),n>=r?!1:!0}),e.on("fileQueued",function(){n++}),e.on("fileDequeued",function(){n--}),e.on("reset",function(){n=0})}),s.addValidator("fileSizeLimit",function(){var e=this,t=e.options,n=0,r=parseInt(t.fileSizeLimit,10),i=!0;if(!r)return;e.on("beforeFileQueued",function(e){var t=n+e.size>r;return t&&i&&(i=!1,this.trigger("error","Q_EXCEED_SIZE_LIMIT",r,e),setTimeout(function(){i=!0},1)),t?!1:!0}),e.on("fileQueued",function(e){n+=e.size}),e.on("fileDequeued",function(e){n-=e.size}),e.on("reset",function(){n=0})}),s.addValidator("fileSingleSizeLimit",function(){var e=this,t=e.options,r=t.fileSingleSizeLimit;if(!r)return;e.on("beforeFileQueued",function(e){if(e.size>r)return e.setStatus(n.Status.INVALID,"exceed_size"),this.trigger("error","F_EXCEED_SIZE",r,e),!1})}),s.addValidator("duplicate",function(){function r(e){var t=0,n=0,r=e.length,i;for(;n<r;n++)i=e.charCodeAt(n),t=i+(t<<6)+(t<<16)-t;return t}var e=this,t=e.options,n={};if(t.duplicate)return;e.on("beforeFileQueued",function(e){var t=e.__hash||(e.__hash=r(e.name+e.size+e.lastModifiedDate));if(n[t])return this.trigger("error","F_DUPLICATE",e),!1}),e.on("fileQueued",function(e){var t=e.__hash;t&&(n[t]=!0)}),e.on("fileDequeued",function(e){var t=e.__hash;t&&delete n[t]}),e.on("reset",function(){n={}})}),s}),t("lib/md5",["runtime/client","mediator"],function(e,t){function n(){e.call(this,"Md5")}return t.installTo(n.prototype),n.prototype.loadFromBlob=function(e){var t=this;t.getRuid()&&t.disconnectRuntime(),t.connectRuntime(e.ruid,function(){t.exec("init"),t.exec("loadFromBlob",e)})},n.prototype.getResult=function(){return this.exec("getResult")},n}),t("widgets/md5",["base","uploader","lib/md5","lib/blob","widgets/widget"],function(e,t,n,r){return t.register({name:"md5",md5File:function(t,i,s){var o=new n,u=e.Deferred(),a=t instanceof r?t:this.request("get-file",t).source;return o.on("progress load",function(e){e=e||{},u.notify(e.total?e.loaded/e.total:1)}),o.on("complete",function(){u.resolve(o.getResult())}),o.on("error",function(e){u.reject(e)}),arguments.length>1&&(i=i||0,s=s||0,i<0&&(i=a.size+i),s<0&&(s=a.size+s),s=Math.min(s,a.size),a=a.slice(i,s)),o.loadFromBlob(a),u.promise()}})}),t("runtime/compbase",[],function(){function e(e,t){this.owner=e,this.options=e.options,this.getRuntime=function(){return t},this.getRuid=function(){return t.uid},this.trigger=function(){return e.trigger.apply(e,arguments)}}return e}),t("runtime/html5/runtime",["base","runtime/runtime","runtime/compbase"],function(t,n,r){function o(){var e={},r=this,o=this.destroy;n.apply(r,arguments),r.type=i,r.exec=function(n,i){var o=this,u=o.uid,a=t.slice(arguments,2),f;if(s[n]){f=e[u]=e[u]||new s[n](o,r);if(f[i])return f[i].apply(f,a)}},r.destroy=function(){return o&&o.apply(this,arguments)}}var i="html5",s={};return t.inherits(n,{constructor:o,init:function(){var e=this;setTimeout(function(){e.trigger("ready")},1)}}),o.register=function(e,n){var i=s[e]=t.inherits(r,n);return i},e.Blob&&e.FileReader&&e.DataView&&n.addRuntime(i,o),o}),t("runtime/html5/blob",["runtime/html5/runtime","lib/blob"],function(e,t){return e.register("Blob",{slice:function(e,n){var r=this.owner.source,i=r.slice||r.webkitSlice||r.mozSlice;return r=i.call(r,e,n),new t(this.getRuid(),r)}})}),t("runtime/html5/dnd",["base","runtime/html5/runtime","lib/file"],function(e,t,n){var r=e.$,i="webuploader-dnd-";return t.register("DragAndDrop",{init:function(){var t=this.elem=this.options.container;this.dragEnterHandler=e.bindFn(this._dragEnterHandler,this),this.dragOverHandler=e.bindFn(this._dragOverHandler,this),this.dragLeaveHandler=e.bindFn(this._dragLeaveHandler,this),this.dropHandler=e.bindFn(this._dropHandler,this),this.dndOver=!1,t.on("dragenter",this.dragEnterHandler),t.on("dragover",this.dragOverHandler),t.on("dragleave",this.dragLeaveHandler),t.on("drop",this.dropHandler),this.options.disableGlobalDnd&&(r(document).on("dragover",this.dragOverHandler),r(document).on("drop",this.dropHandler))},_dragEnterHandler:function(e){var t=this,n=t._denied||!1,r;return e=e.originalEvent||e,t.dndOver||(t.dndOver=!0,r=e.dataTransfer.items,r&&r.length&&(t._denied=n=!t.trigger("accept",r)),t.elem.addClass(i+"over"),t.elem[n?"addClass":"removeClass"](i+"denied")),e.dataTransfer.dropEffect=n?"none":"copy",!1},_dragOverHandler:function(e){var t=this.elem.parent().get(0);return t&&!r.contains(t,e.currentTarget)?!1:(clearTimeout(this._leaveTimer),this._dragEnterHandler.call(this,e),!1)},_dragLeaveHandler:function(){var e=this,t;return t=function(){e.dndOver=!1,e.elem.removeClass(i+"over "+i+"denied")},clearTimeout(e._leaveTimer),e._leaveTimer=setTimeout(t,100),!1},_dropHandler:function(e){var t=this,s=t.getRuid(),o=t.elem.parent().get(0),u,a;if(o&&!r.contains(o,e.currentTarget))return!1;e=e.originalEvent||e,u=e.dataTransfer;try{a=u.getData("text/html")}catch(f){}if(a)return;return t._getTansferFiles(u,function(e){t.trigger("drop",r.map(e,function(e){return new n(s,e)}))}),t.dndOver=!1,t.elem.removeClass(i+"over"),!1},_getTansferFiles:function(t,n){var r=[],i=[],s,o,u,a,f,l,c;s=t.items,o=t.files,c=!!s&&!!s[0].webkitGetAsEntry;for(f=0,l=o.length;f<l;f++)u=o[f],a=s&&s[f],c&&a.webkitGetAsEntry().isDirectory?i.push(this._traverseDirectoryTree(a.webkitGetAsEntry(),r)):r.push(u);e.when.apply(e,i).done(function(){if(!r.length)return;n(r)})},_traverseDirectoryTree:function(t,n){var r=e.Deferred(),i=this;return t.isFile?t.file(function(e){n.push(e),r.resolve()}):t.isDirectory&&t.createReader().readEntries(function(t){var s=t.length,o=[],u=[],a;for(a=0;a<s;a++)o.push(i._traverseDirectoryTree(t[a],u));e.when.apply(e,o).then(function(){n.push.apply(n,u),r.resolve()},r.reject)}),r.promise()},destroy:function(){var e=this.elem;if(!e)return;e.off("dragenter",this.dragEnterHandler),e.off("dragover",this.dragOverHandler),e.off("dragleave",this.dragLeaveHandler),e.off("drop",this.dropHandler),this.options.disableGlobalDnd&&(r(document).off("dragover",this.dragOverHandler),r(document).off("drop",this.dropHandler))}})}),t("runtime/html5/filepaste",["base","runtime/html5/runtime","lib/file"],function(e,t,n){return t.register("FilePaste",{init:function(){var t=this.options,n=this.elem=t.container,r=".*",i,s,o,u;if(t.accept){i=[];for(s=0,o=t.accept.length;s<o;s++)u=t.accept[s].mimeTypes,u&&i.push(u);i.length&&(r=i.join(","),r=r.replace(/,/g,"|").replace(/\*/g,".*"))}this.accept=r=new RegExp(r,"i"),this.hander=e.bindFn(this._pasteHander,this),n.on("paste",this.hander)},_pasteHander:function(e){var t=[],r=this.getRuid(),i,s,o,u,a;e=e.originalEvent||e,i=e.clipboardData.items;for(u=0,a=i.length;u<a;u++){s=i[u];if(s.kind!=="file"||!(o=s.getAsFile()))continue;t.push(new n(r,o))}t.length&&(e.preventDefault(),e.stopPropagation(),this.trigger("paste",t))},destroy:function(){this.elem.off("paste",this.hander)}})}),t("runtime/html5/filepicker",["base","runtime/html5/runtime"],function(e,t){var n=e.$;return t.register("FilePicker",{init:function(){var e=this.getRuntime().getContainer(),t=this,r=t.owner,i=t.options,s=this.label=n(document.createElement("label")),o=this.input=n(document.createElement("input")),u,a,f,l;o.attr("type","file"),o.attr("name",i.name),o.addClass("webuploader-element-invisible"),s.on("click",function(){o.trigger("click")}),s.css({opacity:0,width:"100%",height:"100%",display:"block",cursor:"pointer",background:"#ffffff"}),i.multiple&&o.attr("multiple","multiple");if(i.accept&&i.accept.length>0){u=[];for(a=0,f=i.accept.length;a<f;a++)u.push(i.accept[a].mimeTypes);o.attr("accept",u.join(","))}e.append(o),e.append(s),l=function(e){r.trigger(e.type)},o.on("change",function(e){var i=arguments.callee,s;t.files=e.target.files,s=this.cloneNode(!0),s.value=null,this.parentNode.replaceChild(s,this),o.off(),o=n(s).on("change",i).on("mouseenter mouseleave",l),r.trigger("change")}),s.on("mouseenter mouseleave",l)},getFiles:function(){return this.files},destroy:function(){this.input.off(),this.label.off()}})}),t("runtime/html5/util",["base"],function(t){var n=e.createObjectURL&&e||e.URL&&URL.revokeObjectURL&&URL||e.webkitURL,r=t.noop,i=r;return n&&(r=function(){return n.createObjectURL.apply(n,arguments)},i=function(){return n.revokeObjectURL.apply(n,arguments)}),{createObjectURL:r,revokeObjectURL:i,dataURL2Blob:function(e){var t,n,r,i,s,o;o=e.split(","),~o[0].indexOf("base64")?t=atob(o[1]):t=decodeURIComponent(o[1]),r=new ArrayBuffer(t.length),n=new Uint8Array(r);for(i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return s=o[0].split(":")[1].split(";")[0],this.arrayBufferToBlob(r,s)},dataURL2ArrayBuffer:function(e){var t,n,r,i;i=e.split(","),~i[0].indexOf("base64")?t=atob(i[1]):t=decodeURIComponent(i[1]),n=new Uint8Array(t.length);for(r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n.buffer},arrayBufferToBlob:function(t,n){var r=e.BlobBuilder||e.WebKitBlobBuilder,i;return r?(i=new r,i.append(t),i.getBlob(n)):new Blob([t],n?{type:n}:{})},canvasToDataUrl:function(e,t,n){return e.toDataURL(t,n/100)},parseMeta:function(e,t){t(!1,{})},updateImageHead:function(e){return e}}}),t("runtime/html5/imagemeta",["runtime/html5/util"],function(e){var t;return t={parsers:{65505:[]},maxMetaDataSize:262144,parse:function(e,t){var n=this,r=new FileReader;r.onload=function(){t(!1,n._parse(this.result)),r=r.onload=r.onerror=null},r.onerror=function(e){t(e.message),r=r.onload=r.onerror=null},e=e.slice(0,n.maxMetaDataSize),r.readAsArrayBuffer(e.getSource())},_parse:function(e,n){if(e.byteLength<6)return;var r=new DataView(e),i=2,s=r.byteLength-4,o=i,u={},a,f,l,c;if(r.getUint16(0)===65496){while(i<s){a=r.getUint16(i);if(!(a>=65504&&a<=65519||a===65534))break;f=r.getUint16(i+2)+2;if(i+f>r.byteLength)break;l=t.parsers[a];if(!n&&l)for(c=0;c<l.length;c+=1)l[c].call(t,r,i,f,u);i+=f,o=i}o>6&&(e.slice?u.imageHead=e.slice(2,o):u.imageHead=(new Uint8Array(e)).subarray(2,o))}return u},updateImageHead:function(e,t){var n=this._parse(e,!0),r,i,s;return s=2,n.imageHead&&(s=2+n.imageHead.byteLength),e.slice?i=e.slice(s):i=(new Uint8Array(e)).subarray(s),r=new Uint8Array(t.byteLength+2+i.byteLength),r[0]=255,r[1]=216,r.set(new Uint8Array(t),2),r.set(new Uint8Array(i),t.byteLength+2),r.buffer}},e.parseMeta=function(){return t.parse.apply(t,arguments)},e.updateImageHead=function(){return t.updateImageHead.apply(t,arguments)},t}),t("runtime/html5/imagemeta/exif",["base","runtime/html5/imagemeta"],function(e,t){var n={};return n.ExifMap=function(){return this},n.ExifMap.prototype.map={Orientation:274},n.ExifMap.prototype.get=function(e){return this[e]||this[this.map[e]]},n.exifTagTypes={1:{getValue:function(e,t){return e.getUint8(t)},size:1},2:{getValue:function(e,t){return String.fromCharCode(e.getUint8(t))},size:1,ascii:!0},3:{getValue:function(e,t,n){return e.getUint16(t,n)},size:2},4:{getValue:function(e,t,n){return e.getUint32(t,n)},size:4},5:{getValue:function(e,t,n){return e.getUint32(t,n)/e.getUint32(t+4,n)},size:8},9:{getValue:function(e,t,n){return e.getInt32(t,n)},size:4},10:{getValue:function(e,t,n){return e.getInt32(t,n)/e.getInt32(t+4,n)},size:8}},n.exifTagTypes[7]=n.exifTagTypes[1],n.getExifValue=function(t,r,i,s,o,u){var a=n.exifTagTypes[s],f,l,c,h,p,d;if(!a){e.log("Invalid Exif data: Invalid tag type.");return}f=a.size*o,l=f>4?r+t.getUint32(i+8,u):i+8;if(l+f>t.byteLength){e.log("Invalid Exif data: Invalid data offset.");return}if(o===1)return a.getValue(t,l,u);c=[];for(h=0;h<o;h+=1)c[h]=a.getValue(t,l+h*a.size,u);if(a.ascii){p="";for(h=0;h<c.length;h+=1){d=c[h];if(d==="\0")break;p+=d}return p}return c},n.parseExifTag=function(e,t,r,i,s){var o=e.getUint16(r,i);s.exif[o]=n.getExifValue(e,t,r,e.getUint16(r+2,i),e.getUint32(r+4,i),i)},n.parseExifTags=function(t,n,r,i,s){var o,u,a;if(r+6>t.byteLength){e.log("Invalid Exif data: Invalid directory offset.");return}o=t.getUint16(r,i),u=r+2+12*o;if(u+4>t.byteLength){e.log("Invalid Exif data: Invalid directory size.");return}for(a=0;a<o;a+=1)this.parseExifTag(t,n,r+2+12*a,i,s);return t.getUint32(u,i)},n.parseExifData=function(t,r,i,s){var o=r+10,u,a;if(t.getUint32(r+4)!==1165519206)return;if(o+8>t.byteLength){e.log("Invalid Exif data: Invalid segment size.");return}if(t.getUint16(r+8)!==0){e.log("Invalid Exif data: Missing byte alignment offset.");return}switch(t.getUint16(o)){case 18761:u=!0;break;case 19789:u=!1;break;default:e.log("Invalid Exif data: Invalid byte alignment marker.");return}if(t.getUint16(o+2,u)!==42){e.log("Invalid Exif data: Missing TIFF marker.");return}a=t.getUint32(o+4,u),s.exif=new n.ExifMap,a=n.parseExifTags(t,o,o+a,u,s)},t.parsers[65505].push(n.parseExifData),n}),t("runtime/html5/jpegencoder",[],function(e,t,n){function r(e){function P(e){var t=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99];for(var n=0;n<64;n++){var a=r((t[n]*e+50)/100);a<1?a=1:a>255&&(a=255),i[N[n]]=a}var f=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99];for(var l=0;l<64;l++){var c=r((f[l]*e+50)/100);c<1?c=1:c>255&&(c=255),s[N[l]]=c}var h=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],p=0;for(var d=0;d<8;d++)for(var v=0;v<8;v++)o[p]=1/(i[N[p]]*h[d]*h[v]*8),u[p]=1/(s[N[p]]*h[d]*h[v]*8),p++}function H(e,t){var n=0,r=0,i=new Array;for(var s=1;s<=16;s++){for(var o=1;o<=e[s];o++)i[t[r]]=[],i[t[r]][0]=n,i[t[r]][1]=s,r++,n++;n*=2}return i}function B(){a=H(C,k),f=H(O,M),l=H(L,A),c=H(_,D)}function j(){var e=1,t=2;for(var n=1;n<=15;n++){for(var r=e;r<t;r++)p[32767+r]=n,h[32767+r]=[],h[32767+r][1]=n,h[32767+r][0]=r;for(var i=-(t-1);i<=-e;i++)p[32767+i]=n,h[32767+i]=[],h[32767+i][1]=n,h[32767+i][0]=t-1+i;e<<=1,t<<=1}}function F(){for(var e=0;e<256;e++)x[e]=19595*e,x[e+256>>0]=38470*e,x[e+512>>0]=7471*e+32768,x[e+768>>0]=-11059*e,x[e+1024>>0]=-21709*e,x[e+1280>>0]=32768*e+8421375,x[e+1536>>0]=-27439*e,x[e+1792>>0]=-5329*e}function I(e){var t=e[0],n=e[1]-1;while(n>=0)t&1<<n&&(g|=1<<y),n--,y--,y<0&&(g==255?(q(255),q(0)):q(g),y=7,g=0)}function q(e){m.push(S[e])}function R(e){q(e>>8&255),q(e&255)}function U(e,t){var n,r,i,s,o,u,a,f,l=0,c,h=8,p=64;for(c=0;c<h;++c){n=e[l],r=e[l+1],i=e[l+2],s=e[l+3],o=e[l+4],u=e[l+5],a=e[l+6],f=e[l+7];var v=n+f,m=n-f,g=r+a,y=r-a,b=i+u,w=i-u,E=s+o,S=s-o,x=v+E,T=v-E,N=g+b,C=g-b;e[l]=x+N,e[l+4]=x-N;var k=(C+T)*.707106781;e[l+2]=T+k,e[l+6]=T-k,x=S+w,N=w+y,C=y+m;var L=(x-C)*.382683433,A=.5411961*x+L,O=1.306562965*C+L,M=N*.707106781,_=m+M,D=m-M;e[l+5]=D+A,e[l+3]=D-A,e[l+1]=_+O,e[l+7]=_-O,l+=8}l=0;for(c=0;c<h;++c){n=e[l],r=e[l+8],i=e[l+16],s=e[l+24],o=e[l+32],u=e[l+40],a=e[l+48],f=e[l+56];var P=n+f,H=n-f,B=r+a,j=r-a,F=i+u,I=i-u,q=s+o,R=s-o,U=P+q,z=P-q,W=B+F,X=B-F;e[l]=U+W,e[l+32]=U-W;var V=(X+z)*.707106781;e[l+16]=z+V,e[l+48]=z-V,U=R+I,W=I+j,X=j+H;var $=(U-X)*.382683433,J=.5411961*U+$,K=1.306562965*X+$,Q=W*.707106781,G=H+Q,Y=H-Q;e[l+40]=Y+J,e[l+24]=Y-J,e[l+8]=G+K,e[l+56]=G-K,l++}var Z;for(c=0;c<p;++c)Z=e[c]*t[c],d[c]=Z>0?Z+.5|0:Z-.5|0;return d}function z(){R(65504),R(16),q(74),q(70),q(73),q(70),q(0),q(1),q(1),q(0),R(1),R(1),q(0),q(0)}function W(e,t){R(65472),R(17),q(8),R(t),R(e),q(3),q(1),q(17),q(0),q(2),q(17),q(1),q(3),q(17),q(1)}function X(){R(65499),R(132),q(0);for(var e=0;e<64;e++)q(i[e]);q(1);for(var t=0;t<64;t++)q(s[t])}function V(){R(65476),R(418),q(0);for(var e=0;e<16;e++)q(C[e+1]);for(var t=0;t<=11;t++)q(k[t]);q(16);for(var n=0;n<16;n++)q(L[n+1]);for(var r=0;r<=161;r++)q(A[r]);q(1);for(var i=0;i<16;i++)q(O[i+1]);for(var s=0;s<=11;s++)q(M[s]);q(17);for(var o=0;o<16;o++)q(_[o+1]);for(var u=0;u<=161;u++)q(D[u])}function $(){R(65498),R(12),q(3),q(1),q(0),q(2),q(17),q(3),q(17),q(0),q(63),q(0)}function J(e,t,n,r,i){var s=i[0],o=i[240],u,a=16,f=63,l=64,c=U(e,t);for(var d=0;d<l;++d)v[N[d]]=c[d];var m=v[0]-n;n=v[0],m==0?I(r[0]):(u=32767+m,I(r[p[u]]),I(h[u]));var g=63;for(;g>0&&v[g]==0;g--);if(g==0)return I(s),n;var y=1,b;while(y<=g){var w=y;for(;v[y]==0&&y<=g;++y);var E=y-w;if(E>=a){b=E>>4;for(var S=1;S<=b;++S)I(o);E&=15}u=32767+v[y],I(i[(E<<4)+p[u]]),I(h[u]),y++}return g!=f&&I(s),n}function K(){var e=String.fromCharCode;for(var t=0;t<256;t++)S[t]=e(t)}function Q(e){e<=0&&(e=1),e>100&&(e=100);if(T==e)return;var t=0;e<50?t=Math.floor(5e3/e):t=Math.floor(200-e*2),P(t),T=e}function G(){e||(e=50),K(),B(),j(),F(),Q(e)}var t=this,n=Math.round,r=Math.floor,i=new Array(64),s=new Array(64),o=new Array(64),u=new Array(64),a,f,l,c,h=new Array(65535),p=new Array(65535),d=new Array(64),v=new Array(64),m=[],g=0,y=7,b=new Array(64),w=new Array(64),E=new Array(64),S=new Array(256),x=new Array(2048),T,N=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],C=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],k=[0,1,2,3,4,5,6,7,8,9,10,11],L=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],A=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],O=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],M=[0,1,2,3,4,5,6,7,8,9,10,11],_=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],D=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];this.encode=function(e,t){t&&Q(t),m=new Array,g=0,y=7,R(65496),z(),X(),W(e.width,e.height),V(),$();var n=0,r=0,i=0;g=0,y=7,this.encode.displayName="_encode_";var s=e.data,h=e.width,p=e.height,d=h*4,v=h*3,S,T=0,N,C,k,L,A,O,M,_;while(T<p){S=0;while(S<d){L=d*T+S,A=L,O=-1,M=0;for(_=0;_<64;_++)M=_>>3,O=(_&7)*4,A=L+M*d+O,T+M>=p&&(A-=d*(T+1+M-p)),S+O>=d&&(A-=S+O-d+4),N=s[A++],C=s[A++],k=s[A++],b[_]=(x[N]+x[C+256>>0]+x[k+512>>0]>>16)-128,w[_]=(x[N+768>>0]+x[C+1024>>0]+x[k+1280>>0]>>16)-128,E[_]=(x[N+1280>>0]+x[C+1536>>0]+x[k+1792>>0]>>16)-128;n=J(b,o,n,a,l),r=J(w,u,r,f,c),i=J(E,u,i,f,c),S+=32}T+=8}if(y>=0){var D=[];D[1]=y+1,D[0]=(1<<y+1)-1,I(D)}R(65497);var P="data:image/jpeg;base64,"+btoa(m.join(""));return m=[],P},G()}return r.encode=function(e,t){var n=new r(t);return n.encode(e)},r}),t("runtime/html5/androidpatch",["runtime/html5/util","runtime/html5/jpegencoder","base"],function(e,t,n){var r=e.canvasToDataUrl,i;e.canvasToDataUrl=function(e,s,o){var u,a,f,l,c;return n.os.android?(s==="image/jpeg"&&typeof i=="undefined"&&(l=r.apply(null,arguments),c=l.split(","),~c[0].indexOf("base64")?l=atob(c[1]):l=decodeURIComponent(c[1]),l=l.substring(0,2),i=l.charCodeAt(0)===255&&l.charCodeAt(1)===216),s==="image/jpeg"&&!i?(a=e.width,f=e.height,u=e.getContext("2d"),t.encode(u.getImageData(0,0,a,f),o)):r.apply(null,arguments)):r.apply(null,arguments)}}),t("runtime/html5/image",["base","runtime/html5/runtime","runtime/html5/util"],function(e,t,n){var r="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D";return t.register("Image",{modified:!1,init:function(){var e=this,t=new Image;t.onload=function(){e._info={type:e.type,width:this.width,height:this.height},!e._metas&&"image/jpeg"===e.type?n.parseMeta(e._blob,function(t,n){e._metas=n,e.owner.trigger("load")}):e.owner.trigger("load")},t.onerror=function(){e.owner.trigger("error")},e._img=t},loadFromBlob:function(e){var t=this,r=t._img;t._blob=e,t.type=e.type,r.src=n.createObjectURL(e.getSource()),t.owner.once("load",function(){n.revokeObjectURL(r.src)})},resize:function(e,t){var n=this._canvas||(this._canvas=document.createElement("canvas"));this._resize(this._img,n,e,t),this._blob=null,this.modified=!0,this.owner.trigger("complete","resize")},crop:function(e,t,n,r,i){var s=this._canvas||(this._canvas=document.createElement("canvas")),o=this.options,u=this._img,a=u.naturalWidth,f=u.naturalHeight,l=this.getOrientation();i=i||1,s.width=n,s.height=r,o.preserveHeaders||this._rotate2Orientaion(s,l),this._renderImageToCanvas(s,u,-e,-t,a*i,f*i),this._blob=null,this.modified=!0,this.owner.trigger("complete","crop")},getAsBlob:function(e){var t=this._blob,r=this.options,i;e=e||this.type;if(this.modified||this.type!==e){i=this._canvas;if(e==="image/jpeg"){t=n.canvasToDataUrl(i,e,r.quality);if(r.preserveHeaders&&this._metas&&this._metas.imageHead)return t=n.dataURL2ArrayBuffer(t),t=n.updateImageHead(t,this._metas.imageHead),t=n.arrayBufferToBlob(t,e),t}else t=n.canvasToDataUrl(i,e);t=n.dataURL2Blob(t)}return t},getAsDataUrl:function(e){var t=this.options;return e=e||this.type,e==="image/jpeg"?n.canvasToDataUrl(this._canvas,e,t.quality):this._canvas.toDataURL(e)},getOrientation:function(){return this._metas&&this._metas.exif&&this._metas.exif.get("Orientation")||1},info:function(e){return e?(this._info=e,this):this._info},meta:function(e){return e?(this._meta=e,this):this._meta},destroy:function(){var e=this._canvas;this._img.onload=null,e&&(e.getContext("2d").clearRect(0,0,e.width,e.height),e.width=e.height=0,this._canvas=null),this._img.src=r,this._img=this._blob=null},_resize:function(e,t,n,r){var i=this.options,s=e.width,o=e.height,u=this.getOrientation(),a,f,l,c,h;~[5,6,7,8].indexOf(u)&&(n^=r,r^=n,n^=r),a=Math[i.crop?"max":"min"](n/s,r/o),i.allowMagnify||(a=Math.min(1,a)),f=s*a,l=o*a,i.crop?(t.width=n,t.height=r):(t.width=f,t.height=l),c=(t.width-f)/2,h=(t.height-l)/2,i.preserveHeaders||this._rotate2Orientaion(t,u),this._renderImageToCanvas(t,e,c,h,f,l)},_rotate2Orientaion:function(e,t){var n=e.width,r=e.height,i=e.getContext("2d");switch(t){case 5:case 6:case 7:case 8:e.width=r,e.height=n}switch(t){case 2:i.translate(n,0),i.scale(-1,1);break;case 3:i.translate(n,r),i.rotate(Math.PI);break;case 4:i.translate(0,r),i.scale(1,-1);break;case 5:i.rotate(.5*Math.PI),i.scale(1,-1);break;case 6:i.rotate(.5*Math.PI),i.translate(0,-r);break;case 7:i.rotate(.5*Math.PI),i.translate(n,-r),i.scale(-1,1);break;case 8:i.rotate(-0.5*Math.PI),i.translate(-n,0)}},_renderImageToCanvas:function(){function t(e,t,n){var r=document.createElement("canvas"),i=r.getContext("2d"),s=0,o=n,u=n,a,f,l;r.width=1,r.height=n,i.drawImage(e,0,0),a=i.getImageData(0,0,1,n).data;while(u>s)f=a[(u-1)*4+3],f===0?o=u:s=u,u=o+s>>1;return l=u/n,l===0?1:l}function n(e){var t=e.naturalWidth,n=e.naturalHeight,r,i;return t*n>1048576?(r=document.createElement("canvas"),r.width=r.height=1,i=r.getContext("2d"),i.drawImage(e,-t+1,0),i.getImageData(0,0,1,1).data[3]===0):!1}return e.os.ios?e.os.ios>=7?function(e,n,r,i,s,o){var u=n.naturalWidth,a=n.naturalHeight,f=t(n,u,a);return e.getContext("2d").drawImage(n,0,0,u*f,a*f,r,i,s,o)}:function(e,r,i,s,o,u){var a=r.naturalWidth,f=r.naturalHeight,l=e.getContext("2d"),c=n(r),h=this.type==="image/jpeg",p=1024,d=0,v=0,m,g,y,b,w,E,S;c&&(a/=2,f/=2),l.save(),m=document.createElement("canvas"),m.width=m.height=p,g=m.getContext("2d"),y=h?t(r,a,f):1,b=Math.ceil(p*o/a),w=Math.ceil(p*u/f/y);while(d<f){E=0,S=0;while(E<a)g.clearRect(0,0,p,p),g.drawImage(r,-E,-d),l.drawImage(m,0,0,p,p,i+S,s+v,b,w),E+=p,S+=b;d+=p,v+=w}l.restore(),m=g=null}:function(t){var n=e.slice(arguments,1),r=t.getContext("2d");r.drawImage.apply(r,n)}}()})}),t("runtime/html5/transport",["base","runtime/html5/runtime"],function(e,t){var n=e.noop,r=e.$;return t.register("Transport",{init:function(){this._status=0,this._response=null},send:function(){var t=this.owner,n=this.options,i=this._initAjax(),s=t._blob,o=n.server,u,a,f;n.sendAsBinary?(o+=(/\?/.test(o)?"&":"?")+r.param(t._formData),a=s.getSource()):(u=new FormData,r.each(t._formData,function(e,t){u.append(e,t)}),u.append(n.fileVal,s.getSource(),n.filename||t._formData.name||"")),n.withCredentials&&"withCredentials"in i?(i.open(n.method,o,!0),i.withCredentials=!0):i.open(n.method,o),this._setRequestHeader(i,n.headers),a?(i.overrideMimeType&&i.overrideMimeType("application/octet-stream"),e.os.android?(f=new FileReader,f.onload=function(){i.send(this.result),f=f.onload=null},f.readAsArrayBuffer(a)):i.send(a)):i.send(u)},getResponse:function(){return this._response},getResponseAsJson:function(){return this._parseJson(this._response)},getStatus:function(){return this._status},abort:function(){var e=this._xhr;e&&(e.upload.onprogress=n,e.onreadystatechange=n,e.abort(),this._xhr=e=null)},destroy:function(){this.abort()},_initAjax:function(){var e=this,t=new XMLHttpRequest,r=this.options;return r.withCredentials&&!("withCredentials"in t)&&typeof XDomainRequest!="undefined"&&(t=new XDomainRequest),t.upload.onprogress=function(t){var n=0;return t.lengthComputable&&(n=t.loaded/t.total),e.trigger("progress",n)},t.onreadystatechange=function(){if(t.readyState!==4)return;return t.upload.onprogress=n,t.onreadystatechange=n,e._xhr=null,e._status=t.status,t.status>=200&&t.status<300?(e._response=t.responseText,e.trigger("load")):t.status>=500&&t.status<600?(e._response=t.responseText,e.trigger("error","server")):e.trigger("error",e._status?"http":"abort")},e._xhr=t,t},_setRequestHeader:function(e,t){r.each(t,function(t,n){e.setRequestHeader(t,n)})},_parseJson:function(e){var t;try{t=JSON.parse(e)}catch(n){t={}}return t}})}),t("runtime/html5/md5",["runtime/html5/runtime"],function(e){var t=function(e,t){return e+t&4294967295},n=function(e,n,r,i,s,o){return n=t(t(n,e),t(i,o)),t(n<<s|n>>>32-s,r)},r=function(e,t,r,i,s,o,u){return n(t&r|~t&i,e,t,s,o,u)},i=function(e,t,r,i,s,o,u){return n(t&i|r&~i,e,t,s,o,u)},s=function(e,t,r,i,s,o,u){return n(t^r^i,e,t,s,o,u)},o=function(e,t,r,i,s,o,u){return n(r^(t|~i),e,t,s,o,u)},u=function(e,n){var u=e[0],a=e[1],f=e[2],l=e[3];u=r(u,a,f,l,n[0],7,-680876936),l=r(l,u,a,f,n[1],12,-389564586),f=r(f,l,u,a,n[2],17,606105819),a=r(a,f,l,u,n[3],22,-1044525330),u=r(u,a,f,l,n[4],7,-176418897),l=r(l,u,a,f,n[5],12,1200080426),f=r(f,l,u,a,n[6],17,-1473231341),a=r(a,f,l,u,n[7],22,-45705983),u=r(u,a,f,l,n[8],7,1770035416),l=r(l,u,a,f,n[9],12,-1958414417),f=r(f,l,u,a,n[10],17,-42063),a=r(a,f,l,u,n[11],22,-1990404162),u=r(u,a,f,l,n[12],7,1804603682),l=r(l,u,a,f,n[13],12,-40341101),f=r(f,l,u,a,n[14],17,-1502002290),a=r(a,f,l,u,n[15],22,1236535329),u=i(u,a,f,l,n[1],5,-165796510),l=i(l,u,a,f,n[6],9,-1069501632),f=i(f,l,u,a,n[11],14,643717713),a=i(a,f,l,u,n[0],20,-373897302),u=i(u,a,f,l,n[5],5,-701558691),l=i(l,u,a,f,n[10],9,38016083),f=i(f,l,u,a,n[15],14,-660478335),a=i(a,f,l,u,n[4],20,-405537848),u=i(u,a,f,l,n[9],5,568446438),l=i(l,u,a,f,n[14],9,-1019803690),f=i(f,l,u,a,n[3],14,-187363961),a=i(a,f,l,u,n[8],20,1163531501),u=i(u,a,f,l,n[13],5,-1444681467),l=i(l,u,a,f,n[2],9,-51403784),f=i(f,l,u,a,n[7],14,1735328473),a=i(a,f,l,u,n[12],20,-1926607734),u=s(u,a,f,l,n[5],4,-378558),l=s(l,u,a,f,n[8],11,-2022574463),f=s(f,l,u,a,n[11],16,1839030562),a=s(a,f,l,u,n[14],23,-35309556),u=s(u,a,f,l,n[1],4,-1530992060),l=s(l,u,a,f,n[4],11,1272893353),f=s(f,l,u,a,n[7],16,-155497632),a=s(a,f,l,u,n[10],23,-1094730640),u=s(u,a,f,l,n[13],4,681279174),l=s(l,u,a,f,n[0],11,-358537222),f=s(f,l,u,a,n[3],16,-722521979),a=s(a,f,l,u,n[6],23,76029189),u=s(u,a,f,l,n[9],4,-640364487),l=s(l,u,a,f,n[12],11,-421815835),f=s(f,l,u,a,n[15],16,530742520),a=s(a,f,l,u,n[2],23,-995338651),u=o(u,a,f,l,n[0],6,-198630844),l=o(l,u,a,f,n[7],10,1126891415),f=o(f,l,u,a,n[14],15,-1416354905),a=o(a,f,l,u,n[5],21,-57434055),u=o(u,a,f,l,n[12],6,1700485571),l=o(l,u,a,f,n[3],10,-1894986606),f=o(f,l,u,a,n[10],15,-1051523),a=o(a,f,l,u,n[1],21,-2054922799),u=o(u,a,f,l,n[8],6,1873313359),l=o(l,u,a,f,n[15],10,-30611744),f=o(f,l,u,a,n[6],15,-1560198380),a=o(a,f,l,u,n[13],21,1309151649),u=o(u,a,f,l,n[4],6,-145523070),l=o(l,u,a,f,n[11],10,-1120210379),f=o(f,l,u,a,n[2],15,718787259),a=o(a,f,l,u,n[9],21,-343485551),e[0]=t(u,e[0]),e[1]=t(a,e[1]),e[2]=t(f,e[2]),e[3]=t(l,e[3])},a=function(e){var t=[],n;for(n=0;n<64;n+=4)t[n>>2]=e.charCodeAt(n)+(e.charCodeAt(n+1)<<8)+(e.charCodeAt(n+2)<<16)+(e.charCodeAt(n+3)<<24);return t},f=function(e){var t=[],n;for(n=0;n<64;n+=4)t[n>>2]=e[n]+(e[n+1]<<8)+(e[n+2]<<16)+(e[n+3]<<24);return t},l=function(e){var t=e.length,n=[1732584193,-271733879,-1732584194,271733878],r,i,s,o,f,l;for(r=64;r<=t;r+=64)u(n,a(e.substring(r-64,r)));e=e.substring(r-64),i=e.length,s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(r=0;r<i;r+=1)s[r>>2]|=e.charCodeAt(r)<<(r%4<<3);s[r>>2]|=128<<(r%4<<3);if(r>55){u(n,s);for(r=0;r<16;r+=1)s[r]=0}return o=t*8,o=o.toString(16).match(/(.*?)(.{0,8})$/),f=parseInt(o[2],16),l=parseInt(o[1],16)||0,s[14]=f,s[15]=l,u(n,s),n},c=function(e){var t=e.length,n=[1732584193,-271733879,-1732584194,271733878],r,i,s,o,a,l;for(r=64;r<=t;r+=64)u(n,f(e.subarray(r-64,r)));e=r-64<t?e.subarray(r-64):new Uint8Array(0),i=e.length,s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(r=0;r<i;r+=1)s[r>>2]|=e[r]<<(r%4<<3);s[r>>2]|=128<<(r%4<<3);if(r>55){u(n,s);for(r=0;r<16;r+=1)s[r]=0}return o=t*8,o=o.toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(o[2],16),l=parseInt(o[1],16)||0,s[14]=a,s[15]=l,u(n,s),n},h=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],p=function(e){var t="",n;for(n=0;n<4;n+=1)t+=h[e>>n*8+4&15]+h[e>>n*8&15];return t},d=function(e){var t;for(t=0;t<e.length;t+=1)e[t]=p(e[t]);return e.join("")},v=function(e){return d(l(e))},m=function(){this.reset()};return v("hello")!=="5d41402abc4b2a76b9719d911017c592"&&(t=function(e,t){var n=(e&65535)+(t&65535),r=(e>>16)+(t>>16)+(n>>16);return r<<16|n&65535}),m.prototype.append=function(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),this.appendBinary(e),this},m.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t=this._buff.length,n;for(n=64;n<=t;n+=64)u(this._state,a(this._buff.substring(n-64,n)));return this._buff=this._buff.substr(n-64),this},m.prototype.end=function(e){var t=this._buff,n=t.length,r,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],s;for(r=0;r<n;r+=1)i[r>>2]|=t.charCodeAt(r)<<(r%4<<3);return this._finish(i,n),s=e?this._state:d(this._state),this.reset(),s},m.prototype._finish=function(e,t){var n=t,r,i,s;e[n>>2]|=128<<(n%4<<3);if(n>55){u(this._state,e);for(n=0;n<16;n+=1)e[n]=0}r=this._length*8,r=r.toString(16).match(/(.*?)(.{0,8})$/),i=parseInt(r[2],16),s=parseInt(r[1],16)||0,e[14]=i,e[15]=s,u(this._state,e)},m.prototype.reset=function(){return this._buff="",this._length=0,this._state=[1732584193,-271733879,-1732584194,271733878],this},m.prototype.destroy=function(){delete this._state,delete this._buff,delete this._length},m.hash=function(e,t){/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e)));var n=l(e);return t?n:d(n)},m.hashBinary=function(e,t){var n=l(e);return t?n:d(n)},m.ArrayBuffer=function(){this.reset()},m.ArrayBuffer.prototype.append=function(e){var t=this._concatArrayBuffer(this._buff,e),n=t.length,r;this._length+=e.byteLength;for(r=64;r<=n;r+=64)u(this._state,f(t.subarray(r-64,r)));return this._buff=r-64<n?t.subarray(r-64):new Uint8Array(0),this},m.ArrayBuffer.prototype.end=function(e){var t=this._buff,n=t.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i,s;for(i=0;i<n;i+=1)r[i>>2]|=t[i]<<(i%4<<3);return this._finish(r,n),s=e?this._state:d(this._state),this.reset(),s},m.ArrayBuffer.prototype._finish=m.prototype._finish,m.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._state=[1732584193,-271733879,-1732584194,271733878],this},m.ArrayBuffer.prototype.destroy=m.prototype.destroy,m.ArrayBuffer.prototype._concatArrayBuffer=function(e,t){var n=e.length,r=new Uint8Array(n+t.byteLength);return r.set(e),r.set(new Uint8Array(t),n),r},m.ArrayBuffer.hash=function(e,t){var n=c(new Uint8Array(e));return t?n:d(n)},e.register("Md5",{init:function(){},loadFromBlob:function(e){var t=e.getSource(),n=2097152,r=Math.ceil(t.size/n),i=0,s=this.owner,o=new m.ArrayBuffer,u=this,a=t.mozSlice||t.webkitSlice||t.slice,f,l;l=new FileReader,f=function(){var c,h;c=i*n,h=Math.min(c+n,t.size),l.onload=function(t){o.append(t.target.result),s.trigger("progress",{total:e.size,loaded:h})},l.onloadend=function(){l.onloadend=l.onload=null,++i<r?setTimeout(f,1):setTimeout(function(){s.trigger("load"),u.result=o.end(),f=e=t=o=null,s.trigger("complete")},50)},l.readAsArrayBuffer(a.call(t,c,h))},f()},getResult:function(){return this.result}})}),t("runtime/flash/runtime",["base","runtime/runtime","runtime/compbase"],function(t,n,r){function u(){var e;try{e=navigator.plugins["Shockwave Flash"],e=e.description}catch(t){try{e=(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version")}catch(n){e="0.0"}}return e=e.match(/\d+/g),parseFloat(e[0]+"."+e[1],10)}function a(){function l(e,t){var n=e.type||e,r,s;r=n.split("::"),s=r[0],n=r[1],n==="Ready"&&s===a.uid?a.trigger("ready"):i[s]&&i[s].trigger(n.toLowerCase(),e,t)}var r={},i={},u=this.destroy,a=this,f=t.guid("webuploader_");n.apply(a,arguments),a.type=s,a.exec=function(e,n){var s=this,u=s.uid,f=t.slice(arguments,2),l;i[u]=s;if(o[e]){r[u]||(r[u]=new o[e](s,a)),l=r[u];if(l[n])return l[n].apply(l,f)}return a.flashExec.apply(s,arguments)},e[f]=function(){var e=arguments;setTimeout(function(){l.apply(null,e)},1)},this.jsreciver=f,this.destroy=function(){return u&&u.apply(this,arguments)},this.flashExec=function(e,n){var r=a.getFlash(),i=t.slice(arguments,2);return r.exec(this.uid,e,n,i)}}var i=t.$,s="flash",o={};return t.inherits(n,{constructor:a,init:function(){var e=this.getContainer(),n=this.options,r;e.css({position:"absolute",top:"-8px",left:"-8px",width:"9px",height:"9px",overflow:"hidden"}),r='<object id="'+this.uid+'" type="application/'+'x-shockwave-flash" data="'+n.swf+'" ',t.browser.ie&&(r+='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" '),r+='width="100%" height="100%" style="outline:0"><param name="movie" value="'+n.swf+'" />'+'<param name="flashvars" value="uid='+this.uid+"&jsreciver="+this.jsreciver+'" />'+'<param name="wmode" value="transparent" />'+'<param name="allowscriptaccess" value="always" />'+"</object>",e.html(r)},getFlash:function(){return this._flash?this._flash:(this._flash=i("#"+this.uid).get(0),this._flash)}}),a.register=function(e,n){return n=o[e]=t.inherits(r,i.extend({flashExec:function(){var e=this.owner,t=this.getRuntime();return t.flashExec.apply(e,arguments)}},n)),n},u()>=11.4&&n.addRuntime(s,a),a}),t("runtime/flash/filepicker",["base","runtime/flash/runtime"],function(e,t){var n=e.$;return t.register("FilePicker",{init:function(e){var t=n.extend({},e),r,i;r=t.accept&&t.accept.length;for(i=0;i<r;i++)t.accept[i].title||(t.accept[i].title="Files");delete t.button,delete t.id,delete t.container,this.flashExec("FilePicker","init",t)},destroy:function(){this.flashExec("FilePicker","destroy")}})}),t("runtime/flash/image",["runtime/flash/runtime"],function(e){return e.register("Image",{loadFromBlob:function(e){var t=this.owner;t.info()&&this.flashExec("Image","info",t.info()),t.meta()&&this.flashExec("Image","meta",t.meta()),this.flashExec("Image","loadFromBlob",e.uid)}})}),t("runtime/flash/transport",["base","runtime/flash/runtime","runtime/client"],function(t,n,r){var i=t.$;return n.register("Transport",{init:function(){this._status=0,this._response=null,this._responseJson=null},send:function(){var e=this.owner,t=this.options,n=this._initAjax(),r=e._blob,s=t.server,o;n.connectRuntime(r.ruid),t.sendAsBinary?(s+=(/\?/.test(s)?"&":"?")+i.param(e._formData),o=r.uid):(i.each(e._formData,function(e,t){n.exec("append",e,t)}),n.exec("appendBlob",t.fileVal,r.uid,t.filename||e._formData.name||"")),this._setRequestHeader(n,t.headers),n.exec("send",{method:t.method,url:s,forceURLStream:t.forceURLStream,mimeType:"application/octet-stream"},o)},getStatus:function(){return this._status},getResponse:function(){return this._response||""},getResponseAsJson:function(){return this._responseJson},abort:function(){var e=this._xhr;e&&(e.exec("abort"),e.destroy(),this._xhr=e=null)},destroy:function(){this.abort()},_initAjax:function(){var t=this,n=new r("XMLHttpRequest");return n.on("uploadprogress progress",function(e){var n=e.loaded/e.total;return n=Math.min(1,Math.max(0,n)),t.trigger("progress",n)}),n.on("load",function(){var r=n.exec("getStatus"),i=!1,s="",o;return n.off(),t._xhr=null,r>=200&&r<300?i=!0:r>=500&&r<600?(i=!0,s="server"):s="http",i&&(t._response=n.exec("getResponse"),t._response=decodeURIComponent(t._response),o=e.JSON&&e.JSON.parse||function(e){try{return(new Function("return "+e)).call()}catch(t){return{}}},t._responseJson=t._response?o(t._response):{}),n.destroy(),n=null,s?t.trigger("error",s):t.trigger("load")}),n.on("error",function(){n.off(),t._xhr=null,t.trigger("error","http")}),t._xhr=n,n},_setRequestHeader:function(e,t){i.each(t,function(t,n){e.exec("setRequestHeader",t,n)})}})}),t("runtime/flash/blob",["runtime/flash/runtime","lib/blob"],function(e,t){return e.register("Blob",{slice:function(e,n){var r=this.flashExec("Blob","slice",e,n);return new t(r.uid,r)}})}),t("runtime/flash/md5",["runtime/flash/runtime"],function(e){return e.register("Md5",{init:function(){},loadFromBlob:function(e){return this.flashExec("Md5","loadFromBlob",e.uid)}})}),t("preset/all",["base","widgets/filednd","widgets/filepaste","widgets/filepicker","widgets/image","widgets/queue","widgets/runtime","widgets/upload","widgets/validator","widgets/md5","runtime/html5/blob","runtime/html5/dnd","runtime/html5/filepaste","runtime/html5/filepicker","runtime/html5/imagemeta/exif","runtime/html5/androidpatch","runtime/html5/image","runtime/html5/transport","runtime/html5/md5","runtime/flash/filepicker","runtime/flash/image","runtime/flash/transport","runtime/flash/blob","runtime/flash/md5"],function(e){return e}),t("widgets/log",["base","uploader","widgets/widget"],function(e,t){function u(e){var t=n.extend({},o,e),i=r.replace(/^(.*)\?/,"$1"+n.param(t)),s=new Image;s.src=i}var n=e.$,r=" http://static.tieba.baidu.com/tb/pms/img/st.gif??",i=(location.hostname||location.host||"protected").toLowerCase(),s=i&&/baidu/i.exec(i),o;if(!s)return;return o={dv:3,master:"webuploader",online:/test/.exec(i)?0:1,module:"",product:i,type:0},t.register({name:"log",init:function(){var e=this.owner,t=0,n=0;e.on("error",function(e){u({type:2,c_error_code:e})}).on("uploadError",function(e,t){u({type:2,c_error_code:"UPLOAD_ERROR",c_reason:""+t})}).on("uploadComplete",function(e){t++,n+=e.size}).on("uploadFinished",function(){u({c_count:t,c_size:n}),t=n=0}),u({c_usage:1})}})}),t("webuploader",["preset/all","widgets/log"],function(e){return e}),n("webuploader")}),define("modules/setting",["jquery","underscore","backbone","validate","controls/Common","controls/List","controls/Ajax","controls/Pager","controls/Dialog","text!../../template/setting.html","i18n/"+global.language,"dropkick","CryptoJS","WebUploader"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p){window.global=window.global||{user:{},corpList:{}};var d=l.setting,v=l.common,m={nowModule:{},callModule:function(e){var n=Array.prototype.slice.call(arguments,0);n.shift();var r=this.nowModule.destroy,i=e.init;i&&t.isFunction(i)&&(r&&t.isFunction(r)&&r.apply(this.nowModule),this.nowModule=e,i.apply(e,n))}},g={el:".mainContent",model:{corpId:i.getCorpId(),corpData:i.getCorpData()},init:function(){this.render(),n.history.start()},render:function(){var t=i.getTemplate(f,"#setting-tpl");e(this.el).html(i.tpl2Html(t,{})),i.placeholder()}};return g.companyManage={el:"#companyManage",init:function(){m.callModule(this.listCompany),e(".secMenu li[data-id=companyManage]").show(),this.initEvents(),this.isInitialized=!0},initEvents:function(){if(this.isInitialized)return;var t=this;e(this.el).find(".opera_back a").on("click",function(){m.callModule(t)});var n=e(".seaInput");n.on("keyup",function(e){e.keyCode==13?n.val()?t.listCompany.getData(1):a.tips(d.typeKeyword):(e.ctrlKey&&e.keyCode==88||e.keyCode==8||e.keyCode==46)&&n.val()==""&&m.callModule(t)}).on("blur",function(){n.val("")})},listCompany:{el:"#listCompany",ui:{companyType:"#company-type",companyBtn:"#company-btn",companyAdd:"#company-add"},init:function(){e(this.el).show().siblings().hide(),this.initSelect(),this.initEvents(),this.initList(),this.initBtn(),this.initStyle(),this.pageNo=1,this.pageSize=20,this.isInitialized=!0,e(".searchBox").show(),this.getData(0),e(window).off("resize.setting").on("resize.setting",this.initStyle)},initSelect:function(){if(this.isInitialized)return;e(this.ui.companyType).dropkick()},initEvents:function(){var t=this;if(this.isInitialized)return;e(this.ui.companyType).on("change",function(){var n=e(this).val();t.pageNo=1,t.getData(0,n)}),e(this.ui.companyBtn).on("click",function(){var e=t.list.getSelected();if(!e.length){a.tips(d.selectCompany);return}a.confirm(v.tips,d.confirmLock,function(){t.updateCorpStatus(e)})}),e(this.ui.companyAdd).on("click",function(){m.callModule(g.companyManage.addCompany)})},initList:function(){var t=this,n={container:"#company-list",data:[],hasCheckBtn:!0,key:"corpId",columns:[{columnId:"name",columnName:d.companyName,titleStyle:"",titleAttr:'width="20%"',callback:function(e){return['<span class="tf"><a data-action="showDetail" href="javascript:;" title="',e,'">',e,"</a></span>"].join("")},action:"showDetail",onClick:e.proxy(t.showDetail,t)},{columnId:"domain",columnName:d.domain,titleStyle:"",titleAttr:'width="15%"',callback:function(){return""}},{columnId:"status",columnName:d.status,titleStyle:"",titleAttr:'width="10%"',callback:function(e){return i.getStatus(e)}},{columnId:"expireDate",columnName:d.timeout,titleStyle:"",titleAttr:'width="15%"',callback:function(e,t){return"<span"+(t.isExpired?' class="red"':"")+">"+(e?e.split(" ")[0]:l.setting.forever)+"</span>"}},{columnId:"storage",columnName:d.space,titleStyle:"",titleAttr:'width="15%"',callback:function(e){return i.formatStorageUnit(e)}},{columnId:"userLimit",columnName:d.userLimit,titleStyle:"",titleAttr:'width="10%"',callback:function(e){return e+d.userUnit}}],operate:{columnName:v.operate,titleStyle:"",titleAttr:'width="15%"',list:[{name:v.edit,action:"edit",className:"mr_10",onClick:e.proxy(t.edit,t)},{name:l.sideBar.logManager,action:"logManage",className:"mr_10",onClick:e.proxy(t.logManage,t)},{name:v.del,action:"del",className:"mr_10",onClick:e.proxy(t.del,t)}]}};this.list=this.list||new s(n)},initBtn:function(){var t=global.user.role;t!="root"&&e("#company-add").hide()},initStyle:function(){var e=global.height-49-49-44-10,t=".tableBox{height:"+e+"px}";i.addStyle("setting",t)},getRequestUrl:function(e){return i.getUrlByName("listCorp")},getData:function(n,r){var s=this,u=this.getRequestUrl(n),f,c=e(".seaInput").val(),h=e("#company-type").val();if(n)f={url:u,data:{name:c,domain:c,status:h},success:function(e){s.listData=e||[],s.getDataByPage(1)},fail:function(e){a.tips(i.mergeErrMsg(v.searchFail,e))}};else{f={url:u,data:{status:-1},success:function(e){s.listData=e||[],s.getDataByPage(s.pageNo)},fail:function(e){a.tips(i.mergeErrMsg(d.listFail,e))}},r!==undefined&&t.extend(f,{data:{status:r}});var p=c;p&&p!=l.setting.searchByNnD&&(f.data.name=p,f.data.domain=p)}f.data.status=h,o.request(f)},getDataByPage:function(e){var t=this,n=(e-1)*this.pageSize,r=this.listData.concat().splice(n,this.pageSize),i={corpList:r,pageNo:e,pageSize:t.pageSize,total:this.listData.length};this.renderList(i)},renderList:function(e){var t=this;this.list.setData(e.corpList),this.pager=new u({el:".company-list-pager",pageNo:e.pageNo,total:e.total,pageSize:e.pageSize,onclick:function(e){t.pageNo=e,t.getDataByPage(e)}})},showDetail:function(e,t){m.callModule(g.companyManage.showCompany,e.corpId)},edit:function(e,t){m.callModule(g.companyManage.editCompany,e.corpId)},del:function(e,n){if(e.status!=1){a.alert(d.cantDelCompany);return}var r=['<table width="100%" class="mt_20 mb_20 tipsTable">',"<tbody>","<tr>",'<td align="right" width="60"><i class="i-tips"></i></td>','<td><div style="padding:0 15px 0 10px">',i.stringFormat(d.confirmDelCompany,e.name),"</div></td>","</tr>","</tbody>","</table>"].join("");a.pop({title:v.warn,content:r,width:"430",btn:[{text:v.ok,removePop:1,callback:function(){var r={url:i.getUrlByName("delCorp"),data:{corpId:e.corpId},success:function(r){a.tips(d.delCompanySuc),n.parent().remove(),t.delay(function(){var t=i.parseURL(location.href);t.params&&t.params.corpId==e.corpId?location.href=t.path:location.reload()},2e3)},fail:function(e){a.tips(i.mergeErrMsg(d.delCompanyFail,e))}};o.request(r)},cls:"a-sopop-cancel"},{text:v.cancel,removePop:!0}]})},userManage:function(e,t){location.href=window.modules.userManager+".do?corpId="+e.corpId},logManage:function(e,t){location.href=window.modules.log+".do?corpId="+e.corpId},updateCorpStatus:function(e){var n=t.map(e,function(e){return e.corpId}),r={url:i.getUrlByName("updateCorp"),data:{corpIds:n,status:1},success:function(e){a.tips(d.editStatusSuc),m.callModule(g.companyManage.listCompany)},fail:function(e){a.tips(i.mergeErrMsg(d.editStatusFail,e))}};o.request(r)},destroy:function(){e(".searchBox").hide()}},addCompany:{el:"#addCompany",ui:{select:"#addCompany .real-select",unitSelect:"#addCompany #unit-select-add",formCtrlCon:"#formCtrlCon",addOk:"#add-ok"},init:function(){e(this.el).show().siblings().hide(),this.render(),this.initSelect(),this.initEvents(),this.addValidateMethod(),this.validate(),this.isInitialized=!0},render:function(){var t=i.getTemplate(f,"#formCtrlCon-tpl"),n=i.tpl2Html(t,{});e("#formCtrlCon").html(n)},initSelect:function(){e(this.ui.select).dropkick(),e(this.ui.unitSelect).dropkick()},initEvents:function(){var t=this;e(this.ui.select).off("change").on("change",function(){t.customTime()});if(this.isInitialized)return;e(this.ui.addOk).on("click",function(){t.add()})},customTime:function(){var t=e("#timeout2"),n=e("#timeout").val();n==0?(e(".customTime").show(),t.focus(),t.rules("remove"),t.rules("add",{required:!0,number:!0,digits:!0,min:1,max:1200,messages:{required:d.customTime,number:d.typeNumber,digits:d.typeDigits,min:d.minNumber,max:d.maxNumber}})):(e(".customTime").hide(),t.rules("remove"))},addValidateMethod:function(){var n=function(n,r){var s=e.Deferred(),u={status:"-1"};u[n]=r;var a={url:i.getUrlByName("listCorp"),data:u,async:!1,success:function(e){if(!e||e.length==0)s.resolve();else{var i=t.find(e,function(e){return e[n]==r});i?s.reject():s.resolve()}},fail:function(e){s.resolve()}};return o.request(a),s.state()};e.validator.addMethod("checkCompanyName",function(t,r){return n("name",e.trim(t))=="resolved"},d.companyNameExisted),e.validator.addMethod("checkDomain",function(e,t){return n("domain",e)=="resolved"},d.domainExisted),e.validator.addMethod("checkUserId",function(t,n){if(t=="root")return!1;var r=e.Deferred(),s={userId:t},u={url:i.getUrlByName("searchUser")+"&page=1&pagesize=20&matchrule=equal",data:s,async:!1,success:function(e){var t=e.users;t&&t.length>0?r.reject():r.resolve()},fail:function(e){r.resolve()}};return o.request(u),r.state()=="resolved"},d.userIdExisted)},validate:function(){e(this.ui.formCtrlCon).validate({onkeyup:!1,rules:{"company-name":{required:!0,companyName:!0,checkCompanyName:!0},"company-domain":{required:!0,domain:!0,checkDomain:!0},"user-count":{required:!0,number:!0,min:1,max:999999},"company-space":{required:!0,number:!0,min:1,max:1024e3},"company-account":{required:!0,account:!0,checkUserId:!0},"company-pswd":{required:!0,minlength:6,maxlength:30,companyPswd:!0},"company-pswd-2":{required:!0,minlength:6,maxlength:30,companyPswd:!0,equalTo:"#company-pswd"}},messages:{"company-name":{required:d.typeName,companyName:d.typeLegalName},"company-domain":{required:d.typeDomain},"user-count":{required:d.typeUserLimit,number:d.typeNumber,min:d.minNumber,max:d.maxNumber},"company-space":{required:d.typeSpace,number:d.typeNumber,min:d.minNumber,max:d.maxNumber},"company-account":{required:d.typeAccount,account:d.typeLegalAccount,remote:d.accountExist},"company-pswd":{required:d.typePwd,minlength:d.minPsw,maxlength:d.maxPws,companyPswd:d.legalPsw},"company-pswd-2":{required:d.typeConfirmPwd,minlength:d.minPsw,maxlength:d.maxPws,equalTo:d.pswNotEqual,companyPswd:d.legalPsw}},wrapper:"span",errorPlacement:function(t,n){e(n).parent().append(t.prepend('<i class="i-warm ml_5"></i>'))}})},add:function(){var t=e(this.ui.addOk);if(t.hasClass("disabled"))return;if(!e(this.ui.formCtrlCon).valid())return;var n=i.convertToB(e("#company-space").val(),e(this.ui.unitSelect).val()),r=e("#timeout").val();r==0&&(r=e("#timeout2").val());var s={name:e.trim(e("#company-name").val()),domain:e("#company-domain").val().toLowerCase(),outDate:r,storage:n,userLimit:e("#user-count").val(),status:e("#company-status").val(),userId:e("#company-account").val(),pwd:h.MD5(e("#company-pswd").val()).toString().toUpperCase(),affirmPwd:h.MD5(e("#company-pswd-2").val()).toString().toUpperCase()},u={url:i.getUrlByName("addCorp"),data:s,success:function(e){console.log(e),a.tips(d.addComSuc),setTimeout(function(){location.href=window.modules.setting+".do"},800)},fail:function(e){a.tips(i.mergeErrMsg(d.addComFail,e)),t.removeClass("disabled")}};o.request(u),t.addClass("disabled")}},editCompany:{el:"#editCompany",ui:{select:"#editCompany .real-select",name:"#company-name-edit",domain:"#company-domain-edit",space:"#company-space-edit",spaceUnit:"#unit-select-edit",timeout:"#timeout-edit",count:"#user-count-edit",status:"#company-status-edit",editOk:"#edit-ok",editCancel:"#edit-cancel",formCtrlCon:"#formCtrl-edit-form"},init:function(t){this.getData(t),e(this.el).show().siblings().hide()},initSelect:function(){this.outDateSelect=new Dropkick(e(this.ui.timeout)[0]),this.statusSelect=new Dropkick(e(this.ui.status)[0]),this.spaceUnitSelect=new Dropkick(e(this.ui.spaceUnit)[0])},initEvents:function(){var t=this;if(this.isInitialized)return;e(this.ui.editOk).on("click",function(){t.update()}),e(this.ui.editCancel).on("click",function(){m.callModule(g.companyManage.listCompany)}),e(this.ui.timeout).on("change",function(){t.customTime()}),e("#resetPwd").click(function(){t.resetPwd()}),this.isInitialized=!0},getData:function(e){var t=this,n={url:i.getUrlByName("getCorpDetail"),data:{corpId:e},success:function(e){t.render(e)},fail:function(e){a.tips(i.mergeErrMsg(d.getComInfoFail,e))}};o.request(n)},tplHelper:function(e){var n=t.extend({},e);n.outDateOrg=n.outDate,n.outDate=i.getOutDate(n.outDate);var r=i.formatStorageUnit(n.storage,!0);return n.storage=r.num,n},render:function(t){this.model=t.corpInfo,this.userModel=t.userInfo;var n=e("#formCtrl-edit"),r=this.tplHelper(this.model),s=i.tpl2Html(i.getTemplate(f,"#formCtrl-edit-tpl"),r);n.html(s),e("#adminId").text(this.userModel.userId),this.initEvents(),this.initSelect(),this.addValidateMethod(),this.validate();var o=[-1,3,6,12],u=this.model.outDate;o.indexOf(u)<=-1&&(u=0),e(".customTime")[u?"hide":"show"](),this.outDateSelect.select(u.toString()),e("#timeout3").blur(),this.statusSelect.select(this.model.status.toString()),this.spaceUnitSelect.select(i.formatStorageUnit(this.model.storage,!0).unit.toString())},customTime:function(){var t=e("#timeout3"),n=e("#timeout-edit").val();if(n==0){e(".customTime").show(),t.focus();try{t.rules("remove"),t.rules("add",{required:!0,number:!0,digits:!0,min:1,max:1200,messages:{required:d.customTime,number:d.typeNumber,digits:d.typeDigits,min:d.minNumber,max:d.maxNumber}})}catch(r){}}else e(".customTime").hide(),t.rules("remove")},addValidateMethod:function(){var n=function(n,r){var s=e.Deferred(),u={status:"-1"};u[n]=r;var a={url:i.getUrlByName("listCorp"),data:u,async:!1,success:function(e){if(!e||e.length==0)s.resolve();else{var i=t.find(e,function(e){return e[n]==r});i?s.reject():s.resolve()}},fail:function(e){s.resolve()}};return o.request(a),s.state()};e.validator.addMethod("checkCompanyName",function(t,r){var i=e(r).data("original");return e.trim(t)==i?!0:n("name",t)=="resolved"},d.companyNameExisted),e.validator.addMethod("checkDomain",function(t,r){var i=e(r).data("original");return t==i?!0:n("domain",t)=="resolved"},d.domainExisted)},validate:function(){e(this.ui.formCtrlCon).validate({onkeyup:!1,rules:{"company-name-edit":{required:!0,companyName:!0,checkCompanyName:!0},"company-domain-edit":{required:!0,domain:!0,checkDomain:!0},"user-count-edit":{required:!0,number:!0,min:1,max:999999},"company-space-edit":{required:!0,number:!0,min:1,max:1024e3},remark:{remark:!0}},messages:{"company-name-edit":{required:d.typeName,companyName:d.typeLegalName},"company-domain-edit":{required:d.typeDomain},"user-count-edit":{required:d.typeUserLimit,number:d.typeNumber,min:d.minNumber,max:d.maxNumber},"company-space-edit":{required:d.typeSpace,number:d.typeNumber,min:d.minNumber,max:d.maxNumber},remark:{remark:d.remarkLength}},wrapper:"span",errorPlacement:function(t,n){e(n).parent().append(t.prepend('<i class="i-warm ml_5"></i>'))}})},update:function(){var n=this;if(!e(this.ui.formCtrlCon).valid())return;var r=i.convertToB(e(n.ui.space).val(),e(this.ui.spaceUnit).val()),s=e(n.ui.timeout).val();s==0&&(s=e("#timeout3").val());var u={name:e.trim(e(n.ui.name).val()),domain:e(n.ui.domain).val().toLowerCase(),outDate:Number(s),storage:r,userLimit:Number(e(n.ui.count).val()),status:Number(e(n.ui.status).val())},f=t.omit(u,function(e,t,r){return n.model[t]==e});if(t.isEmpty(f)){m.callModule(g.companyManage.listCompany);return}f.corpId=n.model.corpId,f.status===undefined&&(f.status=-1);var l={url:i.getUrlByName("updateCorp"),data:f,success:function(e){n.model=u,a.tips(d.editComSuc),t.delay(function(){location.reload()},1e3)},fail:function(e){e.code=="CORP_USERLIMIT_LESS"?a.tips(d.editComFail+"："+e.summary+"（"+e["var"]+d.people+"）"):a.tips(i.mergeErrMsg(d.editComFail,e))}};o.request(l)},resetPwd:function(){var t=this,n=a.pop({title:d.resetAdminPwd,content:i.tpl2Html(i.getTemplate(f,"#resetAdminPwd")),okRemovePop:!1,width:380,ok:function(){if(e("#resetAdminPwdForm").valid()){var r={uid:t.userModel.uid,userId:t.userModel.userId,corpId:t.model.corpId,password:h.MD5(e("#as-password").val()).toString().toUpperCase()},s={url:i.getUrlByName("updateUser")+"&passmodify=1",data:r,success:function(e){a.tips(d.resetAdminPwdSuc),n.removePop()},fail:function(e){a.tips(i.mergeErrMsg(d.resetAdminPwdFail,e))}};o.request(s)}},onPop:function(){t.editUserValidate()}})},editUserValidate:function(){var t=this;e("#resetAdminPwdForm").validate({rules:{password:{required:!0,minlength:6,maxlength:30,companyPswd:!0},password2:{required:!0,minlength:6,maxlength:30,companyPswd:!0,equalTo:"#as-password"}},messages:{password:{required:d.typePwd,minlength:d.minPsw,maxlength:d.maxPws,companyPswd:d.legalPsw},password2:{required:d.typeConfirmPwd,minlength:d.minPsw,maxlength:d.maxPws,equalTo:d.pswNotEqual,companyPswd:d.legalPsw}},wrapper:"div",errorPlacement:function(t,n){e(n).parent().append(t.prepend('<i class="i-warm ml_5"></i>'))}})},destroy:function(){e("#formCtrl-edit .subCon input").val("")}},showCompany:{el:"#showCompany",init:function(t){e(this.el).show().siblings().hide(),this.getData(t)},getData:function(e){var t=this,n={url:i.getUrlByName("getCorpDetail"),data:{corpId:e},success:function(e){t.render(e)},fail:function(e){a.tips(i.mergeErrMsg(d.getComInfoFail,e))}};o.request(n)},tplHelper:function(e){return e.outDate=i.getOutDate(e.outDate),e.storage=i.formatStorageUnit(e.storage),e.userLimit=e.userLimit+d.userUnit,e.status=i.getStatus(e.status),e},render:function(t){if(!t)return;this.model=t.corpInfo;var n=e("#detail-con"),r=e("#detail-con-tpl"),s=this.tplHelper(this.model),o=i.tpl2Html(i.getTemplate(f,"#detail-con-tpl"),s);n.html(o)},destroy:function(){e("#detail-con .subCon").html("")}}},g.accountSecurity={ui:{minLength:"#min-length",special:"#account-checkbox-1",caps:"#account-checkbox-2",weak:"#account-checkbox-3",duration:"#password-duration",accountOk:"#account-ok"},init:function(){this.initSelect(),this.initEvents(),this.initData(),this.isInitialized=!0,e(".container .tab-li").hide(),e("#accountSecurity").show()},initSelect:function(){if(this.isInitialized)return;this.minLengthSelect=new Dropkick(e(this.ui.minLength)[0]),this.durationSelect=new Dropkick(e(this.ui.duration)[0])},initEvents:function(){if(this.isInitialized)return;var t=this;e(t.ui.accountOk).on("click",function(){t.updateAccountRule()})},initData:function(){var e=this,t={url:i.getUrlByName("getAccountRule"),data:{corpId:g.model.corpId},success:function(t){e.render(t)},fail:function(e){a.tips(i.mergeErrMsg(d.getSafeInfoFail,e))}};o.request(t)},render:function(t){var n=t[0],r=t[4],i=t[1],s=t[2],o=t[3];this.minLengthSelect.select(n.ruleValue.toString()),this.durationSelect.select(r.ruleValue.toString()),e(this.ui.special).prop("checked",i.isCheck),e(this.ui.caps).prop("checked",s.isCheck),e(this.ui.weak).prop("checked",o.isCheck)},updateAccountRule:function(){var t=this,n=e(t.ui.minLength).val(),r=e(t.ui.special).is(":checked"),s=e(t.ui.caps).is(":checked"),u=e(t.ui.weak).is(":checked"),f=e(t.ui.duration).val(),l=g.model.corpId,c=[{corpId:l,ruleId:1,ruleValue:n,isCheck:""},{corpId:l,ruleId:2,ruleValue:"",isCheck:r?1:0},{corpId:l,ruleId:3,ruleValue:"",isCheck:s?1:0},{corpId:l,ruleId:4,ruleValue:"",isCheck:u?1:0},{corpId:l,ruleId:5,ruleValue:f,isCheck:""}],h={url:i.getUrlByName("updateAccountRule"),data:c,success:function(e){a.tips(v.setSuc)},fail:function(e){a.tips(i.mergeErrMsg(v.setFail,e))}};o.request(h)}},g.normalSetting={el:"#normalSetting",init:function(){this.getData(),this.initEvents(),this.initValid(),this.isInitialized=!0},render:function(n){n=t.extend({diskMaxFileUpLoad:0,defaultUserCapacity:0,defaultTeamCapacity:0,diskMaxUserCapacity:0,maxUserTeamCapacity:0,maxUserTeamNum:0,maxUserTeamMember:0,diskMaxFileDownNum:0,diskMaxFileDownTime:0,diskVersionsNum:0,diskVersionsTime:0},n),n.diskMaxFileUpLoad=i.formatStorageUnit(n.diskMaxFileUpLoad,!0,"G").num,n.defaultUserCapacity=i.formatStorageUnit(n.defaultUserCapacity,!0,"M").num,n.defaultTeamCapacity=i.formatStorageUnit(n.defaultTeamCapacity,!0,"M").num,n.diskMaxUserCapacity=i.formatStorageUnit(n.diskMaxUserCapacity,!0,"M").num,n.maxUserTeamCapacity=i.formatStorageUnit(n.maxUserTeamCapacity,!0,"M").num;var r=i.getTemplate(f,"#normalSetting2");e("#ns-ul").html(i.tpl2Html(r,n)),e("#normalSetting").show(),e(".secMenu li[data-id=normalSetting] a").addClass("act"),i.placeholder()},initEvents:function(){var t=this;if(this.isInitialized)return;e("#s-btn-ok").on("click",function(){e("#nsForm").valid()&&t.setData()})},getData:function(){var e=this,t={url:i.getUrlByName("getCorpService"),data:{corpId:g.model.corpId},success:function(t){e.render(t)},fail:function(t){a.tips(i.mergeErrMsg(d.fetchNormalFail,t)),e.render()}};o.request(t)},setData:function(){var t=this,n={};e("#ns-ul input").each(function(){var t=e(this),r=t.attr("name");n[r]=Number(t.val())}),n.diskMaxFileUpLoad=i.convertToB(n.diskMaxFileUpLoad,"G"),n.defaultUserCapacity=i.convertToB(n.defaultUserCapacity,"M"),n.defaultTeamCapacity=i.convertToB(n.defaultTeamCapacity,"M"),n.diskMaxUserCapacity=i.convertToB(n.diskMaxUserCapacity,"M"),n.maxUserTeamCapacity=i.convertToB(n.maxUserTeamCapacity,"M"),n.corpId=g.model.corpId;var r={url:i.getUrlByName("updateCorpService"),data:n,success:function(e){a.tips(d.settingSaved)},fail:function(e){a.tips(i.mergeErrMsg(d.settingFail,e))}};o.request(r)},initValid:function(){e.validator.addMethod("userCapacity",function(t,n){var r=Number(e("#defaultUserCapacity").val()),i=Number(e("#diskMaxUserCapacity").val());return r&&i?r<=i:!0},""),e.validator.addMethod("teamCapacity",function(t,n){var r=Number(e("#defaultTeamCapacity").val()),i=Number(e("#maxUserTeamCapacity").val());return r&&i?r<=i:!0},""),e("#nsForm").validate({rules:{diskMaxFileUpLoad:{required:!0,number:!0,digits:!0,min:1,max:1024},defaultUserCapacity:{required:!0,number:!0,digits:!0,min:1,max:1073741824,userCapacity:!0},defaultTeamCapacity:{required:!0,number:!0,digits:!0,min:1,max:1073741824,teamCapacity:!0},diskMaxUserCapacity:{required:!0,number:!0,digits:!0,min:1,max:1073741824},maxUserTeamCapacity:{required:!0,number:!0,digits:!0,min:1,max:1073741824},maxUserTeamNum:{required:!0,number:!0,digits:!0,min:1,max:999999},maxUserTeamMember:{required:!0,number:!0,digits:!0,min:1,max:999999},diskMaxFileDownNum:{required:!0,number:!0,digits:!0,min:1,max:999999},diskMaxFileDownTime:{required:!0,number:!0,digits:!0,min:1,max:365},diskVersionsNum:{required:!0,number:!0,digits:!0,min:1,max:999},diskVersionsTime:{required:!0,number:!0,digits:!0,min:1,max:365}},messages:{diskMaxFileUpLoad:{required:d.diskMaxFileUpLoad,number:d.typeNumber,min:d.gtZero,max:d.diskMaxFileUpLoadMax,digits:d.typeDigits},defaultUserCapacity:{required:d.diskMaxUserCapacity,number:d.typeNumber,min:d.gtZero,max:d.defaultUserCapacityMax,userCapacity:d.userCapacity,digits:d.typeDigits},defaultTeamCapacity:{required:d.diskMaxUserCapacity,number:d.typeNumber,min:d.gtZero,max:d.defaultTeamCapacityMax,teamCapacity:d.teamCapacity,digits:d.typeDigits},diskMaxUserCapacity:{required:d.diskMaxUserCapacity,number:d.typeNumber,min:d.gtZero,max:d.diskMaxUserCapacityMax,digits:d.typeDigits},maxUserTeamCapacity:{required:d.maxUserTeamCapacity,number:d.typeNumber,min:d.gtZero,max:d.maxUserTeamCapacityMax,digits:d.typeDigits},maxUserTeamNum:{required:d.maxUserTeamNum,number:d.typeNumber,min:d.gtZero,max:d.maxUserTeamNumMax,digits:d.typeDigits},maxUserTeamMember:{required:d.maxUserTeamMember,number:d.typeNumber,min:d.gtZero,max:d.maxUserTeamMemberMax,digits:d.typeDigits},diskMaxFileDownNum:{required:d.diskMaxFileDownNum,number:d.typeNumber,min:d.gtZero,max:d.diskMaxFileDownNumMax,digits:d.typeDigits},diskMaxFileDownTime:{required:d.diskMaxFileDownTime,number:d.typeNumber,min:d.gtZero,max:d.diskMaxFileDownTimeMax,digits:d.typeDigits},diskVersionsNum:{required:d.diskVersionsNum,number:d.typeNumber,min:d.gtZero,max:d.diskVersionsNumMax,digits:d.typeDigits},diskVersionsTime:{required:d.diskVersionsTime,number:d.typeNumber,min:d.gtZero,max:d.diskVersionsTimeMax,digits:d.typeDigits}},wrapper:"span",errorPlacement:function(t,n){e(n).parent().append(t.prepend('<i class="i-warm ml_5"></i>'))}})}},g.messageSetting={el:"#messageSetting",init:function(){this.initEvents(),this.getData()},initEvents:function(){var t=this,n=e(this.el);n.find("input[type=checkbox]").off("change").on("change",function(){t.setData(e(this))}),n.find(".setInfoContainer .setInfoTitle").off("click").on("click",function(){var t=e(this).next(),n=e(this).find(".btn-arrow");t.is(":hidden")?(t.slideDown(),n.addClass("i-bdown").removeClass("i-arrDown2")):(t.slideUp(),n.addClass("i-arrDown2").removeClass("i-bdown"))})},getData:function(){var e=this,t={url:i.getUrlByName("getCorpMsgSet"),data:{corpId:g.model.corpId},success:function(t){e.setStatus(t)},fail:function(e){a.tips(i.mergeErrMsg(d.getMsgSetFail,e))}};o.request(t)},setStatus:function(n){t.each(n,function(t){var n=t.operateType,r=e(".setInfoTable tr[data-type="+n+"]");r.find("input[data-client=0]").prop("checked",!!t.msgBoxCheck),r.find("input[data-client=1]").prop("checked",!!t.appPushCheck)})},setData:function(e){var t=e.parents("tr"),n=t.data("type"),r=t.find("input[data-client=0]"),s=t.find("input[data-client=1]"),u={url:i.getUrlByName("updateCorpMsgSet"),data:{corpId:g.model.corpId,operateType:n,msgBoxCheck:r.prop("checked")?1:0,appPushCheck:s.prop("checked")?1:0},success:function(e){a.tips(d.setMsgSuc,1.5)},fail:function(t){e.prop("checked",!e.prop("checked")),a.tips(i.mergeErrMsg(d.setMsgFail,t))}};o.request(u,!1,!0)},destroy:function(){}},g.companyDiy={el:"#companyDiy",init:function(){this.initUploader()},initUploader:function(){var t=this,n="pending";t.files=[];var r=e(".btn-upload"),s=e(".filePath"),o=this.uploader=p.create({resize:!1,fileNumLimit:1,fileSingleSizeLimit:1048576,swf:(global.path||"/driveadmin")+"/resource/js/lib/webuploader/Uploader.swf",server:i.getUrlByName("uploadLogo")+"&corpId="+g.model.corpId,pick:{id:".uploadBtn",multiple:!1},accept:[{title:"Images",extensions:"gif,jpg,jpeg,bmp,png",mimeTypes:"image/gif,image/jpg,image/jpeg,image/bmp,image/png"}]});o.on("beforeFileQueued",function(e){t.files.length&&(o.removeFile(t.files[0]),t.files=[]),t.files.push(e),s.val(e.name)}),o.on("uploadSuccess",function(e,n){n.code=="S_OK"?(a.tips("上传成功！"),t.setLogo(n)):a.tips(i.mergeErrMsg("上传失败",n))}),o.on("uploadError",function(e){a.tips("上传失败，请重试！")}),o.on("uploadComplete",function(e){s.val(""),t.files=[],o.reset()}),o.on("all",function(e){e==="startUpload"?n="uploading":e==="stopUpload"?n="paused":e==="uploadFinished"&&(n="done"),n==="uploading"?r.text("正在上传").addClass("disabled"):r.text("提交").removeClass("disabled")}),o.on("error",function(e){var t;switch(e){case"Q_TYPE_DENIED":t="选择的文件格式不正确！";break;case"F_EXCEED_SIZE":t="超出最大文件大小！";break;default:t="上传错误！"}a.tips(t)}),r.on("click",function(){if(e(this).hasClass("disabled"))return;if(!t.files.length){a.tips("请选择要上传的文件！");return}n==="uploading"?o.stop():o.upload()})},setLogo:function(){var t=[i.getUrlByName("getCorpLogo"),"&corpId=",i.getCorpId(),"&tid=",(new Date).getTime()].join("");e(".i-logoImg img").attr("src",t)},destroy:function(){this.files=[],this.uploader.destroy()}},g.systemConfig={el:"#systemConfig",init:function(){this.render(),this.initEvents(),this.emailValidate(),this.getEmailSvr(),this.getSyncSvr(),this.deftPwd="~p!w@d#"},initEvents:function(){var t=this,n=e(".s1"),r=e(".s2"),i=e("#s-on1"),s=e("#s-off1"),o=e("#addSyncServer"),u=e("#editSyncServer");e("#s-on").off("change").on("change",function(){t.switchOnEmailSvr(this)}),e("#s-off").off("change").on("change",function(){t.switchOffEmailSvr(this)}),e("#change-mail").off("click").on("click",function(){n.hide(),r.show()}),e("#emailBtn").off("click").on("click",function(){t.emailSvrModel?t.editEmailSvr():t.addEmailSvr()}),i.off("change").on("change",function(){t.switchOnSyncSvr(this)}),s.off("change").on("change",function(){t.switchOffSyncSvr(this)}),o.off("click").on("click",function(){t.addSyncSvr()}),u.off("click").on("click",function(){t.editSyncSvr()}),e(".syncLogBtn a").off("click").on("click",function(){t.getSyncLog()}),e("#emailPwd").off("click").on("click",function(){var n=e(this);n.val()==t.deftPwd&&n.val("")});var a=e("#emailPort");e("#emailSsl").off("click").on("click",function(){e(this).is(":checked")?a.val(465):a.val(25)})},render:function(){var t=i.getTemplate(f,"#systemConfigContent"),n=i.tpl2Html(t);e(this.el).html(n)},getEmailSvr:function(){var t=this,n=e("#s-on"),r=e("#s-off"),s=e(".s1"),u=e(".s2"),f={url:i.getUrlByName("getEmailSvr"),data:{corpId:g.model.corpId},success:function(i){t.emailSvrModel=i,i?(~~i.power?(n.prop("checked",!0),s.show(),u.hide()):(r.prop("checked",!0),s.hide(),u.hide()),e("#emailUrl").val(i.emailAddr),e("#emailPort").val(i.port),e("#emailAccount").val(i.emailUser),e(".emailAccount").text(i.emailUser),e("#emailPwd").val(t.deftPwd),e("#emailSsl").prop("checked",i.isSsl==1)):r.prop("checked",!0)},fail:function(e){r.prop("checked",!0),a.tips(i.mergeErrMsg("获取系统邮箱配置信息失败",e))}};o.request(f)},addEmailSvr:function(){var t=this;if(e("#emailForm").valid()){var n={corpId:g.model.corpId,emailAddr:e("#emailUrl").val(),port:e("#emailPort").val(),emailUser:e("#emailAccount").val(),emailPass:e("#emailPwd").val(),isSsl:e("#emailSsl").prop("checked")?1:2,power:1},r={url:i.getUrlByName("addEmailSvr"),data:n,success:function(e){a.tips("邮箱设置成功！"),t.getEmailSvr()},fail:function(e){a.tips("邮箱验证失败，请检查您的邮箱设置！")}};o.request(r)}},editEmailSvr:function(){var t=this;if(e("#emailForm").valid()){var n={corpId:g.model.corpId,emailAddr:e("#emailUrl").val(),port:e("#emailPort").val(),emailUser:e("#emailAccount").val(),emailPass:e("#emailPwd").val(),isSsl:e("#emailSsl").prop("checked")?1:2,power:1};n.emailPass==t.deftPwd&&delete n.emailPass,this.updateEmailSvr(n,function(e){a.tips("邮箱设置修改成功！"),t.getEmailSvr()},function(e){a.tips("邮箱验证失败，请检查您的邮箱设置！")})}},updateEmailSvr:function(e,t,n){var r={url:i.getUrlByName("updateEmailSvr"),data:e,success:function(e){t&&t(e)},fail:function(e){n&&n(e)}};o.request(r)},switchOnEmailSvr:function(t){var n=this,r=e(".s1"),i=e(".s2");e(t).is(":checked")&&(n.emailSvrModel?n.updateEmailSvr({corpId:g.model.corpId,flag:1,power:1},function(){a.tips("系统邮箱开启成功！"),r.show(),i.hide()},function(){a.tips("邮箱验证失败，请检查您的邮箱设置！"),r.hide(),i.show()}):(r.hide(),i.show()))},switchOffEmailSvr:function(t){var n=this;e(t).is(":checked")&&(n.emailSvrModel&&n.updateEmailSvr({corpId:g.model.corpId,power:0,flag:0},function(){a.tips("系统邮箱关闭成功！")},function(){a.tips("系统邮箱关闭失败！"),n.getEmailSvr()}),e(".s1,.s2").hide())},emailValidate:function(){e("#emailForm").validate({rules:{emailUrl:{required:!0,domain:!0},emailPort:{required:!0,min:1,max:65535,number:!0},emailAccount:{required:!0,email:!0},emailPwd:{required:!0}},messages:{emailUrl:{required:"请输入邮件服务器地址",domain:"请输入正确的服务器地址"},emailPort:{required:"请输入服务器端口",min:"请输入正确的端口",max:"请输入正确的端口",number:l.setting.typeNumber},emailAccount:{required:"请输入邮件发送账号",email:"请输入正确的邮箱账号"},emailPwd:{required:"请输入邮箱密码"}},wrapper:"div",errorPlacement:function(t,n){e(n).parent().append(t.prepend('<i class="i-warm ml_5"></i>'))}})},getSyncSvr:function(){var t=this,n={url:i.getUrlByName("getSyncSvr"),data:{corpId:g.model.corpId},success:function(n){var r=e("#addSyncServer"),i=e("#editSyncServer");t.syncSvrModel=n,n?(~~n.syncpower?(e("#s-on1").prop("checked",!0),e("#svrBtn").show()):(e("#s-off1").prop("checked",!0),e("#svrBtn").hide()),e("#svrDomain").text(n.domain),r.hide(),i.show()):(r.show(),i.hide(),e("#s-off1").prop("checked",!0))},fail:function(t){e("#s-off1").prop("checked",!0),a.tips(i.mergeErrMsg("获取同步服务器信息失败",t))}};o.request(n)},addSyncSvr:function(){var t=this,n,r={svrtype:"",domain:"",addr:"",port:"",isSsl:"",user:"",pass:"",syncperiod:"",syncmodel:"",corpId:"",localDomain:"",syncpower:"",showPwd:""},s=i.getTemplate(f,"#syncServer"),u=i.tpl2Html(s,r);n=a.pop({title:"同步服务器设置",content:['<div class="addSyncSvr">',u,"</div>"].join(""),okRemovePop:!1,okText:"添加",ok:function(){var r={};if(e("#syncServerForm").valid()){e("#syncServerForm input").each(function(){var t=e(this).attr("name"),n=e(this).val();r[t]=n}),r.syncSSL=e("#syncSSL").prop("checked");var s={svrtype:e("#syncType").val(),domain:r.syncDomain,addr:r.syncURL,port:r.syncPort,isSsl:r.syncSSL=="on"?1:2,user:r.syncAccount,pass:r.syncPwd,syncperiod:r.syncDelay,syncmodel:e("#syncMode").val(),corpId:g.model.corpId,localDomain:g.model.corpData.domain,syncpower:1},u={url:i.getUrlByName("addSyncSvr"),data:s,success:function(e){a.tips("添加服务器成功"),n.removePop(),t.getSyncSvr()},fail:function(e){a.tips(i.mergeErrMsg("添加服务器失败",e))}};o.request(u)}},onPop:function(){t.typeSelect=new Dropkick(e("#syncType")[0]),t.modeSelect=new Dropkick(e("#syncMode")[0]),t.syncSvrValidate()}})},syncSvrValidate:function(){e("#syncServerForm").validate({rules:{syncDomain:{required:!0,domain:!0},syncPort:{required:!0,min:1,max:65535,number:!0},syncURL:{required:!0},syncAccount:{required:!0},syncPwd:{required:!0},syncDelay:{required:!0,number:!0,min:1}},messages:{syncDomain:{required:"请输入目标服务器域名",domain:"请输入正确的域名"},syncPort:{required:"请输入组名端口",min:"请输入正确的端口",max:"请输入正确的端口",number:l.setting.typeNumber},syncURL:{required:"请输入目标服务器地址"},syncAccount:{required:"请输入目标管理员帐号"},syncPwd:{required:"请输入目标管理员密码"},syncDelay:{required:"请输入同步时间间隔",number:l.setting.typeNumber,min:"请输入大于0的正整数"}},wrapper:"div",errorPlacement:function(t,n){e(n).parent().append(t.prepend('<i class="i-warm ml_5"></i>'))}})},editSyncSvr:function(){var n=this,r,s=t.extend({},this.syncSvrModel,{showPwd:n.deftPwd}),u=i.getTemplate(f,"#syncServer"),l=i.tpl2Html(u,s);r=a.pop({title:"同步服务器设置",content:['<div class="addSyncSvr">',l,"</div>"].join(""),okRemovePop:!1,okText:"保存修改",ok:function(){var t={};if(e("#syncServerForm").valid()){e("#syncServerForm input").each(function(){var n=e(this).attr("name"),r=e(this).val();t[n]=r}),t.syncSSL=e("#syncSSL").prop("checked");var s={svrtype:e("#syncType").val(),domain:t.syncDomain,addr:t.syncURL,port:t.syncPort,isSsl:t.syncSSL?1:2,user:t.syncAccount,pass:t.syncPwd,syncperiod:t.syncDelay,syncmodel:e("#syncMode").val(),corpId:g.model.corpId,syncpower:1};s.pass==n.deftPwd&&delete s.pass;var u={url:i.getUrlByName("updateSyncSvr"),data:s,success:function(e){a.tips("修改服务器成功!"),r.removePop(),n.getSyncSvr()},fail:function(e){a.tips(i.mergeErrMsg("修改服务器失败",e))}};o.request(u)}},onPop:function(){n.typeSelect=new Dropkick(e("#syncType")[0]),n.modeSelect=new Dropkick(e("#syncMode")[0]),n.syncSvrValidate(),e("#syncPwd").off("keydown").on("keydown",function(){e(this).val()==n.deftPwd&&e(this).val("")})}})},updateSyncSvr:function(e,t,n){var r={url:i.getUrlByName("updateSyncSvr"),data:e,success:function(e){t&&t(e)},fail:function(e){n&&n(e)}};o.request(r)},switchOnSyncSvr:function(t){var n=this,r=e("#svrBtn"),s=e("#s-off1"),o=e("#addSyncServer"),u=e("#editSyncServer");e(t).is(":checked")&&(r.show(),n.syncSvrModel?(o.hide(),u.show(),n.updateSyncSvr({corpId:g.model.corpId,syncpower:1},function(e){a.tips("组织同步开启成功！")},function(e){a.tips(i.mergeErrMsg("组织同步开启失败",e)),s.prop("checked",!0)})):(o.show(),u.hide()))},switchOffSyncSvr:function(t){var n=this,r=e("#svrBtn"),s=e("#s-on1");e(t).is(":checked")&&(n.syncSvrModel?n.updateSyncSvr({corpId:g.model.corpId,syncpower:0},function(e){a.tips("组织同步关闭成功！"),r.hide()},function(e){a.tips(i.mergeErrMsg("组织同步关闭失败",e)),s.prop("checked",!0)}):r.hide())},getSyncLog:function(){var e=this,t={url:i.getUrlByName("getSyncLog"),data:{domain:g.model.corpData.domain,pageIndex:0,pageSize:1e3},success:function(t){e.showSyncLog(t)},fail:function(e){a.tips(i.mergeErrMsg("获取同步日志失败",e))}};o.request(t)},showSyncLog:function(e){var n=[],r=t.template('<tr><td width="10">&nbsp;</td><td width="150"><%- syncStartTime %></td><td width="150" title="<%- userId||deptName %>"><%- userId||deptName %></td><td width="100"><%-syncOpText%></td><td title="<%-syncDesc%>"<%= syncCode?\' style="color:red"\':\'\' %> ><%-syncDesc%></td></tr>'),i=["注销用户","恢复用户","开户","修改密码","修改用户","删除用户","添加部门","修改部门","删除部门"];e.length?t.each(e,function(e){e.syncOpText=i[e.syncOp],n.push(r(e))}):n.push('<tr><td colspan="5" class="noFail">暂无同步记录</td></tr>'),a.pop({title:"同步日志",width:600,content:['<div class="faildTableBox mt_10" style="border:1px solid #ddd;"><table class="faildTable" cellspacing="0" cellpadding="0" border="0" width="100%"><thead><tr><td scope="col" width="10">&nbsp;</td><td scope="col" width="150">时间</td><td width="150">名称</td><td width="100">类型</td><td scope="col">结果</td></tr></thead></table><div class="faildTableBox" style="height:174px"><table class="faildTable" cellspacing="0" cellpadding="0" border="0" width="100%">',n.join(""),"</table></div></div>"].join("")})}},g.Router=n.Router.extend({routes:{"company-manage":"companyManage","normal-setting":"normalSetting","account-security":"accountSecurity","message-setting":"messageSetting","company-diy":"companyDiy","system-config":"systemConfig","*err":function(){global.user.role=="root"?g.router.navigate("company-manage",{trigger:!0}):(e(".searchBox").hide(),g.router.navigate("normal-setting",{trigger:!0}))}},companyManage:function(){if(global.user.role!="root"){this.navigate("normal-setting",{trigger:!0});return}this.showModule("companyManage")},normalSetting:function(){this.showModule("normalSetting")},accountSecurity:function(){this.showModule("accountSecurity")},messageSetting:function(){this.showModule("messageSetting")},companyDiy:function(){this.showModule("companyDiy")},systemConfig:function(){this.showModule("systemConfig")},showModule:function(e){m.callModule(g[e]),this.showView(e)},showView:function(t){e(".tab-li").hide(),e("#"+t).show(),e(".secMenu li a").removeClass("act"),e(".secMenu li[data-id="+t+"] a").addClass("act");var n=e(".secMenu li[data-id=companyManage]");global.user.role=="root"?n.show():n.hide()}}),g.router=new g.Router,{init:function(){g.init()}}});