global.language=global.language||"zh_CN",define("controls/Common",["jquery","underscore","i18n/"+global.language],function(e,t,n){return{Module:{nowModule:{},callModule:function(e){var n=Array.prototype.slice.call(arguments,0);n.shift();var r=this.nowModule.destroy,i=e.init;i&&t.isFunction(i)&&(r&&t.isFunction(r)&&r.apply(this.nowModule),this.nowModule=e,i.apply(e,n))}},APIObj:{url:"admin.do",fnName:{},getUrlByFnName:function(e){if(e&&this.fnName[e])return[this.url,"?func=",this.fnName[e]].join("");console.log(n.common.invalidFn)}},formatFloat:function(e,t){var n=e.toFixed(t);return parseInt(n,10)==n?parseInt(n,10):n},formatStorageUnit:function(e,t,n){var r=1024,i=1048576,s=1073741824,o=1099511627776,u,a;if(n){switch(n){case"B":u=this.formatFloat(e,1);break;case"K":case"KB":u=this.formatFloat(e/r,1);break;case"M":case"MB":u=this.formatFloat(e/i,1);break;case"G":case"GB":u=this.formatFloat(e/s,1);break;case"T":case"TB":u=this.formatFloat(e/o,1);break;default:}a=n}else e>=o?(u=this.formatFloat(e/o,1),a="TB"):e>=s?(u=this.formatFloat(e/s,1),a="GB"):e>=i?(u=this.formatFloat(e/i,1),a="MB"):e>=r?(u=this.formatFloat(e/r,1),a="KB"):(u=this.formatFloat(e,1),a="B");return t?{num:u,unit:a}:u==0?0:u+a},stringFormat:function(){if(arguments.length==0)return null;var e=arguments[0];for(var t=1;t<arguments.length;t++){var n=new RegExp("\\{"+(t-1)+"\\}","gm");e=e.replace(n,arguments[t])}return e},convertToB:function(e,t){var n;switch(t){case"K":case"KB":n=1024;break;case"M":case"MB":n=1048576;break;case"G":case"GB":n=1073741824;break;case"T":case"TB":n=1099511627776;break;default:n=1}return e*n},formatOutDate:function(e){var t,r;return e>=12?(t=parseInt(e/12,10),r=e%12,[t,n.setting.year,r?r+n.setting.month:""].join("")):e+n.setting.month},getOutDate:function(e){return e==-1?n.setting.forever:this.formatOutDate(e)},getStatus:function(e){var t="";switch(e){case 0:t=n.setting.normal;break;case 1:t=n.setting.locked;break;case 2:t=n.setting.canceled;break;default:t=n.setting.normal}return t},getTemplate:function(t,n){return e("<div/>").html(t).find(n).html()},tpl2Html:function(e,r){var i=t.template(e);return i(t.extend({},{Lang:n},r||{}))},parseURL:function(e){var t=document.createElement("a");return t.href=e,{source:e,protocol:t.protocol.replace(":",""),host:t.hostname,port:t.port,query:t.search,params:function(){var e={},n=t.search.replace(/^\?/,"").split("&"),r=n.length,i=0,s;for(;i<r;i++){if(!n[i])continue;s=n[i].split("="),e[s[0]]=s[1]}return e}(),file:(t.pathname.match(/\/([^\/?#]+)$/i)||[,""])[1],hash:t.hash.replace("#",""),path:t.pathname.replace(/^([^\/])/,"/$1"),relative:(t.href.match(/tps?:\/\/[^\/]+(.+)/)||[,""])[1],segments:t.pathname.replace(/^\//,"").split("/")}},getRootUrl:function(){var e=this.parseURL(window.location.href);return[e.protocol,"://",e.host+"/"].join("")},getFileExt:function(e){if(e!=""){var t="."+e.replace(/.+\./,"");return t}},getLv:function(e){var t=1,r=n.common.weak,i=/[a-zA-z]/,s=/[0-9]/,o=/(?=[\x21-\x7e]+)[^A-Za-z0-9]/;if(i.test(e)&&s.test(e)&&o.test(e))t=3,r=n.common.strong;else if(i.test(e)&&s.test(e)||i.test(e)&&o.test(e)||s.test(e)&&o.test(e))t=2,r=n.common.normal;return{pswdLv:t,pswdLvText:r}},checkPswdLv:function(t,n){var r=this;e(t).off("keyup.lv").on("keyup.lv",function(){var t=e(this),i=t.val(),s=e(n);if(i==""){s.hide();return}s.show();var o=r.getLv(i);s.find("span").attr("class","passwrodLevel Plevel_"+o.pswdLv),s.find("em").text(o.pswdLvText)})},addStyle:function(t,n){var r="temp-style-"+t,i=e("#"+r);i.length&&i.remove();var s=['<style id="',r,'" type="text/css" rel="stylesheet">',n,"</style>"].join("");e(s).appendTo("head")},formatMobile:function(e){if(!e)return"";var t="+86";if(e.indexOf("86")<=-1||e.indexOf("86")>1)e=t+e;return e},mergeErrMsg:function(e,t){return e+" "+(t.code||t.summary||"")}}}),define("text",["module"],function(e){"use strict";var t,n,r,i,s,o=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],u=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,a=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,f=typeof location!="undefined"&&location.href,l=f&&location.protocol&&location.protocol.replace(/\:/,""),c=f&&location.hostname,h=f&&(location.port||undefined),p={},d=e.config&&e.config()||{};t={version:"2.0.14",strip:function(e){if(e){e=e.replace(u,"");var t=e.match(a);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:d.createXhr||function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(t=0;t<3;t+=1){n=o[t];try{e=new ActiveXObject(n)}catch(r){}if(e){o=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,s=e.lastIndexOf("."),o=e.indexOf("./")===0||e.indexOf("../")===0;return s!==-1&&(!o||s>1)?(t=e.substring(0,s),n=e.substring(s+1)):t=e,r=n||t,s=r.indexOf("!"),s!==-1&&(i=r.substring(s+1)==="strip",r=r.substring(0,s),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var s,o,u,a=t.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===n)&&(!o||o.toLowerCase()===r.toLowerCase())&&(!u&&!o||u===i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,d.isBuild&&(p[e]=r),i(r)},load:function(e,n,r,i){if(i&&i.isBuild&&!i.inlineText){r();return}d.isBuild=i&&i.isBuild;var s=t.parseName(e),o=s.moduleName+(s.ext?"."+s.ext:""),u=n.toUrl(o),a=d.useXhr||t.useXhr;if(u.indexOf("empty:")===0){r();return}!f||a(u,l,c,h)?t.get(u,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([o],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,n,r,i){if(p.hasOwnProperty(n)){var s=t.jsEscape(p[n]);r.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),u=o.ext?"."+o.ext:"",a=o.moduleName+u,f=r.toUrl(o.moduleName+u)+".js";t.load(a,r,function(n){var r=function(e){return i(f,e)};r.asModule=function(e,t){return i.asModule(e,f,t)},t.write(e,a,r,s)},s)}};if(d.env==="node"||!d.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node&&!process.versions["node-webkit"]&&!process.versions["atom-shell"])n=require.nodeRequire("fs"),t.get=function(e,t,r){try{var i=n.readFileSync(e,"utf8");i[0]==="ï»¿"&&(i=i.substring(1)),t(i)}catch(s){r&&r(s)}};else if(d.env==="xhr"||!d.env&&t.createXhr())t.get=function(e,n,r,i){var s=t.createXhr(),o;s.open("GET",e,!0);if(i)for(o in i)i.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),i[o]);d.onXhr&&d.onXhr(s,e),s.onreadystatechange=function(t){var i,o;s.readyState===4&&(i=s.status||0,i>399&&i<600?(o=new Error(e+" HTTP status: "+i),o.xhr=s,r&&r(o)):n(s.responseText),d.onXhrComplete&&d.onXhrComplete(s,e))},s.send(null)};else if(d.env==="rhino"||!d.env&&typeof Packages!="undefined"&&typeof java!="undefined")t.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&r.charAt(0)===65279&&(r=r.substring(1)),r!==null&&n.append(r);while((r=u.readLine())!==null)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)};else if(d.env==="xpconnect"||!d.env&&typeof Components!="undefined"&&Components.classes&&Components.interfaces)r=Components.classes,i=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),s="@mozilla.org/windows-registry-key;1"in r,t.get=function(e,t){var n,o,u,a={};s&&(e=e.replace(/\//g,"\\")),u=new FileUtils.File(e);try{n=r["@mozilla.org/network/file-input-stream;1"].createInstance(i.nsIFileInputStream),n.init(u,1,0,!1),o=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(i.nsIConverterInputStream),o.init(n,"utf-8",n.available(),i.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),o.readString(n.available(),a),o.close(),n.close(),t(a.value)}catch(f){throw new Error((u&&u.path||"")+": "+f)}};return t}),define("text!modules/../../template/head.html",[],function(){return'<div class="userOpera">\r\n    <a href="/drive"><%=Lang.head.backToUser%></a><!--|<a href="javascript:;"><%=obj.name||obj.userId %></a>-->|<a href="<%=logoutUrl%>"><i class="i-quit mr_5"></i><%=Lang.head.exit%></a>\r\n</div>\r\n\r\n<div class="logo">\r\n    <div class="i-logo">\r\n        <div class="i-logoImg">\r\n            <img src="resource/images/img_logo.png" alt="">\r\n            <span class="logoTxt"><b><%=Lang.head.companyDisk%></b>|<em><%=Lang.head.managerCenter%></em></span>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<div id="company-select" class="fake_slt areaChange" <%= obj.corpList.length<=1 ? \' style="display:none"\' : \'\' %> >\r\n<div>\r\n    <span class="fake_slt_txt" style="height: 26px; width: 160px;" title="<%=obj.name%>"><%=obj.corpName%></span><a href="javascript:;" class="fake_slt_a"><i class="i-bdown"></i></a>\r\n</div>\r\n<ul style="max-height:120px;width:99%" class="fake_slt_menu popList" id="company-ul">\r\n\r\n    <% for (var i = 0; i < obj.corpList.length; i++) { %>\r\n    <li>\r\n        <a title="<%=obj.corpList[i].name%>" href="javascript:;" data-corpid="<%=obj.corpList[i].corpId%>"><%=obj.corpList[i].name%></a>\r\n    </li>\r\n    <% } %>\r\n\r\n</ul></div>'}),define("text!modules/../../template/sidemenu.html",[],function(){return'<div class="sideMenu">\r\n    <ul>\r\n        <li class="<%=(moduleName==\'setting\'?\'act\':\'\')%>">\r\n            <a id="setting-link" href="./setting.do"><i class="i-sbico1"></i><span><%=Lang.sideBar.diskSetting%></span></a>\r\n        </li>\r\n        <li class="<%=(moduleName==\'usermanager\'?\'act\':\'\')%>">\r\n            <a id="user-manager-link" href="./usermanager.do"><i class="i-sbico2"></i><span><%=Lang.sideBar.userManager%></span></a>\r\n        </li>\r\n        <li class="<%=(moduleName==\'log\'?\'act\':\'\')%>">\r\n            <a id="log-link" href="./log.do"><i class="i-sbico3"></i><span><%=Lang.sideBar.logManager%></span></a>\r\n        </li>\r\n        <li class="<%=(moduleName==\'statistic\'?\'act\':\'\')%>">\r\n            <a id="statistic-link" href="./statistic.do"><i class="i-sbico4"></i><span><%=Lang.sideBar.statisticManager%></span></a>\r\n        </li>\r\n    </ul>\r\n</div>'}),define("modules/frame",["jquery","underscore","controls/Common","text!../../template/head.html","text!../../template/sidemenu.html"],function(e,t,n,r,i){if(!window.global)return{init:function(){}};if(!window.global.corpList||window.global.corpList&&!window.global.corpList.length)window.global.corpList=[{corpId:0,domain:"",name:"",outDate:0,pageIndex:0,pageSize:0,status:0,storage:0,userLimit:0}];return{init:function(){this.renderSidebar(),this.renderHead(),this.initEvents(),this.initStyle()},ui:{companyUl:"#company-ul",companySelect:"#company-select"},initEvents:function(){var t=this;e(t.ui.companyUl).find("li a").on("click",function(){var r=e(this).data("corpid");if(r==t.model.corpId)return;var i=n.parseURL(location.href);return location.href=i.file+"?corpId="+r,!1}),e(t.ui.companySelect).on("click",function(){e(t.ui.companyUl).toggle()}),e(window).off("resize.frame").on("resize.frame",this.initStyle)},model:{corpId:function(){if(!window.global)return 0;var e=n.parseURL(location.href).params.corpId;return window.global.user.corpId||e}(),corpList:window.global.corpList},renderHead:function(){var i=this,s=this.model.corpId,o=t.find(this.model.corpList,function(e){return e.corpId==s});o=o||this.model.corpList[0];var u=t.extend({},window.global.user,{corpName:o.name,corpList:i.model.corpList,logoutUrl:window.global.logoutUrl||"javascript:;"}),a=n.tpl2Html(r,u);e(".topHead").html(a),e(i.ui.companySelect).find(".fake_slt_txt").text(o.name)},renderSidebar:function(){var t=n.tpl2Html(i,moduleName);e(".sidebar").html(t);var r=this.model.corpId||this.model.corpList[0].corpId;this.setUrl(r)},setUrl:function(t){e("#setting-link").attr("href",window.modules.setting+".do?corpId="+t),e("#user-manager-link").attr("href",window.modules.userManager+".do?corpId="+t),e("#log-link").attr("href",window.modules.log+".do?corpId="+t),e("#statistic-link").attr("href",window.modules.statistic+".do?corpId="+t)},initStyle:function(){var t=e(".topHead").height(),r=e(window).height(),i=r-t,s=360;i<s&&(i=s),global.height=i;var o=i-120-55,u=parseInt(o/10,10),a=[".wrapper,.sidebar,.subSiderBar,.rightContainer{height:",i,"px}"];n.addStyle("frame",a.join(""))}}});