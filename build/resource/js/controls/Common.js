global.language=global.language||"zh_CN",define(["jquery","underscore","i18n/"+global.language],function(e,t,n){return{Module:{nowModule:{},callModule:function(e){var n=Array.prototype.slice.call(arguments,0);n.shift();var r=this.nowModule.destroy,i=e.init;i&&t.isFunction(i)&&(r&&t.isFunction(r)&&r.apply(this.nowModule),this.nowModule=e,i.apply(e,n))}},APIObj:{url:"admin.do",fnName:{},getUrlByFnName:function(e){if(e&&this.fnName[e])return[this.url,"?func=",this.fnName[e]].join("");console.log(n.common.invalidFn)}},formatFloat:function(e,t){var n=e.toFixed(t);return parseInt(n,10)==n?parseInt(n,10):n},formatStorageUnit:function(e,t,n){var r=1024,i=1048576,s=1073741824,o=1099511627776,u,a;if(n){switch(n){case"B":u=this.formatFloat(e,1);break;case"K":case"KB":u=this.formatFloat(e/r,1);break;case"M":case"MB":u=this.formatFloat(e/i,1);break;case"G":case"GB":u=this.formatFloat(e/s,1);break;case"T":case"TB":u=this.formatFloat(e/o,1);break;default:}a=n}else e>=o?(u=this.formatFloat(e/o,1),a="TB"):e>=s?(u=this.formatFloat(e/s,1),a="GB"):e>=i?(u=this.formatFloat(e/i,1),a="MB"):e>=r?(u=this.formatFloat(e/r,1),a="KB"):(u=this.formatFloat(e,1),a="B");return t?{num:u,unit:a}:u==0?0:u+a},stringFormat:function(){if(arguments.length==0)return null;var e=arguments[0];for(var t=1;t<arguments.length;t++){var n=new RegExp("\\{"+(t-1)+"\\}","gm");e=e.replace(n,arguments[t])}return e},convertToB:function(e,t){var n;switch(t){case"K":case"KB":n=1024;break;case"M":case"MB":n=1048576;break;case"G":case"GB":n=1073741824;break;case"T":case"TB":n=1099511627776;break;default:n=1}return e*n},formatOutDate:function(e){var t,r;return e>=12?(t=parseInt(e/12,10),r=e%12,[t,n.setting.year,r?r+n.setting.month:""].join("")):e+n.setting.month},getOutDate:function(e){return e==-1?n.setting.forever:this.formatOutDate(e)},getStatus:function(e){var t="";switch(e){case 0:t=n.setting.normal;break;case 1:t=n.setting.locked;break;case 2:t=n.setting.canceled;break;default:t=n.setting.normal}return t},getTemplate:function(t,n){return e(t).find(n).html()},tpl2Html:function(e,r){var i=t.template(e);return i(t.extend({},{Lang:n},r||{}))},parseURL:function(e){var t=document.createElement("a");return t.href=e,{source:e,protocol:t.protocol.replace(":",""),host:t.hostname,port:t.port,query:t.search,params:function(){var e={},n=t.search.replace(/^\?/,"").split("&"),r=n.length,i=0,s;for(;i<r;i++){if(!n[i])continue;s=n[i].split("="),e[s[0]]=s[1]}return e}(),file:(t.pathname.match(/\/([^\/?#]+)$/i)||[,""])[1],hash:t.hash.replace("#",""),path:t.pathname.replace(/^([^\/])/,"/$1"),relative:(t.href.match(/tps?:\/\/[^\/]+(.+)/)||[,""])[1],segments:t.pathname.replace(/^\//,"").split("/")}},getRootUrl:function(){var e=this.parseURL(window.location.href);return[e.protocol,"://",e.host+"/"].join("")},getFileExt:function(e){if(e!=""){var t="."+e.replace(/.+\./,"");return t}},getLv:function(e){var t=1,r=n.common.weak,i=/[a-zA-z]/,s=/[0-9]/,o=/(?=[\x21-\x7e]+)[^A-Za-z0-9]/;if(i.test(e)&&s.test(e)&&o.test(e))t=3,r=n.common.strong;else if(i.test(e)&&s.test(e)||i.test(e)&&o.test(e)||s.test(e)&&o.test(e))t=2,r=n.common.normal;return{pswdLv:t,pswdLvText:r}},checkPswdLv:function(t,n){var r=this;e(t).off("keyup.lv").on("keyup.lv",function(){var t=e(this),i=t.val(),s=e(n);if(i==""){s.hide();return}s.show();var o=r.getLv(i);s.find("span").attr("class","passwrodLevel Plevel_"+o.pswdLv),s.find("em").text(o.pswdLvText)})},addStyle:function(t,n){var r="temp-style-"+t,i=e("#"+r);i.length&&i.remove();var s=['<style id="',r,'" type="text/css" rel="stylesheet">',n,"</style>"].join("");e(s).appendTo("head")}}});