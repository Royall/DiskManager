global.language=global.language||"zh_CN",define(["jquery","underscore","controls/DataAPI","i18n/"+global.language],function(e,t,n,r){return{getUrlByName:function(e){if(e&&n.fnName[e])return[n.url,"?func=",n.fnName[e],"&tid=",(new Date).getTime()].join("");console.log(r.common.invalidFn)},formatFloat:function(e,t){var n=e.toFixed(t);return parseInt(n,10)==n?parseInt(n,10):n},formatStorageUnit:function(e,t,n){var r=1024,i=1048576,s=1073741824,o=1099511627776,u,a,f=Math.abs(e);if(n){switch(n){case"B":u=this.formatFloat(f,1);break;case"K":case"KB":u=this.formatFloat(f/r,1);break;case"M":case"MB":u=this.formatFloat(f/i,1);break;case"G":case"GB":u=this.formatFloat(f/s,1);break;case"T":case"TB":u=this.formatFloat(f/o,1);break;default:}a=n}else f>=o?(u=this.formatFloat(f/o,1),a="TB"):f>=s?(u=this.formatFloat(f/s,1),a="GB"):f>=i?(u=this.formatFloat(f/i,1),a="MB"):f>=r?(u=this.formatFloat(f/r,1),a="KB"):(u=this.formatFloat(f,1),a="B");return e!==f&&(u=-u),t?{num:u,unit:a}:u==0?0:u+a},stringFormat:function(){if(arguments.length==0)return null;var e=arguments[0];for(var t=1;t<arguments.length;t++){var n=new RegExp("\\{"+(t-1)+"\\}","gm");e=e.replace(n,arguments[t])}return e},convertToB:function(e,t){var n;switch(t){case"K":case"KB":n=1024;break;case"M":case"MB":n=1048576;break;case"G":case"GB":n=1073741824;break;case"T":case"TB":n=1099511627776;break;default:n=1}return e*n},formatOutDate:function(e){var t,n;return e>=12?(t=parseInt(e/12,10),n=e%12,[t,r.setting.year,n?n+r.setting.month:""].join("")):e+r.setting.month},getOutDate:function(e){return e==-1?r.setting.forever:this.formatOutDate(e)},getStatus:function(e){var t="";switch(e){case 0:t=r.setting.normal;break;case 1:t=r.setting.locked;break;case 2:t=r.setting.canceled;break;default:t=r.setting.normal}return t},getTemplate:function(t,n){return e("<div/>").html(t).find(n).html()},tpl2Html:function(e,n){var i=t.template(e);return i(t.extend({},{Lang:r},n||{}))},parseURL:function(e){var t=document.createElement("a");return t.href=e,{source:e,protocol:t.protocol.replace(":",""),host:t.hostname,port:t.port,query:t.search,params:function(){var e={},n=t.search.replace(/^\?/,"").split("&"),r=n.length,i=0,s;for(;i<r;i++){if(!n[i])continue;s=n[i].split("="),e[s[0]]=s[1]}return e}(),file:(t.pathname.match(/\/([^\/?#]+)$/i)||[,""])[1],hash:t.hash.replace("#",""),path:t.pathname.replace(/^([^\/])/,"/$1"),relative:(t.href.match(/tps?:\/\/[^\/]+(.+)/)||[,""])[1],segments:t.pathname.replace(/^\//,"").split("/")}},getRootUrl:function(){var e=this.parseURL(window.location.href);return[e.protocol,"://",e.host+"/"].join("")},getFileExt:function(e){if(e!=""){var t="."+e.replace(/.+\./,"");return t}},getLv:function(e){var t=1,n=r.common.weak,i=/[a-zA-z]/,s=/[0-9]/,o=/(?=[\x21-\x7e]+)[^A-Za-z0-9]/;if(i.test(e)&&s.test(e)&&o.test(e))t=3,n=r.common.strong;else if(i.test(e)&&s.test(e)||i.test(e)&&o.test(e)||s.test(e)&&o.test(e))t=2,n=r.common.normal;return{pswdLv:t,pswdLvText:n}},checkPswdLv:function(t,n){var r=this;e(t).off("keyup.lv").on("keyup.lv",function(){var t=e(this),i=t.val(),s=e(n);if(i==""){s.hide();return}s.show();var o=r.getLv(i);s.find("span").attr("class","passwrodLevel Plevel_"+o.pswdLv),s.find("em").text(o.pswdLvText)})},addStyle:function(t,n){var r="temp-style-"+t,i=e("#"+r);i.length&&i.remove();var s=['<style id="',r,'" type="text/css" rel="stylesheet">',n,"</style>"].join("");e(s).appendTo("head")},formatMobile:function(e,t){if(!e)return"";e+="";var n="+86";if(t){if(e.indexOf("86")<=-1||e.indexOf("86")>1)e=n+e}else{var r=e.indexOf("+86");r==0&&(e=e.substr(3))}return e},mergeErrMsg:function(e,t){var n,r=t.summary||t.code||"",i=/[，。,\.!！]/;return i.test(e)?n=e+" "+r:n=e+(r?"："+r:"")+" ！",n},getCorpId:function(){var e=~~this.parseURL(location.href).params.corpId;return global.user.corpId||e||global.corpList[0].corpId},getCorpData:function(){var e=this.getCorpId();return t.find(window.global.corpList,function(t){return t.corpId==e})},placeholder:function(){typeof document.createElement("input").placeholder=="undefined"&&e("[placeholder]").off("focus.placeholder").on("focus.placeholder",function(){var t=e(this);t.val()===t.attr("placeholder")&&(t.val(""),t.removeClass("placeholder"))}).off("blur.placeholder").on("blur.placeholder",function(){var t=e(this);if(t.val()===""||t.val()===t.attr("placeholder"))t.addClass("placeholder"),t.val(t.attr("placeholder"))}).blur().parents("form").submit(function(){e(this).find("[placeholder]").each(function(){var t=e(this);t.val()===t.attr("placeholder")&&t.val("")})})}}});